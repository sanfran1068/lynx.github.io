{"meta":{"title":"Lynx-Blog","subtitle":null,"description":null,"author":"Keefe Wang","url":"http://keefe.wang"},"pages":[{"title":"About","date":"2017-05-15T02:02:29.000Z","updated":"2017-10-09T07:13:05.000Z","comments":true,"path":"about/index.html","permalink":"http://keefe.wang/about/index.html","excerpt":"","text":""},{"title":"Categories","date":"2017-05-15T01:58:51.000Z","updated":"2017-10-09T07:13:05.000Z","comments":true,"path":"categories/index.html","permalink":"http://keefe.wang/categories/index.html","excerpt":"","text":""},{"title":"welcome","date":"2017-05-18T14:44:39.000Z","updated":"2017-10-09T07:13:05.000Z","comments":true,"path":"welcome/index.html","permalink":"http://keefe.wang/welcome/index.html","excerpt":"","text":""},{"title":"Tags","date":"2017-05-15T01:54:35.000Z","updated":"2017-10-09T07:13:05.000Z","comments":true,"path":"tags/index.html","permalink":"http://keefe.wang/tags/index.html","excerpt":"","text":""},{"title":"html editor","date":"2021-01-27T02:24:00.000Z","updated":"2021-01-27T02:25:01.914Z","comments":true,"path":"editor/index.html","permalink":"http://keefe.wang/editor/index.html","excerpt":"","text":""},{"title":"","date":"2021-01-27T03:03:56.331Z","updated":"2021-01-27T03:03:56.331Z","comments":true,"path":"editor/index.html","permalink":"http://keefe.wang/editor/index.html","excerpt":"","text":"HTML Editor html { height: 100%; padding: 0; margin: 0; } body { display: flex; flex-direction: column; height: 100%; padding: 0; margin: 0; } textarea { border: 1px solid black; box-shadow: 0px 0px 5px rgba(0,0,0,0.2) inset; padding: 10px; resize: none; color: #333; width: calc( 100% - 20px ); height: 300px; margin: 15px 0; border: 0; } textarea:focus { outline: none; } iframe { margin: 0; border: 0; height: 300px; } .iframe::-webkit-scrollbar-track { -webkit-box-shadow: inset 0 0 8px rgba(0,0,0,0.3); background-color: #efefef; } .iframe::-webkit-scrollbar { width: 8px; background-color: #F5F5F5; } .iframe::-webkit-scrollbar-thumb { background-color: fe4365; } .controls { background-color: #000; border-top : 1px solid #808080; border-bottom: 1px solid #808080; padding: 12px; white-space: nowrap; overflow-x: auto; min-height: 23px; } .controls input[type=\"checkbox\" i]:checked { background-color: #fe4365; cursor: default; appearance: checkbox; box-sizing: border-box; margin: 3px 3px 3px 4px; padding: initial; border: initial; } .controls a, .controls label { background-color: #fe4365; text-decoration: none; color: #000; user-select: none; margin-right: 15px; padding: 6px 15px; cursor: pointer; } .controls a:hover, .controls label:hover { color: #fe4365; background: #f0f0f0; text-decoration: none; transition: all .2s; } body { padding: 50px; } span { display: inline-block; background: #fe4365; color: white; padding: 20px; } åœ¨è¿™é‡Œç¼–è¾‘ä»£ç ï¼Œä¸‹æ–¹æŸ¥çœ‹ä»£ç è¿è¡Œçš„ç»“æœ~ è¿è¡Œ æ–°é¡µé¢æ‰“å¼€ function update() { let outty = window.hello.document; outty.open(); let inny=document.getElementById(\"data\"); outty.write(inny.value); outty.close(); }; function goFullscreen(newWin) { if (newWin) outWin= window.open() else outWin= window.open(\"about:blank\",\"html_editor\"); outWin.focus(); let outty = outWin.document; outty.open(); let inny=document.getElementById(\"data\"); outty.write(inny.value); outty.close(); } function realtime(){ if (!document.querySelector(\"#realtime\").checked) return; update(); } dataArea=document.getElementById(\"data\"); dataArea.onkeyup=realtime; update();"}],"posts":[{"title":"[ç¿»è¯‘]æµè§ˆå™¨æ€æ ·æ¸²æŸ“ä¸€ä¸ªé¡µé¢ï¼Ÿâ€”â€” DOMï¼ŒCSSOMåŠå…¶æ¸²æŸ“","slug":"2020-08-13-translate-how-browser-renders-webpage","date":"2020-08-13T14:02:03.000Z","updated":"2021-01-21T13:21:25.611Z","comments":true,"path":"2020/08/13/2020-08-13-translate-how-browser-renders-webpage.html","link":"","permalink":"http://keefe.wang/2020/08/13/2020-08-13-translate-how-browser-renders-webpage.html","excerpt":"","text":"è½¬è‡ªç¬”è®° https://www.notion.so/DOM-CSSOM-64405971e5654db28a44c7d741a22a00 åœ¨ç½‘é¡µå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå½±å“ç”¨æˆ·ä½“éªŒçš„å› ç´ æœ‰å¾ˆå¤šï¼Œå¤§éƒ¨åˆ†å½’å’äºèµ„æºåŠ è½½é€Ÿåº¦æ…¢ã€åˆå§‹é¡µé¢æ¸²æŸ“æ—¶åŠ è½½éå¿…é¡»çš„æ–‡ä»¶ï¼ˆç”šè‡³ä¼šå‡ºç°æ²¡æœ‰æ ·å¼çš„æ–‡æ¡£ï¼‰ç­‰ç­‰ã€‚ä¸ºäº†é¿å…è¿™äº›é—®é¢˜çš„äº§ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦ç†è§£æµè§ˆå™¨æ¸²æŸ“ä¸€ä¸ªç‰¹å®šçš„ç½‘é¡µçš„æ•´ä¸ªå‘¨æœŸå’Œæµç¨‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ææ¸…æ¥šä»€ä¹ˆæ˜¯ DOMã€‚å½“ä¸€ä¸ªæµè§ˆå™¨å‘æœåŠ¡ç«¯è¯·æ±‚ä¸€ä¸ª HTML æ–‡æ¡£ï¼ŒæœåŠ¡å™¨ä¼šå°†è¿™ä¸ª HTML æ–‡æ¡£ä»¥äºŒè¿›åˆ¶å½¢å¼çš„æ•°æ®ï¼ˆä¸€ä¸ªå¸¦ç€ Content-Type = &#39;text/html; charset=UTF-8&#39; çš„text æ–‡ä»¶ï¼‰è¿›è¡Œå“åº”ã€‚è¿™å…¶ä¸­ï¼Œ text/html æ˜¯ä¸€ç§ MIME ç±»å‹ï¼ˆMIME èƒ½å¤Ÿå‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ï¼Œå¹¶ä¸”å­—ç¬¦ç¼–ç æ˜¯ UTF-8ï¼‰ã€‚æœ‰äº†è¿™ä¸ªä¿¡æ¯ï¼Œæµè§ˆå™¨å°±èƒ½å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢æˆä¸€ä¸ªå¯ç†è§£çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º å¦‚æœè¿™ä¸ªå“åº”å¤´ä¸¢å¤±ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œè§£æå’Œæ¸²æŸ“ã€‚å½“ä¸€åˆ‡å°±ç»ªï¼Œæµè§ˆå™¨å°±å¯ä»¥å¯¹ HTML æ–‡æ¡£è¿›è¡Œè§£æã€‚HTML æ–‡æ¡£çš„æ ·å­é€šå¸¸å¦‚ä¸‹å›¾æ‰€ç¤º 123456789101112131415161718&lt;!DOCTYPE HTML&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Rendering Test&lt;/title&gt; &lt;!-- stylesheet --&gt; &lt;link rel=\"stylesheet\" href=\"./style.css\"/&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=\"container\"&gt; &lt;h1&gt;Hello World!&lt;/h1&gt; &lt;p&gt;This is a sample paragraph.&lt;/p&gt; &lt;/div&gt; &lt;!-- script --&gt; &lt;script src=\"./main.js\"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; åœ¨ä¸Šé¢çš„ HTML æ–‡æ¡£ä¸­ï¼Œç½‘é¡µä¸»è¦ä¾èµ– style.css æ–‡ä»¶æ¥ç»™ HTML å…ƒç´ æä¾›æ ·å¼ï¼Œä¾èµ– main.js æ¥è¿›è¡Œä¸€äº› JavaScript è„šæœ¬ä»£ç çš„æ‰§è¡Œã€‚æœ‰äº† CSS æ ·å¼ï¼Œæˆ‘ä»¬çš„é¡µé¢çœ‹èµ·æ¥ä¼šéå¸¸æ£’ ä½†æˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰èŠåˆ°é‡ç‚¹â€”â€”æµè§ˆå™¨æ˜¯å¦‚ä½•å°†ä¸€ä¸ªæ¼‚äº®çš„é¡µé¢ä»ä¸€ä¸ªç®€å•çš„åªå……æ»¡äº†æ–‡æœ¬ HTML æ–‡ä»¶æ¸²æŸ“å‡ºæ¥çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±èŠèŠ DOMã€CSSOM å’Œæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰ã€‚ DOMï¼ˆDocument Object Modelï¼‰å½“æµè§ˆå™¨è§£æ HTML ä»£ç æ—¶ï¼Œé‡åˆ°åƒ htmlã€body å’Œ div ç­‰ç­‰çš„æ ‡ç­¾ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç§°ä½œèŠ‚ç‚¹ï¼ˆNodeï¼‰ çš„JavaScript å¯¹è±¡ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰çš„ HTML å…ƒç´ éƒ½ä¼šè¢«è½¬æ¢æˆè¿™æ ·çš„èŠ‚ç‚¹ã€‚ HTML å…ƒç´ éƒ½ä¼šæœ‰è‡ªå·±ä¸åŒçš„å±æ€§ï¼ˆpropertiesï¼‰ï¼Œç›¸åº”çš„ï¼ŒèŠ‚ç‚¹å¯¹è±¡ä¼šä»ä¸åŒçš„ç±»è¢«æ„é€ å‡ºæ¥ã€‚ä¾‹å¦‚ div å…ƒç´ ä¼šè¢«åˆ›å»ºä¸ºä¸€ä¸ª HTMLDivElement ç±»çš„èŠ‚ç‚¹å®ä¾‹ï¼ˆç»§æ‰¿äº Node ç±»ï¼‰ï¼Œå¦‚ä¸‹å›¾ æµè§ˆå™¨æœ‰å¾ˆå¤šè¿™æ ·å†…ç½®çš„ç±»ï¼Œä¾‹å¦‚ HTMLDivElementã€HTMLScriptElement å’Œ Node ç±»ç­‰ç­‰ã€‚ å½“æµè§ˆå™¨è§£æå®Œ HTML æ–‡æ¡£å¹¶ç›¸åº”çš„åˆ›å»ºå‡ºè®¸å¤šçš„èŠ‚ç‚¹åï¼Œè¿˜ä¼šå°†è¿™äº›èŠ‚ç‚¹æ„å»ºæˆä¸ºä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å°±æƒ³ HTML æ–‡æ¡£ä¸­å…ƒç´ éƒ½æ˜¯ç›¸äº’åµŒå¥—çš„ï¼Œæµè§ˆå™¨ä¹Ÿéœ€è¦ç›¸åº”çš„æŠŠè¿™äº›èŠ‚ç‚¹æ„å»ºæˆç±»ä¼¼çš„åµŒå¥—çš„ç»“æ„ã€‚è¿™ç§ç»“æ„ä¼šè®©æµè§ˆå™¨æ›´åŠ é«˜æ•ˆçš„æ¸²æŸ“å’Œæ“ä½œã€‚ DOM æ ‘çš„ç»“æ„å°±å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä¸€æ£µ DOM æ ‘ç”± html å…ƒç´ èŠ‚ç‚¹å¼€å§‹ï¼Œå…¶ä¸­çš„å…¶ä»–å…ƒç´ åƒæ ‘æå’Œå¶å­ä¸€æ ·è¢«å±‚å±‚åµŒå¥—ï¼ˆåœ¨ HTML æ–‡æ¡£è§£æè¿‡ç¨‹ä¸­ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ª HTML å…ƒç´ ï¼Œå°±ä¼šä»ç›¸åº”çš„èŠ‚ç‚¹ç±»ä¸­æ„é€ å‡ºä¸€ä¸ª DOM èŠ‚ç‚¹å¹¶æ·»åŠ åœ¨ DOM æ ‘ä¸Šï¼‰ã€‚ DOM èŠ‚ç‚¹å¹¶ä¸æ€»æ˜¯ HTML å…ƒç´ ã€‚å½“æµè§ˆå™¨æ„å»º DOM æ ‘æ—¶ï¼Œä¹Ÿä¼šå°†æ³¨é‡Šã€å±æ€§ï¼ˆattributesï¼‰å’Œæ–‡æœ¬ç­‰ä¿å­˜æˆæ ‘ä¸Šçš„èŠ‚ç‚¹ã€‚ä¸ºäº†æ•´ä¸ªæµç¨‹çš„ç®€å•æè¿°ï¼Œæ–‡ä¸­çš„èŠ‚ç‚¹æˆ‘ä»¬éƒ½è®¤ä¸ºæ˜¯ç”± HTML å…ƒç´ åˆ›å»ºçš„èŠ‚ç‚¹ã€‚ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æ‰€æœ‰çš„èŠ‚ç‚¹ç±»å‹ã€‚ ä½ å¯ä»¥åœ¨è°·æ­Œæµè§ˆå™¨çš„ Devtools æ§åˆ¶å°ä¸­å¯è§†åŒ–åœ°æŸ¥çœ‹ DOM æ ‘çš„å±‚çº§ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚ JavaScript æ˜¯æ— æ³•ç†è§£ DOM æ˜¯ä»€ä¹ˆä¸œè¥¿çš„ã€‚DOM æ˜¯æµè§ˆå™¨ä¸ºäº†æç¬‘æ¸²æŸ“ç½‘é¡µè€Œå‘å¼€å‘è€…æš´éœ²çš„ Web APIï¼Œè®©å¼€å‘è€…å¯ä»¥åŠ¨æ€çš„å»æ“ä½œè¿™äº› DOM å…ƒç´ ã€‚ å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ DOM API æ¥è¿›è¡Œ HTML å…ƒç´ çš„æ·»åŠ å’Œåˆ é™¤ï¼Œæ”¹å˜å…¶æ ·å¼ï¼Œä¸ºå…¶ç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬å™¨ã€‚ä½¿ç”¨ DOM API è¿˜èƒ½å¤Ÿåœ¨å†…å­˜ä¸­äººå·¥åˆ›å»ºå’Œå¤åˆ¶ä¸€äº› HTML å…ƒç´ ï¼Œè€Œä¸å—å·²ç»æ¸²æŸ“å¥½çš„ DOM æ ‘çš„å½±å“ã€‚è¿™äº›ç‰¹æ€§éƒ½è®©å¼€å‘è€…ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒè€Œæ›´å¥½åœ°å¼€å‘åŠ¨æ€ç½‘é¡µã€‚ CSSOMï¼ˆCSS Object Modelï¼‰åœ¨è®¾è®¡ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œæˆ‘ä»¬ä¼šå°½å¯èƒ½åœ°è®©ç½‘é¡µçœ‹èµ·æ¥æ›´åŠ ç¾è§‚ã€‚æˆ‘ä»¬ä¼šåœ¨ HTML å…ƒç´ ä¸­æ·»åŠ  CSS æ ·å¼æ¥è¾¾åˆ°æ­¤ç›®çš„ã€‚CSS é€‰æ‹©å™¨è®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹é€‰å®šçš„ DOM å…ƒç´ è®¾ç½®ç±»ä¼¼ color æˆ– font-size ç­‰çš„æ ·å¼å±æ€§ã€‚ ä¸ºå…ƒç´ æ·»åŠ æ ·å¼æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ‰ç›´æ¥å‘ HTML å…ƒç´ ä¸­æ·»åŠ æ ·å¼ï¼ˆå†…è”æ ·å¼ï¼‰ï¼Œæˆ–åœ¨ HTML æ–‡æ¡£ä¸­æ·»åŠ  æ ‡ç­¾å¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸€äº›æ ·å¼ï¼Œä¹Ÿå¯ä»¥å¼•å…¥ä¸€ä¸ªå¤–éƒ¨çš„ CSS æ–‡ä»¶ã€‚æœ€ç»ˆï¼Œå°† CSS æ ·å¼æ·»åŠ åˆ° DOM å…ƒç´ è¿™ä¸ªé‡æ‹…è¿˜æ˜¯è¦è½åœ¨æµè§ˆå™¨èº«ä¸Šã€‚ é’ˆå¯¹ä¸Šé¢æä¾›çš„ HTML æ–‡æ¡£ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„ CSS æ ·å¼æ¥è¿›è¡Œç¾åŒ–ã€‚ 1234567891011121314151617181920212223html &#123; padding: 0; margin: 0;&#125;body &#123; font-size: 14px;&#125;.container &#123; width: 300px; height: 200px; color: black;&#125;.container &gt; h1 &#123; color: gray;&#125;.container &gt; p &#123; font-size: 12px; display: none;&#125; DOM æ ‘æ„å»ºå®Œæˆåï¼Œæµè§ˆå™¨å°†è¯»å–èµ„æºï¼ˆå¤–éƒ¨çš„ã€å†…è”çš„ã€HTMLæ–‡æ¡£ä¸­çš„å’Œç”¨æˆ·ä»£ç†ï¼‰ä¸­çš„ CSS æ ·å¼æ–‡ä»¶ï¼Œå¹¶æ„å»ºå‡ºä¸€ä¸ª CSSOM æ ‘ã€‚CSSOM æ„ä¸º CSS Object Modelï¼Œå°±å’Œ DOM æ ‘ä¸€æ ·éƒ½æ˜¯æ ‘ç»“æ„ã€‚ åœ¨ CSSOM æ ‘ä¸Šï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ª DOM å…ƒç´ æ‰€åŒ…å«çš„æ ·å¼ã€‚è€Œä¸”ï¼ŒCSSOM æ ‘ä¸åƒ DOM æ ‘ï¼ˆã€ç­‰ï¼‰ä¸€æ ·èƒ½å¤Ÿè¢«æ‰“å°åœ¨å±å¹•ä¸Šã€‚ ç”¨æˆ·ä»£ç†æ ·å¼ï¼Œæ˜¯å¤§éƒ¨åˆ†æµè§ˆå™¨è‡ªå¸¦çš„ä¸€äº›æ ·å¼è¡¨ã€‚æµè§ˆå™¨åœ¨è®¡ç®— CSS æ ·å¼å±æ€§æ—¶ï¼Œä¼šé¦–å…ˆåŠ è½½ç”¨æˆ·ä»£ç†æ ·å¼ï¼Œç„¶åä¼šå°†å¼€å‘äººå‘˜æä¾›çš„æ ·å¼è¡¨ï¼ˆæ ¹æ®ä¸€å®šçš„ CSS ä¼˜å…ˆçº§è§„å¾‹ï¼‰è¿›è¡Œè¦†ç›–ï¼Œæ¥æ„é€ å‡ºæ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å³ä½¿æœ‰çš„ HTML å…ƒç´ æ²¡æœ‰ç”¨æˆ·ä»£ç†å’Œå¼€å‘è€…æä¾›ç‰¹å®šæ ·å¼ï¼Œæ ·å¼çš„é»˜è®¤å€¼ä¹Ÿä¼šæ ¹æ® W3C CSS æ ‡å‡†è¿›è¡Œé»˜è®¤èµ‹å€¼ã€‚è€Œä¸€äº›å…ƒç´ çš„å±æ€§ä¹Ÿä¼šç»§æ‰¿é€æ­¥ç»§æ‰¿è¿™äº›é»˜è®¤çš„å±æ€§å€¼ã€‚ ä¾‹å¦‚ï¼Œcolor å’Œ font-size å±æ€§å¦‚æœæ²¡æœ‰è¿›è¡Œä»»ä½•å€¼çš„æŒ‡å®šï¼Œä»–ä»¬ä¼šç»§æ‰¿çˆ¶å…ƒç´ çš„å±æ€§å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿæƒ³è±¡è¿™äº›æ ·å¼éƒ½æ˜¯ä¸€å±‚å±‚è¿›è¡Œç»§æ‰¿å’Œè¦†ç›–ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ ·å¼è¡¨è¢«ç§°ä¹‹ä¸º CSSï¼ˆcascading style sheetsï¼‰ï¼Œè¿™ç§è§„åˆ™ä¹Ÿæ˜¯æµè§ˆå™¨èƒ½æ„å»ºå‡º CSSOM æ ‘çš„åŸå› ã€‚ ä½ èƒ½ä½¿ç”¨è°·æ­Œæµè§ˆå™¨çš„ DevTools æ§åˆ¶å°çš„ Elements é¢æ¿ï¼Œåœ¨å·¦ä¾§é€‰ä¸­ä¸€ä¸ª HTML å…ƒç´ ï¼Œç‚¹å‡»åèƒ½å¤Ÿåœ¨å³ä¾§çš„ computed é¢æ¿ä¸­çœ‹åˆ°ç›¸åº”çš„æ ·å¼è®¡ç®—ç»“æœã€‚ æˆ‘ä»¬å°†ä¹‹å‰ä¾‹å­ä¸­çš„ CSSOM æ ‘å¯è§†åŒ–ä¸ºä¸‹é¢çš„å›¾è¡¨ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒCSSOM æ ‘æ˜¯ä¸åŒ…å«èƒ½å¤Ÿæ‰“å°å‡ºæ¥çš„å…ƒç´ å’Œæ ‡ç­¾çš„ã€‚ä¸Šé¢çº¢è‰²çš„ CSS å±æ€§å’Œå€¼å°±æ˜¯ä» body å…ƒç´ ä¸Šé¢çš„æ ·å¼ç»§æ‰¿è€Œæ¥çš„ï¼Œè€Œ h1 æ ‡ç­¾çš„ color å±æ€§åˆ™è¦†ç›–äº†å…¶çˆ¶å…ƒç´  div ä¸­çš„ color å±æ€§ã€‚ Render Treeæ¸²æŸ“æ ‘ä¹Ÿæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œå®ƒç»“åˆäº† DOM æ ‘å’Œ CSSOM æ ‘ã€‚æµè§ˆå™¨æ¥ä¸‹æ¥éœ€è¦è®¡ç®—æ¯ä¸€ä¸ªå¯è§å…ƒç´ çš„å¸ƒå±€å¹¶å°†å…¶ç»˜åˆ¶åœ¨å±å¹•ä¸Šï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œæµè§ˆå™¨éœ€è¦ç”¨åˆ° Render Treeã€‚è€Œ Render Tree åˆæ˜¯ç”± Dom å’Œ CSSOM æ ‘å¾—åˆ°çš„ã€‚ ç”±äºæ¸²æŸ“æ ‘æ˜¯èƒ½æœ€ç»ˆåœ¨å±å¹•ä¸Šæ‰“å°å‡ºçš„åº•å±‚è¡¨ç¤ºï¼Œå®ƒä¸ä¼šåŒ…å«ä»»ä½•ä¸åŒ…å«åƒç´ çŸ©é˜µé¢ç§¯çš„èŠ‚ç‚¹â€”â€”ä¾‹å¦‚ä½¿ç”¨äº† display: none æ ·å¼çš„å…ƒç´ ï¼Œè¿™æ ·çš„å…ƒç´ æ˜¯ä¸ä¼šå‡ºç°åœ¨æ¸²æŸ“æ ‘ä¸Šçš„ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¸²æŸ“æ ‘ç»“åˆäº† DOM æ ‘å’Œ CSSOM æ ‘æ¥æ„å»ºå‡ºä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œè¿™ä¸ªæ ‘ç»“æ„åªåŒ…å«èƒ½å¤Ÿæœ€ç»ˆç»˜åˆ¶åœ¨å±å¹•ä¸Šçš„å…ƒç´ ã€‚ ä¸Šé¢ä»£ç ä¸­çš„ p å…ƒç´ ç”±äºè¢«è®¾ç½®äº† display: none æ ·å¼ï¼Œæ‰€ä»¥è¿™ä¸ªå…ƒç´ ä»¥åŠè¯¥å…ƒç´ çš„å­å…ƒç´ éƒ½ä¸ä¼šå‘ˆç°åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå› ä¸ºå®ƒä¸å ä»»ä½•å±å¹•ç©ºé—´ã€‚ä½†æ˜¯æœ‰ä¸€äº›ä¾‹å¤–ï¼Œæ¯”å¦‚è¢«è®¾ç½®äº† visibility:hidden or opacity:0 æ ·å¼çš„å…ƒç´ ï¼Œä»–ä»¬è™½ç„¶æ²¡æœ‰å æ®ä»»ä½•å±å¹•ç©ºé—´ï¼Œä½†æ˜¯ä»ç„¶ä¼šè¢«æ·»åŠ åˆ°æ¸²æŸ“æ ‘ä¸Šã€‚ å’Œ DOM API èƒ½å¤Ÿè®©å¼€å‘è€…å»æ“æ§ DOM å…ƒç´ ä¸åŒï¼ŒCSSOM æ˜¯è¢«éšè—èµ·æ¥çš„ï¼Œä½†ç”±äºæ¸²æŸ“æ ‘ç»“åˆäº†ä¸¤è€…ï¼Œæ‰€ä»¥æµè§ˆå™¨é€šè¿‡æä¾›é«˜çº§çš„ DOM ä¸Šçš„ API æ¥æš´éœ²å‡º CSSOM èŠ‚ç‚¹ï¼Œè¿™è®©å¼€å‘è€…èƒ½å¤Ÿå»æ“ä½œå’Œä¿®æ”¹ CSSOM èŠ‚ç‚¹çš„ CSS å±æ€§ã€‚ æœ¬æ–‡ä¸è®¨è®ºæ€æ ·ä½¿ç”¨ JavaScript è„šæœ¬å»æ“ä½œå…ƒç´ çš„æ ·å¼ï¼Œè¿™é‡Œä»…æä¾›æè¿°äº† CSSOM API çš„é“¾æ¥ CSS Tricks Articleã€‚CSS Typed Object ä¸€æ–‡æä¾›äº†åœ¨ JavaScript ä¸­æ›´ç²¾ç¡®åœ°æ“ä½œå…ƒç´ æ ·å¼å±æ€§çš„ APIã€‚ æ¸²æŸ“æµç¨‹ç°åœ¨æˆ‘ä»¬å¯¹ DOMï¼ŒCSSOM ä»¥åŠæ¸²æŸ“æ ‘éƒ½æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ­éœ²æµè§ˆå™¨å¦‚ä½•å¯¹ä¸€ä¸ªç½‘é¡µè¿›è¡Œæ¸²æŸ“ã€‚å¯¹è¿™ä¸ªæµç¨‹æœ‰ä¸€ä¸ªç®€å•çš„äº†è§£ä¼šè®©ç½‘ç«™å¼€å‘è€…æå‡ç½‘ç«™çš„ç”¨æˆ·ä½“éªŒæœ‰æå¤§çš„ä½œç”¨ã€‚ å½“ä¸€ä¸ªé¡µé¢åŠ è½½æ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šæ‰«æ HTML æ–‡æ¡£å¹¶æ„å»ºå‡º DOM æ ‘ï¼Œç„¶åä¼šå¤„ç† CSS æ–‡ä»¶ï¼ˆæ— è®ºæ˜¯å†…è”è¿˜æ˜¯å¤–éƒ¨çš„æ–‡ä»¶ï¼‰å¹¶æ„å»ºå‡º CSSOM æ ‘ã€‚ å½“ DOM æ ‘å’Œ CSSOM æ ‘æ„å»ºå‡ºæ¥ä¹‹åï¼Œæµè§ˆå™¨ä¼šç»“åˆä¸¤è€…æ¥æ„å»ºå‡ºæ¸²æŸ“æ ‘ã€‚ä¸€æ—¦æ¸²æŸ“æ ‘æ„å»ºå®Œæˆï¼Œæµè§ˆå™¨å°±èƒ½æŠŠæ¯ä¸€ä¸ªå…ƒç´ ç»˜åˆ¶åœ¨å±å¹•ä¸Šã€‚ å¸ƒå±€ï¼ˆlayoutï¼‰é¦–å…ˆï¼Œæµè§ˆå™¨ä¼šè®¡ç®—å‡ºæ¯ä¸€ä¸ªæ¸²æŸ“æ ‘èŠ‚ç‚¹çš„å¸ƒå±€ã€‚è¿™é‡Œæ‰€è¯´çš„å¸ƒå±€åŒ…æ‹¬è¿™ä¸ªèŠ‚ç‚¹çš„åƒç´ å¤§å°ã€ä»¥åŠç»˜åˆ¶ä½ç½®ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä½œâ€œå¸ƒå±€ï¼ˆlayoutï¼‰â€œï¼Œæœ‰äº›æ—¶å€™ä¹Ÿä¼šè¢«ç§°ä½œæ˜¯å›æµï¼ˆreflowï¼‰æˆ–æµè§ˆå™¨å›æµï¼ˆbrowser reflowï¼‰ã€‚å›æµæ˜¯åœ¨ç”¨æˆ·è¿›è¡Œæ»šåŠ¨ã€ç¼©æ”¾æµè§ˆå™¨æˆ–æ“ä½œ DOM å…ƒç´ æ—¶ä¼šè§¦å‘çš„ã€‚è¿™é‡Œåˆ—ä¸¾äº†ä¸€ç³»åˆ—èƒ½å¤Ÿè§¦å‘å›æµçš„äº‹ä»¶å’Œæ“ä½œã€‚ æˆ‘ä»¬åº”å½“é¿å…ç½‘é¡µå‡ºç°è¿‡å¤šçš„å¸ƒå±€å’Œå›æµï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæå…¶æ¶ˆè€—æ€§èƒ½çš„æ“ä½œã€‚Paul Lewis çš„æ–‡ç« è®²è¿°äº†ä¸€äº›å¦‚ä½•é¿å…å¤æ‚å’Œæ¶ˆè€—æ€§èƒ½çš„æ“ä½œã€‚Layout thrashing ä¸€æ–‡ä¹Ÿå¯ä¾›å‚è€ƒã€‚ ç»˜åˆ¶ï¼ˆpaintï¼‰ç›®å‰æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ç³»åˆ—éœ€è¦æ‰“å°åœ¨å±å¹•ä¸Šçš„æ–‡å­—å’Œå›¾æ¡ˆã€‚ç”±äºæ¸²æŸ“æ ‘ä¸Šçš„å…ƒç´ æœ‰å¯èƒ½ä¼šå½¼æ­¤è¦†ç›–ï¼Œç”šè‡³ä¼šæœ‰ä¸€äº› CSS å±æ€§è®©è¿™äº›å…ƒç´ é¢‘ç¹çš„æ›´æ”¹æ ·å¼ã€ä½ç½®ç­‰ï¼ˆä¾‹å¦‚åŠ¨ç”»ï¼‰ï¼Œæµè§ˆå™¨ä¸ºæ­¤åˆ›å»ºäº†å›¾å±‚ï¼ˆlayerï¼‰ã€‚ å›¾å±‚è®©æµè§ˆå™¨èƒ½å¤Ÿé«˜æ•ˆåœ°è¿›è¡Œç»˜åˆ¶ï¼Œæ— è®ºæ˜¯åœ¨ç½‘é¡µä¸Šæ»‘åŠ¨è¿˜æ˜¯ç¼©æ”¾æµè§ˆå™¨çª—å£ã€‚å›¾å±‚ä¹Ÿèƒ½å¸®åŠ©æµè§ˆå™¨æ­£ç¡®åœ°æŠŠå…ƒç´ ä»¥å±‚å çš„æ–¹å¼ï¼ˆå¼€å‘è€…æ‰€éœ€è¦çš„ï¼‰è¿›è¡Œç»˜åˆ¶ã€‚ ç°åœ¨æµè§ˆå™¨èƒ½å¤Ÿç»“åˆå›¾å±‚ï¼Œå°†å…ƒç´ ç»˜åˆ¶åœ¨å±å¹•ä¸Šäº†ã€‚ä½†æ˜¯ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šä¸€æ¬¡æ€§æŠŠæ‰€æœ‰å›¾å±‚ç»˜åˆ¶å‡ºæ¥çš„ï¼Œæ¯ä¸€ä¸ªå›¾å±‚éƒ½æ˜¯æœ‰å…ˆåçš„ç»˜åˆ¶é¡ºåºã€‚ åœ¨æ¯ä¸€å±‚ä¸­ï¼Œæµè§ˆå™¨ä¼šå¡«å……æ¯ä¸€ä¸ªå¯è§å±æ€§çš„åƒç´ ç‚¹ï¼ˆä¾‹å¦‚è¾¹æ¡†ã€èƒŒæ™¯é¢œè‰²ã€é˜´å½±å’Œæ–‡å­—ç­‰ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿè¢«ç§°ä½œæ …æ ¼åŒ–ã€‚ä¸ºäº†æå‡æ€§èƒ½ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ä¸åŒçš„çº¿ç¨‹æ¥è¿›è¡Œæ …æ ¼åŒ–æ“ä½œã€‚ è¿™é‡Œçš„å›¾å±‚å°±åƒæ˜¯ Photoshop è½¯ä»¶ä¸­çš„å›¾å±‚ã€‚ä½ å¯ä»¥åœ¨ Chrome DevTools ä¸­æŸ¥çœ‹æ¯ä¸€ä¸ªä¸åŒçš„å›¾å±‚ã€‚æ‰“å¼€ Chrome DevToolsï¼Œåœ¨ more tools é€‰é¡¹ä¸­é€‰æ‹© Layers æ ‡ç­¾ã€‚èƒ½å¤Ÿåœ¨ Rendering é¢æ¿ä¸Šçœ‹åˆ°æ¯ä¸€ä¸ªå±‚çš„è¾¹ç•Œã€‚ æ …æ ¼åŒ–ä¸€èˆ¬éƒ½æ˜¯ç”± CPU æ¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥é€Ÿåº¦æ…¢ä¸”æˆæœ¬é«˜ï¼Œä½†æ˜¯ç°åœ¨å‡ºç°çš„ GPU æŠ€æœ¯èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦æå‡è¿™ä¸€æ­¥éª¤çš„æ€§èƒ½ã€‚è¿™ç¯‡ intel article æ–‡ç« è¯¦ç»†æ¦‚æ‹¬äº†ç»˜åˆ¶æµç¨‹ï¼ˆå°½é‡å»é˜…è¯»å®ƒï¼ï¼‰ã€‚ä¸ºäº†èƒ½å¤Ÿæ›´åŠ æ·±å…¥åœ°ç†è§£å›¾å±‚ï¼Œä½ éœ€è¦æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚ æ¸²æŸ“å±‚åˆå¹¶ï¼ˆcompositing operationï¼‰åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨å±å¹•ä¸Šç»˜åˆ¶å‡ºä»»ä½•ä¸€ä¸ªå…ƒç´ ã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨æœ‰äº†èƒ½å¤ŸæŒ‰ç…§ä¸€å®šé¡ºåºç»˜åˆ¶åœ¨å±å¹•ä¸Šçš„ä¸€ç³»åˆ—ä¸åŒçš„å›¾å±‚ã€‚åœ¨æ¸²æŸ“å±‚åˆå¹¶è¿™ä¸ªæµç¨‹é‡Œï¼Œè¿™äº›å›¾å±‚å°†è¢«é€å¾€ GPU è¿›è¡Œæœ€ç»ˆçš„ç»˜åˆ¶ã€‚ å°†æ‰€æœ‰çš„å›¾å±‚ä¸€èµ·è¿›è¡Œä¼ è¾“æ˜¾ç„¶æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ¯ä¸€æ¬¡å›æµå’Œé‡ç»˜éƒ½éœ€è¦å…¨éƒ¨å‘é€ä¸€éã€‚æ‰€ä»¥æ¯ä¸€ä¸ªå›¾å±‚éƒ½è¢«æ‹†è§£ä¸ºä¸åŒçš„å—ï¼ˆtilesï¼‰ï¼Œè¿™äº›å—æ‰æ˜¯èƒ½å¤Ÿæœ€ç»ˆè¢«ç»˜åˆ¶åœ¨å±å¹•ä¸Šçš„å•å…ƒã€‚åœ¨ Chrome DevTools çš„ Rendering é¢æ¿ä¸­ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°è¿™äº›å—ã€‚ ä¸Šé¢ç”»å‡ºäº†ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰æ¸²æŸ“æµç¨‹ï¼Œä¹Ÿè¢«ç§°ä½œ critical rendering path ã€‚ Mariko Kosaka å†™è¿‡ä¸€ç¯‡æ–‡ç« æ¥è¯¦ç»†è®²è¿°è¿™ä¸€æµç¨‹ä¸­çš„æ¯ä¸€ä¸ªæ¦‚å¿µï¼ˆæåŠ›æ¨èï¼‰ æµè§ˆå™¨å¼•æ“DOM æ ‘ã€CSSOM æ ‘ä»¥åŠæ§åˆ¶æ•´ä¸ªæ¸²æŸ“çš„é€»è¾‘éƒ½æ˜¯åœ¨ä¸€ä¸ªè¢«å«åšæµè§ˆå™¨å†…ç½®çš„æµè§ˆå™¨å¼•æ“ï¼ˆBrowser Engine)ï¼ˆä¹Ÿè¢«ç§°ä½œæ˜¯æ¸²æŸ“å¼•æ“æˆ–å¸ƒå±€å¼•æ“ï¼‰ã€‚è¿™ä¸ªæµè§ˆå™¨å¼•æ“åŒ…å«äº†æ‰€æœ‰å°† HTML æ–‡æ¡£æ¸²æŸ“æˆä¸ºå±å¹•ä¸Šçš„åƒç´ ç‚¹æ‰€å¿…é¡»çš„å…ƒç´ å’Œé€»è¾‘ã€‚ ä½ å¬è¯´è¿‡ WebKit å—ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæµè§ˆå™¨å¼•æ“ã€‚WebKit æ˜¯åœ¨è‹¹æœçš„ Safari æµè§ˆå™¨ä¸­ï¼Œä¹Ÿæ˜¯ä¹‹å‰è°·æ­Œ Chrome æµè§ˆå™¨é»˜è®¤çš„æ¸²æŸ“å¼•æ“ã€‚ç°åœ¨ Chromium é¡¹ç›®å·²ç»å¼€å§‹ç”¨ Blink ä½œä¸º Chrome æµè§ˆå™¨é»˜è®¤çš„å¼•æ“ã€‚è¿™æ˜¯ä¸€ç³»åˆ—ä¸åŒçš„æµè§ˆå™¨å¯¹åº”çš„å¼•æ“ã€‚ æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ä¼—æ‰€å‘¨çŸ¥ JavaScript æ˜¯ä¸€ç§ç¬¦åˆ ECMAScript æ ‡å‡†çš„è¯­è¨€ï¼Œäº‹å®ä¸Šç”±äº JavaScript å·²ç»è¢«æ³¨å†Œä¸ºå•†æ ‡ï¼Œæˆ‘ä»¬ç°åœ¨éƒ½ç§°å…¶ä¸º ECMAScriptã€‚æ‰€ä»¥ï¼Œä»»ä½•ä¸€ç§ JavaScript å¼•æ“ï¼ˆåŒ…æ‹¬ V8ï¼ŒChakraï¼ŒSpiderMonkeyï¼‰éƒ½éœ€è¦éµå®ˆè¿™ä¸€æ ‡å‡†ã€‚ è¿™ä¸€æ ‡å‡†è®©æ‰€æœ‰çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼ˆæµè§ˆå™¨ã€Nodeã€Denoç­‰ï¼‰ä¸€è‡´çš„ä½“éªŒã€‚è¿™è®© JavaScript èƒ½å¤Ÿåœ¨å¤šå¹³å°è¿›è¡Œç»Ÿä¸€çš„åº”ç”¨å¼€å‘ã€‚ ç„¶è€Œæµè§ˆå™¨æ¸²æŸ“é¡µé¢å´å¾ˆéš¾æç°è¿™æ ·çš„ä¸€è‡´æ€§ï¼Œå› ä¸º HTMLã€CSS å’Œ JavaScriptï¼Œè¿™äº›è¯­è¨€éƒ½æœ‰è‡ªå·±ç‹¬æœ‰çš„æ ‡å‡†ã€‚æ‰€ä»¥ Chrome å’Œ Safari æµè§ˆå™¨åœ¨æ¸²æŸ“æµç¨‹ä¸Šå°±æœ‰æ‰€ä¸åŒã€‚å› æ­¤æˆ‘ä»¬å¾ˆéš¾å»é¢„æµ‹ä¸åŒæµè§ˆå™¨èƒŒåæ‰€æ”¯æŒçš„æ¸²æŸ“æµç¨‹ã€‚ä½†æ˜¯ HTML5 è§„èŒƒå¯¹ç†è®ºä¸Šå¦‚ä½•æ¸²æŸ“åšå‡ºäº†ä¸€äº›åŠªåŠ›ï¼Œä½†æ˜¯æ˜¯å¦éµå¾ªè¿™ä¸€è§„èŒƒä¸åŒçš„æµè§ˆå™¨å‚å®¶ä¹Ÿå„æœ‰ä¸åŒã€‚ ä¸ç®¡ä¸Šé¢æ‰€æåˆ°çš„ä¸åŒç‚¹ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨åœ¨æ¸²æŸ“è¿‡ç¨‹å…¶å®éµå¾ªçš„è§„åˆ™å¤§ä½“ä¸Šé€šå¸¸æ˜¯ä¸€è‡´çš„ã€‚æˆ‘ä»¬è¿™é‡Œå°±æ¥äº†è§£ä¸€ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹å‘¨æœŸä¸­å…±é€šçš„ä¸€äº›äº‹ä»¶ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸‹é¢å‡†å¤‡äº†ä¸€ä¸ªå°çš„å·¥ç¨‹æ¥æµ‹è¯•ä¸åŒçš„æ¸²æŸ“åœºæ™¯ã€‚ course-one/browser-rendering-test è§£ææ–‡æ¡£è§£ææ˜¯æ‰«æ HTML æ–‡æ¡£å†…å®¹å¹¶æ„å»º DOM æ ‘çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚æ‰€ä»¥è¿™ä¸ªè§£æä¹Ÿè¢«ç§°ä½œæ˜¯ DOM è§£æï¼Œæ‰§è¡Œè§£æçš„ç¨‹åºè¢«ç§°ä½œ DOM è§£æå™¨ã€‚ å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šæä¾› DOMParser Web API æ¥å°† HTML æ–‡æ¡£æ„å»ºæˆ DOM æ ‘ã€‚ä¸€ä¸ª DOMParser ç±»çš„å®ä¾‹ä»£è¡¨ä¸€ä¸ª DOM è§£æå™¨ï¼Œè¿™ä¸ªè§£æå™¨ä½¿ç”¨ parseFromString åŸå‹æ–¹æ³•æ¥å°† HTML æ–‡æœ¬è§£ææˆ DOM æ ‘ç»“æ„ã€‚ å½“æµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚å¹¶è¿”å›äº†ä¸€ä¸ª HTML æ–‡æ¡£æ—¶ï¼Œæµè§ˆå™¨å°±å¯ä»¥å¼€å§‹è§£æè¿™ä¸ªæ–‡æ¡£ã€‚å› æ­¤æµè§ˆå™¨èƒ½å¤Ÿé€æ­¥åœ°æ„å»º DOM æ ‘ï¼Œä¸€æ¬¡æ„å»ºä¸€ä¸ªèŠ‚ç‚¹ã€‚æµè§ˆå™¨æ˜¯ä»ä¸Šåˆ°ä¸‹åœ°æ‰«æ HTML æ–‡æ¡£ã€‚ ä¸Šå›¾å±•ç¤ºäº†åœ¨ Node æœåŠ¡å™¨ä¸Šä»¥ 10kbps çš„é€Ÿåº¦è¯·æ±‚ incremental.html æ–‡ä»¶ã€‚å› ä¸ºè¿™ä¸ªè¯·æ±‚è·å–æ–‡ä»¶çš„è¿‡ç¨‹éœ€è¦å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œæµè§ˆå™¨åŠ è½½è¿™ä¸ªæ–‡ä»¶ä»ä¸€å¼€å§‹çš„ä¸€å°éƒ¨åˆ†ä»£ç å°±èƒ½å¤Ÿä¸æ–­åœ°å¢é‡æ¸²æŸ“å‡ºèŠ‚ç‚¹ã€‚ å¦‚æœä½ åœ¨ Chrome DevTools ä¸­çš„ Performance é¢æ¿ä¸­æŸ¥çœ‹ä¸Šè¿°è¯·æ±‚ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ¯ä¸€æ­¥æµç¨‹çš„æ—¶åºã€‚è¿™äº›äº‹ä»¶éƒ½è¢«ç§°ä½œæ˜¯æ€§èƒ½æŒ‡æ ‡ï¼Œå½“è¿™äº›äº‹ä»¶èƒ½é çš„å¾ˆè¿‘ï¼Œé‚£ä¹ˆè¯´æ˜ç”¨æˆ·ä½“éªŒä¼šå¾ˆå¥½ã€‚ ä½¿ç”¨âŸ³æŒ‰é’®å¯ä»¥å°†æŸä¸€ä¸ªæ€§èƒ½æ¡£æ¡ˆè¿›è¡Œæ•æ‰ã€‚ FP ä»£è¡¨ç€ First Paintï¼Œæ„æ€æ˜¯æµè§ˆå™¨å¼€å§‹ç»˜åˆ¶ã€‚FCP ä»£è¡¨ç€ First Contentful Paintï¼Œæ„æ€æ˜¯æµè§ˆå™¨å¼€å§‹ç»˜åˆ¶ç¬¬ä¸€ä¸ªåƒç´ ç‚¹ã€‚LCP ä»£è¡¨ç€ Largest Contentful Paintï¼Œæ„æ€æ˜¯æµè§ˆå™¨æ¸²æŸ“ä¸€å¤§å—æ–‡æœ¬æˆ–å›¾åƒçš„æ—¶é—´ã€‚ ä½ å¯èƒ½å¬è¿‡ FMPï¼Œä»£è¡¨ç€ First Meaningful Paintï¼Œä¸ LCP æŒ‡æ ‡ç±»ä¼¼ï¼Œä½†æ˜¯å·²ç»è¢« Chrome å¼ƒç”¨äº†ã€‚ L ä»£è¡¨ç€ onload äº‹ä»¶ï¼ˆæµè§ˆå™¨åœ¨ window å¯¹è±¡ä¸Šæ‰€è§¦å‘çš„äº‹ä»¶ï¼‰ã€‚DCL ä»£è¡¨ç€ DOMContentLoaded äº‹ä»¶ï¼ˆåœ¨ document å¯¹è±¡ä¸Šè§¦å‘ä½†æ˜¯ä¼šå†’æ³¡åˆ° window å¯¹è±¡ï¼‰ã€‚å› æ­¤å¯ä»¥ç›‘å¬ window å¯¹è±¡ã€‚è¿™äº›äº‹ä»¶æœ‰ä¸€äº›å¤æ‚ï¼Œæˆ‘ä»¬ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ã€‚ æ¯å½“æµè§ˆå™¨æ‰«æåˆ°äº†å¤–éƒ¨çš„èµ„æºï¼Œæ¯”å¦‚ä¸€äº› æ ‡ç­¾æ ‡ç¤ºçš„è„šæœ¬æ–‡ä»¶ï¼ˆJavaScriptæ–‡ä»¶ï¼‰æˆ– å¼•å…¥çš„æ ·å¼æ–‡ä»¶ï¼Œäº¦æˆ–æ˜¯å›¾ç‰‡å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šå¼€å§‹åœ¨åå°ä¸‹è½½è¿™äº›èµ„æºï¼ˆè€Œä¸æ˜¯ JavaScript æ‰§è¡Œçš„ä¸»çº¿ç¨‹ï¼‰ã€‚ æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯è¦è®°ä½â€”â€”DOMè§£æé€šå¸¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œçš„ã€‚æ‰€ä»¥å½“ JavaScript ä¸»çº¿ç¨‹å¿™æ—¶ï¼ŒDOM è§£æä¼šè¢«æŒ‚èµ·ç›´åˆ°çº¿ç¨‹ç©ºé—²ã€‚ä¸ºä»€ä¹ˆ JavaScript ä¼šé˜»å¡ DOM çš„è§£æï¼Ÿé‚£æ˜¯å› ä¸ºè„šæœ¬å…ƒç´ æ˜¯è§£æé˜»å¡çš„ï¼ˆè„šæœ¬ä¼šå½±å“ DOM æ ‘çš„ç”Ÿæˆï¼‰ï¼Œè€Œæ ·å¼è¡¨ã€å›¾ç‰‡ã€pdfå’Œè§†é¢‘ç­‰é™æ€èµ„æºæ–‡ä»¶åˆ™ä¸ä¼šé˜»å¡ã€‚ é˜»å¡è§£æè„šæœ¬é˜»å¡è§£æè„šæœ¬æŒ‡çš„æ˜¯ä¼šè®© HTML æ–‡æ¡£è§£æé˜»å¡çš„è„šæœ¬æ–‡ä»¶ã€‚å½“æµè§ˆå™¨é‡åˆ° script æ ‡ç­¾æ—¶ï¼Œå¦‚æœæ˜¯åµŒå…¥å¼è„šæœ¬ï¼Œè„šæœ¬ä¼šè¢«ç«‹å³æ‰§è¡Œç„¶åå†ç»§ç»­è§£æ HTML æ–‡æ¡£æ¥æ„å»º DOM æ ‘ã€‚ å¦‚æœé‡åˆ°çš„ script æ ‡ç­¾æ˜¯ä¸€ä¸ªå¼•å…¥çš„å¤–éƒ¨è„šæœ¬æ–‡ä»¶ï¼Œæµè§ˆå™¨ä¼šåœ¨åå°éä¸»çº¿ç¨‹ä¸Šå¼€å§‹ä¸‹è½½è¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œåœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹çš„ä»»åŠ¡ä¹Ÿæ˜¯è¢«æš‚æ—¶æŒ‚èµ·çš„ã€‚åœ¨å¤–éƒ¨è„šæœ¬æ²¡æœ‰ä¸‹è½½å®Œæˆä¹‹å‰ï¼ŒDOM è§£æä¸ä¼šå¼€å§‹ã€‚ ä¸€æ—¦è„šæœ¬æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œæµè§ˆå™¨ä¼šåœ¨é¦–å…ˆä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç„¶åå¼€å§‹ DOM è§£æã€‚æµè§ˆå™¨å†é‡åˆ°ç›¸åŒçš„è„šæœ¬æ ‡ç­¾ï¼Œä¹Ÿä¼šé‡å¤è¿™ä¸€è¿‡ç¨‹ã€‚ä¸ºå•¥è¦è¿™ä¹ˆåšå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæµè§ˆå™¨å°† DOM API æš´éœ²ç»™ JavaScript è¿è¡Œæ—¶ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript è„šæœ¬æ¥æ“æ§ DOM å…ƒç´ ã€‚è¿™ä¹Ÿæ˜¯ React å’Œ Angular è¿™äº›æ¡†æ¶èƒ½å¤ŸåŠ¨æ€æ”¹å˜ç½‘é¡µçš„åŸå› ã€‚ä½†æ˜¯å¦‚æœæµè§ˆå™¨å¹¶è¡Œåœ°è§£æ DOM å’Œæ‰§è¡Œè„šæœ¬ï¼Œå¯èƒ½ä¼šå­˜åœ¨æ¡ä»¶ç«äº‰æ¼æ´ï¼ˆä¸çŸ¥é“åˆ°åº•å“ªä¸ªæœ€ç»ˆä¼šå½±å“ DOM æ ‘çš„ç”Ÿæˆï¼‰ã€‚ ä½†æ˜¯å¾ˆæ˜¾ç„¶ï¼Œåœ¨è„šæœ¬ä¸‹è½½çš„è¿‡ç¨‹ä¸­æš‚åœ DOM çš„è§£æä¹Ÿæ˜¯éå¸¸æ²¡æœ‰å¿…è¦çš„ï¼Œæ‰€ä»¥ HTML5 ä¸º script æ ‡ç­¾æ–°å¢äº† async å±æ€§â€”â€”å½“æµè§ˆå™¨é‡åˆ°äº†å¸¦æœ‰ async å±æ€§çš„ script æ ‡ç­¾ï¼Œä¸ä¼šæš‚åœè§£æè¿‡ç¨‹å¹¶åœ¨åå°ä¸‹è½½è„šæœ¬æ–‡ä»¶ï¼Œä½†æ˜¯å½“æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œè§£æè¿‡ç¨‹ä¼šè¢«æŒ‚èµ·ç›´åˆ°è„šæœ¬è¢«æ‰§è¡Œå®Œã€‚ å¦å¤–ï¼ŒHTML5 è¿˜æä¾›äº† defer å±æ€§ï¼Œæœ‰ç‚¹ç±»ä¼¼ async å±æ€§ï¼Œä¸åŒçš„æ˜¯è¿™ç§è„šæœ¬åœ¨ä¸‹è½½å®Œæˆä¹‹åä¹Ÿä¸ä¼šç«‹å³æ‰§è¡Œã€‚æ‰€æœ‰å¸¦ defer å±æ€§çš„ script æ ‡ç­¾ï¼Œéƒ½ä¼šåœ¨åå°å¹¶è¡Œä¸‹è½½ï¼Œç­‰åˆ° HTML è§£æå®Œæˆï¼ŒDOM æ ‘æ„å»ºå®Œæˆï¼Œè¿™äº›è„šæœ¬æ‰ä¼šè¢«æ‰§è¡Œã€‚ æ‰€æœ‰å…¶ä»–æ­£å¸¸çš„ script æ ‡ç­¾ä»£è¡¨çš„è„šæœ¬ï¼Œéƒ½æ˜¯é˜»å¡è§£æçš„è„šæœ¬ã€‚æ‰€æœ‰ async è„šæœ¬éƒ½æ˜¯ä¸‹è½½æœŸé—´ä¸é˜»å¡è§£æï¼Œä¸‹è½½å®Œæˆåé˜»å¡è§£æã€‚è€Œ defer è„šæœ¬æ˜¯æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šé˜»å¡ DOM è§£æçš„ã€‚ ä¸Šå›¾ä¸­çš„ä¾‹å­ï¼Œæ˜¯ parser-blocking.html æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†30ä¸ªå…ƒç´ ä¹‹åçš„è§£æé˜»å¡è„šæœ¬ã€‚å¦‚æœæˆ‘ä»¬çœ‹ä¸€çœ¼ Performance é¢æ¿ï¼Œå…¶ä¸­ FP å’Œ FCP éƒ½æ˜¯åœ¨ HTML å‡†å¤‡å®Œæˆå°½å¯èƒ½æ—©çš„å¼€å§‹æ„å»º DOM æ ‘ã€‚LCP åœ¨5ç§’ä¹‹åå¼€å§‹ï¼Œè¿™æ˜¯å› ä¸ºè„šæœ¬é˜»å¡äº† DOM è§£æï¼ˆä¸‹è½½æ—¶é—´ï¼‰ï¼Œåªæœ‰30ä¸ªæ–‡æœ¬å…ƒç´ è¢«ç»˜åˆ¶å‡ºæ¥ã€‚ä¸€æ—¦è„šæœ¬ä¸‹è½½å’Œæ‰§è¡Œå®Œæˆï¼ŒDOM è§£æä¾¿ä¼šé‡æ–°å¼€å§‹ã€‚ è§£æé˜»å¡ä¹Ÿè¢«ç§°ä¸ºæ¸²æŸ“é˜»å¡ï¼Œå› ä¸ºæ­¤æ—¶æ¸²æŸ“ä¹Ÿä¸ä¼šè¿›è¡Œï¼ˆæ¸²æŸ“éœ€è¦ä¾èµ–æ¸²æŸ“æ ‘ï¼Œè€Œæ¸²æŸ“æ ‘ä¾èµ– DOM æ ‘ï¼‰ã€‚ä½†æ˜¯ä¸¤è€…è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ã€‚ Some browsers may incorporate a speculative parsing strategy where the HTML parsing (but not the DOM tree construction) is offloaded to a separate thread so that browser can read elements such as link(CSS), script, img, etc. and download these resources eagerly. This is quite helpful if you have three script elements one after the other, but the browser wonâ€™t be able to start the download of the second script until the first script is downloaded as the DOM parser couldnâ€™t read the second script element. We can fix this easily by using async tag but asynchronous scripts are not guaranteed to execute in order. The reason it is called speculative parsing because the browser is making a speculation that a particular resource is expected to load in the future, so better load it now in the background. However, if some JavaScript manipulates DOM and removes/hides the element with an external resource, then speculation fails and these files were loaded for nothing. Tough. ğŸ’¡ Every browser has a mind of its own, so when or if speculative parsing will happen is not guaranteed. However, you can ask the browser to load some resources ahead of time using the element. æ¸²æŸ“é˜»å¡ CSSæˆ‘ä»¬äº†è§£äº†ï¼Œä»»ä½•é™¤äº†è§£æé˜»å¡è„šæœ¬ä¹‹å¤–çš„å¤–éƒ¨èµ„æºè¯·æ±‚éƒ½æ˜¯ä¸ä¼šé˜»å¡ DOM è§£æå’Œæ ‘æ„å»ºçš„ã€‚æ‰€ä»¥ CSS å¹¶ä¸ä¼šé˜»å¡ DOM è§£æï¼Œç­‰ä¸€ä¸‹ï¼Œå…¶å®æ˜¯ä¼šé˜»å¡çš„ã€‚ä¸ºäº†ç†è§£è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ¸²æŸ“çš„è¿‡ç¨‹ã€‚ DOM å’Œ CSSOM æ ‘çš„æ„å»ºéƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œè€Œä¸”è¿™äº›æ ‘æ—¶å¹¶è¡Œè¿›è¡Œæ„å»ºçš„ã€‚å®ƒä»¬ä¸€èµ·æ„å»ºå‡ºäº†æ¸²æŸ“æ ‘ï¼Œç”¨æ¥ç»˜åˆ¶å…ƒç´ ã€‚è¿™ä¸€è¿‡ç¨‹å…¶å®ä¹Ÿæ˜¯è·Ÿéšç€ DOM æ ‘çš„å¢é‡æ„å»ºè¿›è¡Œçš„ã€‚ ä¸Šé¢è°ˆåˆ° DOM æ ‘çš„ç”Ÿæˆæ—¶å¢é‡ç”Ÿæˆçš„ï¼ˆå¹¶éä¸€ä¸‹å­ç”Ÿæˆï¼‰ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨ä¸€è¾¹è§£æ HTML æ–‡ä»¶ï¼Œä¸€éåœ¨ DOM æ ‘ä¸Šå¢åŠ èŠ‚ç‚¹ã€‚ä½†æ˜¯ CSSOM å¯ä¸æ˜¯è¿™æ ·â€”â€”CSSOM æ ‘çš„æ„å»ºå¹¶ä¸æ˜¯å¢é‡æ„å»ºçš„ã€‚ å½“æµè§ˆå™¨é‡åˆ° style åµŒå…¥ä»£ç å—æ—¶ï¼Œå®ƒä¼šæ‰«ææ‰€æœ‰çš„ CSS ä»£ç ï¼Œå¹¶ä¾æ®ç›¸åº”çš„è§„åˆ™æ›´æ–° CSSOM æ ‘ã€‚ç„¶åï¼Œå®ƒä¼šç»§ç»­è§£æ HTML æ–‡æ¡£ï¼Œå†…è”çš„æ ·å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ ä½†æ˜¯å¤–éƒ¨çš„æ ·å¼è¡¨å°±æœ‰æ‰€ä¸åŒäº†ã€‚æˆ‘ä»¬çŸ¥é“å¤–éƒ¨æ ·å¼è¡¨ä¸æ˜¯è§£æé˜»å¡èµ„æºï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿåœ¨åå°ä¸ DOM è§£æå¹¶è¡Œåœ°è¿›è¡Œä¸‹è½½ã€‚ä½†æ˜¯ä¸è„šæœ¬ä¸åŒï¼Œæµè§ˆå™¨ä¸ä¼šåœ¨å¤–éƒ¨æ ·å¼è¡¨ä¸‹è½½å®Œåç¬¬ä¸€æ—¶é—´è¿›è¡Œè§£æï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨æ— æ³•ä¸€è¾¹æ‰«æ CSS æ–‡ä»¶ä¸€è¾¹æ„å»º CSSOM æ ‘ã€‚åŸå› å¾ˆç®€å•ï¼šCSS çš„è§„åˆ™è¡¨æ˜ï¼Œè¶Šåé¢çš„æ ·å¼å±æ€§ï¼Œè¶Šæœ‰å¯èƒ½è¦†ç›–å‰é¢çš„å±æ€§ã€‚ä¸€ä½†æµè§ˆå™¨å¢é‡åœ°ç”Ÿæˆ CSSOM æ ‘ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿå¤šä¸ªæ¸²æŸ“æ ‘ï¼Œè¿™ä¼šé€ æˆå¾ˆå·®çš„ä½“éªŒã€‚ æ‰€ä»¥æµè§ˆå™¨ä¸ä¼šå¢é‡åœ°ç”Ÿæˆ CSSOM æ ‘ï¼Œè€Œæ˜¯ CSS æ–‡ä»¶å…¨éƒ¨æ‰«æå®Œåæ‰ç”Ÿæˆå®Œæ•´çš„ CSSOMã€‚ä¸€æ—¦ CSSOM æ ‘ç”Ÿæˆåï¼Œæ¸²æŸ“æ ‘æ‰ä¼šæ›´æ–°å¹¶ç»˜åˆ¶ã€‚ CSS æ˜¯æ¸²æŸ“é˜»å¡èµ„æºã€‚ä¸€æ—¦æµè§ˆå™¨å»è¯·æ±‚ä¸€ä¸ªå¤–éƒ¨çš„æ ·å¼è¡¨æ–‡ä»¶ï¼Œæ¸²æŸ“æ ‘çš„æ„å»ºå°±ä¼šæš‚åœï¼ˆå› ä¸ºæ¸²æŸ“æ ‘ä¾èµ– CSSOMæ ‘ï¼‰ï¼Œå› æ­¤ CRPï¼ˆCritical Rendering Pathï¼‰ä¹Ÿä¼šé˜»å¡ã€‚ä½†æ˜¯ï¼ŒDOM æ ‘è¿˜æ˜¯ä¼šè¿›è¡Œè§£æã€‚ A browser could have used an older state of the CSSOM tree to generate Render Tree as HTML is getting parsed to render things on the screen incrementally. But this has a huge downside. In this case, once the stylesheet is downloaded and parsed, and CSSOM is updated, Render Tree will be updated and rendered on the screen. Now the Render Tree nodes generated with older CSSOM will be repainted with new styles and it could also lead to Flash of Unstyled Content (FOUC) which is is very bad for UX. Hence browsers will wait until the stylesheet is loaded and parsed. Once the stylesheet is parsed and CSSOM is updated, the Render Tree is updated, and CRP is unblocked which leads to the paint of Render Tree on the screen. Due to this reason, it is recommended to load all external stylesheets as early as possible, possibly in the head section. Letâ€™s imagine a scenario where the browser has started parsing HTML and it encounters an external stylesheet file. It will start the download of the file in the background, block the CRP, and continue with the DOM parsing. But then it encounters a script tag. So it will start the download of the external script file and block the DOM parsing. Now the browser is sitting idle waiting for the stylesheet and script file to download completely. But this time, the external script file has been downloaded completely while the stylesheet is still being downloaded in the background. Should the browser execute the script file? Is there any harm doing that? As we know, CSSOM provides a high-level JavaScript API to interact with the styles of the DOM elements. For example, you can read or update the background color of a DOM element using elem.style.backgroundColor property. The style object associated the elem element exposes the CSSOM API and there are many other APIs to do the same (read this css-tricks article). As a stylesheet is being downloaded background, JavaScript can still execute as the main thread is not being blocked by the loading stylesheet. If our JavaScript program accesses CSS properties of a DOM element (through CSSOM API), we will get a proper value (as per the current state of CSSOM). But once the stylesheet is downloaded and parsed, which leads to CSSOM update, our JavaScript now has a bad CSS value of the element since the new CSSOM update could have changed the CSS properties of that DOM element. Due to this reason, itâ€™s not safe to execute JavaScript while the stylesheet is being downloaded. As per the HTML5 specification, the browser may download a script file but it will not execute it unless all previous stylesheets are parsed. When a stylesheet blocks the execution of a script, it is called a script-blocking stylesheet or a script-blocking CSS. In the above example, the [script-blocking.html](https://github.com/course-one/browser-rendering-test/blob/master/html/script-blocking.html) contains a link tag (for an external stylesheet) followed by a script tag (for an external JavaScript). Here the script gets downloaded really fast without any delay but the stylesheet takes 6 seconds to download. Hence, even though the script is downloaded completely as we can see from the Network panel, it wasnâ€™t executed by the browser immediately. Only after the stylesheet is loaded, we see the Hello World messaged logged by the script. ğŸ’¡ Like async or defer attribute makes script element non-parser-blocking, an external stylesheet can also be marked as non-render-blocking using the media attribute. Using the media attribute value, the browser can make a smart decision when to load the stylesheet. Documentâ€™s DOMContentLoaded EventThe [DOMContentLoaded](https://developer.mozilla.org/en-US/docs/Web/API/Document/DOMContentLoaded_event) (DCL) event marks a point in time when the browser has constructed a complete DOM tree from all the available HTML. But there are a lot of factors involved that can change when the DCL event is fired. 123document.addEventListener( &apos;DOMContentLoaded&apos;, function(e) &#123; console.log( &apos;DOM is fully parsed!&apos; );&#125; ); If our HTML doesnâ€™t contain any scripts, DOM parsing wonâ€™t get blocked and DCL will fire as quickly as the browser can parse the entire HTML. If we have parser-blocking scripts, then DCL has to wait until all parser-blocking scripts are downloaded and executed. Things get a little complicated when stylesheets are thrown into the picture. Even though you have no external scripts, DCL will wait until all stylesheets are loaded. Since DCL marks a point in time when the entire DOM tree is ready, but DOM wonâ€™t be safe to access (for the style information) unless CSSOM is also fully constructed. Hence most browsers wait until all external stylesheets are loaded and parsed. Script-blocking stylesheet will obviously delay the DCL. In this case, since the script is waiting for the stylesheet to load, the DOM tree is not getting constructed. DCL is one of the website performance metrics. We should optimize the DCL to be as small as possible (the time at which it occurs). One of the best practices is to use defer and async tag for script element whenever possible so that browser can perform other things while scripts are being downloaded in the background. Second, we should optimize the script-blocking and render-blocking stylesheets. Windowâ€™s load eventAs we know JavaScript can block DOM tree generation but thatâ€™s not the case with external stylesheets and files such as images, videos, etc. The DOMContentLoaded event marks a point in time when the DOM tree is fully constructed and it is safe to access, the window.onload event marks a point in time when external stylesheets and files are downloaded and our web application (complete) has finished downloading. 123window.addEventListener( &apos;load&apos;, function(e) &#123; console.log( &apos;Page is fully loaded!&apos; );&#125; ) In the above example, the [rendering.html](https://github.com/course-one/browser-rendering-test/blob/master/html/rendering.html) file has an external stylesheet in the head that takes around 5 seconds to download. Since itâ€™s in the head section, the FP and FCP occurs after 5 seconds since the stylesheet will block the rendering of any content below it (as it blocks CRP). After that, we have an img element that loads an image that takes around 10 seconds to download. So the browser will keep downloading this file in the background and move on with the DOM parsing and rendering (as an external image resource is neither parser-blocking nor render-blocking). Next, we have three external JavaScript files and they take 3s, 6s, and 9s to download respectively and most importantly, they are not async. This means the total load time should be close to 18 seconds as the subsequent script wonâ€™t start downloading before the previous one is executed. However, looking at the DCL event, our browser seemed to have used the speculative strategy to eagerly download the script files so the total time to load is close to 9 seconds. Since the last file to download that can affect the DCL is the last script file with the load time of 9 seconds (since stylesheet has already been downloaded in 5 seconds), the DCL event occurs around 9.1 seconds. We also had another external resource which was the image file and it kept loading in the background. Once it was fully downloaded (which takes 10 seconds), the windowâ€™s load event was fired after 10.2 seconds which marks that the webpage (application) is fully loaded.","categories":[{"name":"Translate","slug":"Translate","permalink":"http://keefe.wang/categories/Translate/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Browser","slug":"Browser","permalink":"http://keefe.wang/tags/Browser/"}]},{"title":"ä½¿ç”¨ vue-test-utils è¿›è¡Œæµ‹è¯•","slug":"2020-07-29-use-vue-test-utils-to-test-components","date":"2020-07-29T14:23:00.000Z","updated":"2021-01-20T01:47:47.848Z","comments":true,"path":"2020/07/29/2020-07-29-use-vue-test-utils-to-test-components.html","link":"","permalink":"http://keefe.wang/2020/07/29/2020-07-29-use-vue-test-utils-to-test-components.html","excerpt":"","text":"æ’ä»¶å®‰è£…æˆ‘ä»¬ä½¿ç”¨ Vue CLI è„šæ‰‹æ¶è¿›è¡Œé¡¹ç›®çš„åˆ›å»ºï¼ŒæŒ‰ç…§æç¤ºä¸€æ­¥æ­¥è¿›è¡Œé¡¹ç›®é…ç½®ï¼Œå°½é‡éƒ½é€‰æ‹©æ— ä»»ä½•é…ç½®ï¼Œå°¤å…¶æ˜¯è‡ªå¸¦çš„æµ‹è¯•æ’ä»¶ï¼š 1vue create vue-test æ–°å»ºå¥½é¡¹ç›®ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª test ç›®å½•æ¥æ”¾ç½®æˆ‘ä»¬çš„æµ‹è¯•æ–‡ä»¶ã€‚ ç”±äºæˆ‘ä»¬æ˜¯åœ¨ Vue é¡¹ç›®ä¸­è¿›è¡Œæµ‹è¯•ï¼Œé‡‡ç”¨çš„æ˜¯ vue-test-utils è¿™ä¸ªæµ‹è¯•å·¥å…·æ’ä»¶è¿›è¡Œæµ‹è¯•ï¼Œæ‰€ä»¥ä¸‹é¢å‡ ç±» npm æ’ä»¶æ˜¯å¿…é¡»è¦å®‰è£…çš„ï¼š jest ç›¸å…³ jest æ˜¯ vue-test-utils å®˜æ–¹æ¨èçš„æµ‹è¯•è¿è¡Œå™¨ï¼Œæ‰€ä»¥è¿™ä¸ªæ’ä»¶æ˜¯å¿…è¦çš„ï¼›è¦ä½¿ç”¨ jest æ¥å¤„ç† *.vue æ–‡ä»¶ï¼Œéœ€è¦å®‰è£…å’Œé…ç½® vue-jest æ’ä»¶ã€‚ 1npm i --save-dev jest vue-jest 12345678910111213// åœ¨ package.json ä¸­åšå¦‚ä¸‹é…ç½®&#123; \"scripts\": &#123; \"test\": \"jest\" &#125;, \"jest\": &#123; \"moduleFileExtensions\": [ \"js\", \"json\", \"vue\" ] &#125;&#125; babel ç›¸å…³ æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¸å¯é¿å…åœ°å¸Œæœ›åœ¨ä»£ç ä¸­ä½¿ç”¨ ES2015 çš„ç‰¹æ€§ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å®‰è£… babel ç›¸å…³çš„æ’ä»¶ï¼Œå…¶ä¸­ babel-jest æ˜¯æµ‹è¯•ä¸­çš„ ES2015 ç‰¹æ€§ç¼–è¯‘çš„æ’ä»¶ 1npm install --save-dev babel-core babel-preset-env babel-jest 12345678910111213141516171819// åœ¨ package.json ä¸­åšå¦‚ä¸‹é…ç½®&#123; \"jest\": &#123; \"transform\": &#123; \".*\\\\.(vue)$\": \"vue-jest\", \"^.+\\\\.js$\": \"&lt;rootDir&gt;/node_modules/babel-jest\" &#125; &#125;&#125;// åœ¨ .babelrc æˆ– babel.config.js æ–‡ä»¶ä¸­åšå¦‚ä¸‹é…ç½®&#123; \"presets\": [[\"env\", &#123; \"modules\": false &#125;]], \"env\": &#123; \"test\": &#123; \"presets\": [[\"env\", &#123; \"targets\": &#123; \"node\": \"current\" &#125; &#125;]] &#125; &#125;&#125; vue-test-utils ä¾èµ–æµè§ˆå™¨ç¯å¢ƒï¼Œæˆ‘ä»¬ä½¿ç”¨ JSDOM åœ¨ Node è™šæ‹Ÿæµè§ˆå™¨ç¯å¢ƒè¿è¡Œæµ‹è¯•ã€‚jest ä¸­æœ‰è‡ªåŠ¨è®¾ç½® JSDOMï¼Œå¦‚æœæ²¡æœ‰ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹æ’ä»¶ 1npm install --save-dev jsdom jsdom-global è‡³æ­¤ï¼Œæ‰€ä»¥å‰æœŸçš„æ’ä»¶å®‰è£…å’Œé…ç½®å·¥ä½œå°±å®Œæˆäº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬åœ¨ test ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª *.test.js æ–‡ä»¶ï¼Œå¹¶åœ¨ terminal ä¸­è¿è¡Œ npm run test å‘½ä»¤ï¼Œå°±å¯ä»¥è¿›è¡Œ vue ç»„ä»¶çš„æµ‹è¯•äº†ã€‚","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"http://keefe.wang/tags/Vue/"},{"name":"Test","slug":"Test","permalink":"http://keefe.wang/tags/Test/"}]},{"title":"Vue é«˜çº§ç”¨æ³•ä¸ç²¾ç²¹","slug":"2020-07-23-advanced-function-in-vue","date":"2020-07-23T11:32:00.000Z","updated":"2021-01-20T01:47:37.904Z","comments":true,"path":"2020/07/23/2020-07-23-advanced-function-in-vue.html","link":"","permalink":"http://keefe.wang/2020/07/23/2020-07-23-advanced-function-in-vue.html","excerpt":"","text":"å¤ç”¨ä¸ç»„åˆMixinå¤šé‡ç»§æ‰¿å¤§è‡´æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§å°±æ˜¯æŒ‰ç…§é¡ºåºå°†å„ä¸ªçˆ¶ç±»è¿›è¡Œç»§æ‰¿ï¼Œä¾‹å¦‚å½“ä½ éœ€è¦ä¸€ä¸ªç±»ç»§æ‰¿ Aã€Bã€Cå’ŒDçš„ç‰¹æ€§ï¼Œé‚£ä¹ˆå¯ä»¥é‡‡ç”¨ A â‡’ B â‡’ C â‡’ D è¿™æ ·ä¸€ä¸ªç»§æ‰¿é“¾å»ç»§æ‰¿ï¼Œè¿™ç§ç»§æ‰¿æ–¹å¼çš„å¥½å¤„æ˜¯çŸ¥é“æ¯ä¸€æ­¥ç»§æ‰¿çš„çˆ¶å­å…³ç³»ã€‚è€Œå¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“è¿™äº›ï¼Œåªè¦åƒ duck typing ä¸€æ ·æ‹¥æœ‰è¿™äº›çˆ¶ç±»çš„ç‰¹æ€§å³å¯ï¼ŒMixin æ··å…¥æœºåˆ¶å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Vue ä¸­ä¹Ÿæä¾›ç»™äº†è¿™æ ·çš„æœºåˆ¶ï¼š 1234567891011var myMixin = &#123; methods: &#123; hello: function () &#123; console.log('hello from mixin!') &#125; &#125;&#125;var Component = Vue.extend(&#123; mixins: [myMixin]&#125;); æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œåƒ methodsã€computed è¿™ç§æœ¬èº«æ˜¯å¯¹è±¡ç±»å‹çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œ mergeï¼Œæ‰€éµå¾ªçš„æ··åˆè§„åˆ™å¦‚ä¸‹ï¼š æ•°æ®å¯¹è±¡åœ¨å†…éƒ¨ä¼šè¿›è¡Œé€’å½’åˆå¹¶ï¼Œå¹¶åœ¨å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶æ•°æ®ä¼˜å…ˆ åŒåé’©å­å‡½æ•°å°†åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½å°†åœ¨æ­¤é’©å­ç”Ÿæ•ˆæ—¶æ‰§è¡Œ æ··å…¥ä¹Ÿæ”¯æŒå…¨å±€æ³¨å…¥ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼è¿™ä¼šå½±å“åˆ°ä¹‹åçš„æ¯ä¸€ä¸ª Vue ç»„ä»¶å®ä¾‹ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰ï¼š 12345678Vue.mixin(&#123; created: function () &#123; var myOption = this.$options.myOption if (myOption) &#123; console.log(myOption) &#125; &#125;&#125;) è‡ªå®šä¹‰æŒ‡ä»¤é™¤äº† v-model å’Œ v-show ç­‰è‡ªå¸¦çš„æŒ‡ä»¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æŒ‡ä»¤ã€‚è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥å…¨å±€æ³¨å†Œï¼Œä¹Ÿå¯ä»¥åœ¨ç»„ä»¶å†…è¿›è¡Œå±€éƒ¨æ³¨å†Œï¼ˆæŒ‡ä»¤åœ¨æ ‡ç­¾ä¸­å¿…é¡»è¦ä»¥ v- å¼€å¤´ï¼‰ï¼š 12345Vue.directive('focus', &#123; inserted: function (el) &#123; el.focus() &#125;&#125;) 1234567directives: &#123; focus: &#123; inserted: function (el) &#123; el.focus() &#125; &#125;&#125; ä¸Šé¢ä»£ç ä¸­å‡ºç°çš„ inserted æ˜¯æŒ‡ä»¤æ‰€åœ¨çš„é’©å­ï¼ŒæŒ‡ä»¤çš„é’©å­æœ‰ä»¥ä¸‹äº”ç§ï¼š bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚ insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚ updateï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚ componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚ unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚ ä¸Šè¿°çš„é’©å­å‡½æ•°çš„å‚æ•°æœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ elã€bindingã€vnodeã€oldVnodeï¼Œå…¶ä¸­ï¼ŒæŒ‡ä»¤çš„å€¼éœ€è¦ä» binding.value ä¸­è·å–ã€‚ è‡ªå®šä¹‰æŒ‡ä»¤è¿˜å¯ä»¥æ·»åŠ åŠ¨æ€å‚æ•°ï¼Œv-someDirection:[arg]ï¼Œä½¿ç”¨ binding.arg æ¥è·å–åŠ¨æ€çš„æŒ‡ä»¤ï¼š 123&lt;div id=\"dynamicexample\"&gt; &lt;p v-pin:[direction]=\"200\"&gt;I am pinned onto the page at 200px to the left.&lt;/p&gt;&lt;/div&gt; 12345678910Vue.directive('pin', &#123; bind: function (el, binding, vnode) &#123; el.style.position = 'fixed' var s = (binding.arg == 'left' ? 'left' : 'top') el.style[s] = binding.value + 'px' &#125;&#125;)// å›è°ƒå‡½æ•°å¯ä»¥ç®€å†™ï¼Œåªæ”¯æŒ bind å’Œ update ä¸¤ä¸ªé’©å­åŒæ—¶è§¦å‘æ—¶Vue.directive('pin', function (el, binding, vnode) &#123;&#125;); è‡ªå®šä¹‰æŒ‡ä»¤ä¹Ÿæ”¯æŒä¼ å…¥å¯¹è±¡å­—é¢é‡ &lt;div v-demo=&quot;{ color: &#39;white&#39;, text: &#39;hello!&#39; }&quot;&gt;&lt;/div&gt; æ¸²æŸ“å‡½æ•°å¦‚æœæƒ³è¦ä½¿ç”¨çº¯ js çš„æ–¹å¼æ¥å®ç°è§†å›¾ï¼Œå¯ä»¥ä½¿ç”¨ Vue æä¾›çš„ render å‡½æ•°å±æ€§æ¥è¿›è¡Œæ¸²æŸ“ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1234567891011121314Vue.component('anchored-heading', &#123; render: function (createElement) &#123; return createElement( 'h' + this.level, // æ ‡ç­¾åç§° this.$slots.default // å­èŠ‚ç‚¹æ•°ç»„ ) &#125;, props: &#123; level: &#123; type: Number, required: true &#125; &#125;&#125;) createElement è¿™ä¸ªå‡½æ•°å¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªè™šæ‹Ÿ Domï¼Œå®ƒæ‰€åŒ…å«çš„ä¿¡æ¯ä¼šå‘Šè¯‰ Vue é¡µé¢ä¸Šéœ€è¦æ¸²æŸ“ä»€ä¹ˆæ ·çš„èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬åŠå…¶å­èŠ‚ç‚¹çš„æè¿°ä¿¡æ¯ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸º Vnodeã€‚ 123456789101112131415161718192021// @returns &#123;VNode&#125;createElement( // å¿…å¡«é¡¹ä¸€ä¸ª HTML æ ‡ç­¾åã€ç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œæˆ–è€… resolve äº†ä¸Šè¿°ä»»ä½•ä¸€ç§çš„ä¸€ä¸ª async å‡½æ•° // &#123;String | Object | Function&#125; 'div', // ä¸€ä¸ªä¸æ¨¡æ¿ä¸­ attribute å¯¹åº”çš„**æ•°æ®å¯¹è±¡**ï¼Œå¯é€‰é¡¹ï¼Œ&#123;Object&#125;ã€‚ &#123;&#125;, // å­çº§è™šæ‹ŸèŠ‚ç‚¹ (VNodes)ï¼Œç”± `createElement()` æ„å»ºè€Œæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ¥ç”Ÿæˆâ€œæ–‡æœ¬è™šæ‹ŸèŠ‚ç‚¹â€ï¼Œå¯é€‰ã€‚ // &#123;String | Array&#125; [ 'å…ˆå†™ä¸€äº›æ–‡å­—', createElement('h1', 'ä¸€åˆ™å¤´æ¡'), createElement(MyComponent, &#123; props: &#123; someProp: 'foobar' &#125; &#125;) ]) ä¸Šé¢è®²åˆ°çš„æ•°æ®å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„ä¸€äº›å±æ€§æè¿°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&#123; // ä¸ `v-bind:class` çš„ API ç›¸åŒï¼Œ // æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ã€å¯¹è±¡æˆ–å­—ç¬¦ä¸²å’Œå¯¹è±¡ç»„æˆçš„æ•°ç»„ 'class': &#123; foo: true, bar: false &#125;, // ä¸ `v-bind:style` çš„ API ç›¸åŒï¼Œ // æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ã€å¯¹è±¡ï¼Œæˆ–å¯¹è±¡ç»„æˆçš„æ•°ç»„ style: &#123; color: 'red', fontSize: '14px' &#125;, // æ™®é€šçš„ HTML attribute attrs: &#123; id: 'foo' &#125;, // ç»„ä»¶ prop props: &#123; myProp: 'bar' &#125;, // DOM property domProps: &#123; innerHTML: 'baz' &#125;, // äº‹ä»¶ç›‘å¬å™¨åœ¨ `on` å†…ï¼Œ // ä½†ä¸å†æ”¯æŒå¦‚ `v-on:keyup.enter` è¿™æ ·çš„ä¿®é¥°å™¨ã€‚ // éœ€è¦åœ¨å¤„ç†å‡½æ•°ä¸­æ‰‹åŠ¨æ£€æŸ¥ keyCodeã€‚ on: &#123; click: this.clickHandler &#125;, // ä»…ç”¨äºç»„ä»¶ï¼Œç”¨äºç›‘å¬åŸç”Ÿäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»„ä»¶å†…éƒ¨ä½¿ç”¨ // `vm.$emit` è§¦å‘çš„äº‹ä»¶ã€‚ nativeOn: &#123; click: this.nativeClickHandler &#125;, // è‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œä½ æ— æ³•å¯¹ `binding` ä¸­çš„ `oldValue` // èµ‹å€¼ï¼Œå› ä¸º Vue å·²ç»è‡ªåŠ¨ä¸ºä½ è¿›è¡Œäº†åŒæ­¥ã€‚ directives: [ &#123; name: 'my-custom-directive', value: '2', expression: '1 + 1', arg: 'foo', modifiers: &#123; bar: true &#125; &#125; ], // ä½œç”¨åŸŸæ’æ§½çš„æ ¼å¼ä¸º // &#123; name: props =&gt; VNode | Array&lt;VNode&gt; &#125; scopedSlots: &#123; default: props =&gt; createElement('span', props.text) &#125;, // å¦‚æœç»„ä»¶æ˜¯å…¶å®ƒç»„ä»¶çš„å­ç»„ä»¶ï¼Œéœ€ä¸ºæ’æ§½æŒ‡å®šåç§° slot: 'name-of-slot', // å…¶å®ƒç‰¹æ®Šé¡¶å±‚ property key: 'myKey', ref: 'myRef', // å¦‚æœä½ åœ¨æ¸²æŸ“å‡½æ•°ä¸­ç»™å¤šä¸ªå…ƒç´ éƒ½åº”ç”¨äº†ç›¸åŒçš„ ref åï¼Œ // é‚£ä¹ˆ `$refs.myRef` ä¼šå˜æˆä¸€ä¸ªæ•°ç»„ã€‚ refInFor: true&#125; æ’ä»¶é€šè¿‡ Vue.use() æ–¹æ³•ä½¿ç”¨æ’ä»¶ï¼Œå¿…é¡»è¦åœ¨ new Vue() å®ä¾‹åŒ–ä¹‹å‰è¿›è¡Œæ³¨å†Œã€‚Vue.use ä¼šè‡ªåŠ¨é˜»æ­¢å¤šæ¬¡æ³¨å†Œç›¸åŒæ’ä»¶ï¼Œå±Šæ—¶å³ä½¿å¤šæ¬¡è°ƒç”¨ä¹Ÿåªä¼šæ³¨å†Œä¸€æ¬¡è¯¥æ’ä»¶ã€‚ è¿‡æ»¤å™¨Vue.js å…è®¸ä½ è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆfilters å¯ä½œä¸ºä¸ computed åŒä¸€çº§çš„å±æ€§è¿›è¡Œé…ç½®ï¼‰ï¼Œå¯è¢«ç”¨äºä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šåŒèŠ±æ‹¬å·æ’å€¼å’Œ v-bind è¡¨è¾¾å¼ï¼š 12345&lt;!-- åœ¨åŒèŠ±æ‹¬å·ä¸­ --&gt;&#123;&#123; message | capitalize &#125;&#125;&lt;!-- åœ¨ `v-bind` ä¸­ï¼Œè¿‡æ»¤å™¨å¯ä»¥ä¸²è”ï¼Œå‰ä¸€ä¸ªçš„è¾“å‡ºä¼šä½œä¸ºä¸‹ä¸€ä¸ªçš„è¾“å…¥ --&gt;&lt;div v-bind:id=\"rawId | capitalize | formatId\"&gt;&lt;/div&gt;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"http://keefe.wang/tags/Vue/"},{"name":"Framework","slug":"Framework","permalink":"http://keefe.wang/tags/Framework/"}]},{"title":"Vue ä¸­å®¹æ˜“è¢«å¿½è§†çš„å°åŠŸèƒ½","slug":"2020-07-22-things-need-to-be-aware-of-in-vue","date":"2020-07-22T11:03:00.000Z","updated":"2021-01-20T01:47:17.815Z","comments":true,"path":"2020/07/22/2020-07-22-things-need-to-be-aware-of-in-vue.html","link":"","permalink":"http://keefe.wang/2020/07/22/2020-07-22-things-need-to-be-aware-of-in-vue.html","excerpt":"","text":"ç»„ä»¶é€šä¿¡Propç›¸å…³prop æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ kebab-case çš„æ–¹å¼ä¼ å…¥æ•°æ®ï¼Œåœ¨å­ç»„ä»¶ä¸­å¯ä»¥æ·»åŠ  props å±æ€§æ¥è·å–ä¼ å…¥çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªå•å‘çš„é€šä¿¡è¿‡ç¨‹ã€‚ å¯ä»¥é€šè¿‡ v-bind ä¼ å…¥åŠ¨æ€å˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥å­—ç¬¦ä¸²å€¼åˆ°å­ç»„ä»¶ã€‚ å¦‚æœå­ç»„ä»¶ä¸­ props å±æ€§ä¸­æ²¡æœ‰å£°æ˜æŸäº›å€¼ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶ä¼ å…¥çš„å°±æ˜¯é prop çš„ attributeï¼Œå¯¹äºç»å¤§å¤šæ•° attribute æ¥è¯´ï¼Œä»å¤–éƒ¨æä¾›ç»™ç»„ä»¶çš„å€¼ä¼šæ›¿æ¢æ‰ç»„ä»¶å†…éƒ¨è®¾ç½®å¥½çš„å€¼ã€‚æ‰€ä»¥å¦‚æœä¼ å…¥ type=â€textâ€ å°±ä¼šæ›¿æ¢æ‰ type=â€dateâ€ å¹¶æŠŠå®ƒç ´åï¼åº†å¹¸çš„æ˜¯ï¼Œclass å’Œ style attribute ä¼šç¨å¾®æ™ºèƒ½ä¸€äº›ï¼Œå³ä¸¤è¾¹çš„å€¼ä¼šè¢«åˆå¹¶ï¼ˆmergeï¼‰èµ·æ¥ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆçš„å€¼ã€‚ å¯ä»¥ä½¿ç”¨ vm.$attr å±æ€§æ¥è·å–é™¤ class å’Œ style ä¹‹å¤–çš„é prop çš„ attributeï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ v-bind=&quot;$attr&quot; ä¼ å…¥ï¼Œè¿˜å¯ä»¥é€šè¿‡å­ç»„ä»¶ä¸­çš„ inheritAttrs: true å­—æ®µæ¥æ§åˆ¶æ˜¯å¦æ¥å—çˆ¶ç»„ä»¶ä¼ å…¥çš„é prop çš„ attributeã€‚ äº‹ä»¶è‡ªå®šä¹‰äº‹ä»¶ä½¿ç”¨ v-on ç»‘å®šäº‹ä»¶æ—¶ï¼Œæœ€å¥½ä½¿ç”¨ kebab-case å‘½åæ³•æ¥å‘½åäº‹ä»¶ï¼Œå› ä¸º v-on äº‹ä»¶ç›‘å¬å™¨åœ¨ DOM æ¨¡æ¿ä¸­ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå…¨å°å†™ ï¼ˆå› ä¸º HTML æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼‰ã€‚ å¯ä»¥ä½¿ç”¨ v-on=&quot;$listeners&quot; æ¥å°†æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨æŒ‡å‘è¿™ä¸ªç»„ä»¶çš„æŸä¸ªç‰¹å®šçš„å­å…ƒç´ ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½œç”¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šæ‰€æœ‰çš„ç›‘å¬å™¨ï¼ˆç›‘å¬äº‹ä»¶ï¼‰ã€‚è¿™æ ·ï¼Œåœ¨å­ç»„ä»¶ä¸Šå¯ä»¥ç»‘å®š vm.$listeners ä¸­æ‰€åŒ…å«çš„ç›‘å¬äº‹ä»¶ã€‚ äº‹ä»¶ç›‘å¬é™¤äº† $emit å’Œ v-on è¿™ä¸€å¯¹å¥½åŸºå‹ä¹‹å¤–ï¼Œvue è¿˜æä¾›äº†ç±»ä¼¼ æ€»çº¿ï¼ˆbusï¼‰æœºåˆ¶çš„è§‚å¯Ÿè€…æ¨¡å¼çš„äº‹ä»¶ç›‘å¬æ–¹æ¡ˆï¼š $on(eventName, eventHandler) ä¾¦å¬ä¸€ä¸ªäº‹ä»¶ $once(eventName, eventHandler) ä¸€æ¬¡æ€§ä¾¦å¬ä¸€ä¸ªäº‹ä»¶ $off(eventName, eventHandler) åœæ­¢ä¾¦å¬ä¸€ä¸ªäº‹ä»¶ ä¿®é¥°ç¬¦ sync ä½œç”¨ï¼šå¯¹ prop è¿›è¡Œç®€å•çš„â€œåŒå‘ç»‘å®šâ€ï¼Œå¯ä»¥å®ç°ç®€å•çš„çˆ¶å­æ•°æ®åŒæ­¥ ä½¿ç”¨ï¼šåœ¨çˆ¶ç»„ä»¶éœ€è¦åŒå‘ç»‘å®šçš„æ•°æ®ä¸Šæ·»åŠ  .sync ä¿®é¥°ç¬¦ï¼Œä¾‹å¦‚ &lt;div&gt;&lt;child :some-prop.sync=&quot;someProp&quot;&gt;&lt;/child&gt;&lt;/div&gt; ï¼›åœ¨å­ç»„ä»¶ä¸Šä½¿ç”¨ vm.$emit è§¦å‘æ•°æ®æ›´æ–°ï¼Œä¾‹å¦‚ this.$emit(&#39;update:some-prop&#39;, val) ç»„ä»¶åŠ¨æ€ç»„ä»¶åŠ¨æ€ç»„ä»¶æ˜¯é€šè¿‡ æ¥å®ç°çš„ï¼Œä½†æ˜¯åœ¨åˆ‡æ¢ç»„ä»¶æ—¶ï¼Œä¼šå°†æ¯ä¸ªç»„ä»¶çš„åŸæœ‰çŠ¶æ€ä¸¢å¤±ï¼Œè¿™æ—¶éœ€è¦æ·»åŠ ä¸€ä¸ª keep-alive æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š 123&lt;keep-alive&gt; &lt;component v-bind:is=\"currentTabComponent\"&gt;&lt;/component&gt;&lt;/keep-alive&gt; å¼‚æ­¥ç»„ä»¶Vue å…è®¸ä½ ä»¥ä¸€ä¸ªå·¥å‚å‡½æ•°çš„æ–¹å¼å®šä¹‰ä½ çš„ç»„ä»¶ï¼Œè¿™ä¸ªå·¥å‚å‡½æ•°ä¼šå¼‚æ­¥è§£æä½ çš„ç»„ä»¶å®šä¹‰ã€‚Vue åªæœ‰åœ¨è¿™ä¸ªç»„ä»¶éœ€è¦è¢«æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè§¦å‘è¯¥å·¥å‚å‡½æ•°ï¼Œä¸”ä¼šæŠŠç»“æœç¼“å­˜èµ·æ¥ä¾›æœªæ¥é‡æ¸²æŸ“ã€‚ 12345Vue.component( 'async-webpack-example', // è¿™ä¸ªåŠ¨æ€å¯¼å…¥ä¼šè¿”å›ä¸€ä¸ª `Promise` å¯¹è±¡ã€‚ () =&gt; import('./my-async-component')) Slotç¼–è¯‘ä½œç”¨åŸŸçˆ¶çº§æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ï¼›å­æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨å­ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ã€‚ defaultå†…å®¹å¯ä»¥ä½¿ç”¨ &lt;slot&gt; Default content &lt;/slot&gt; æ¥è®¾ç½®åˆ†å‘å†…å®¹çš„é»˜è®¤å€¼ï¼Œå½“æ²¡æœ‰å†…å®¹ä¼ å…¥æ—¶ä¼šæ˜¾ç¤ºè¯¥å†…å®¹ã€‚ å…·åæ’æ§½æœ‰å¤šä¸ªæ’æ§½éœ€è¦è¿›è¡Œå†…å®¹åˆ†å‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…·åæ’æ§½ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š 1234&lt;!-- å­å…ƒç´ è®¾ç½®å…·åæ’æ§½ --&gt;&lt;header&gt; &lt;slot name=\"header\"&gt;&lt;/slot&gt;&lt;/header&gt; 1234&lt;!-- çˆ¶å…ƒç´ è®¾ç½®åˆ†å‘å†…å®¹ï¼Œç”± v-slot å±æ€§æ¥æŒ‡æ˜å…·ä½“çš„æ’æ§½å --&gt;&lt;template v-slot:header&gt; &lt;h1&gt;Here might be a page title&lt;/h1&gt;&lt;/template&gt; ä½œç”¨åŸŸæ’æ§½ç»‘å®šåœ¨ å…ƒç´ ä¸Šçš„ attribute è¢«ç§°ä¸ºæ’æ§½ propï¼Œä¸ºäº†è®©çˆ¶å…ƒç´ èƒ½å¤Ÿè®¿é—®åˆ°å­ç»„ä»¶ä¸­çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ v-bind è¿›è¡Œä½œç”¨åŸŸçš„ç»‘å®šï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 1234&lt;!-- å­å…ƒç´ ä¸­éœ€è¦åœ¨ slot ä¸­ä½¿ç”¨ v-bind ç»‘å®šå…·ä½“å˜é‡ --&gt;&lt;slot v-bind:user=\"user\"&gt; &#123;&#123; user.lastName &#125;&#125;&lt;/slot&gt; 123456&lt;!-- çˆ¶å…ƒç´ é€šè¿‡ v-slot æ¥æŒ‡æ˜å­å…ƒç´ æ‰€ bind çš„æ‰€æœ‰æ•°æ® --&gt;&lt;child&gt; &lt;template v-slot=\"slotProps\"&gt; &#123;&#123; slotProps.user.firstName &#125;&#125; &lt;/template&gt;&lt;/child&gt; v-slot çš„ç¼©å†™ä¸º #ï¼Œè¿™ä¸ªåœ¨å…·åæ’æ§½ä¸­æœ‰ ç»“æ„æ’æ§½Propä½œç”¨åŸŸæ’æ§½çš„å†…éƒ¨å·¥ä½œåŸç†æ˜¯å°†ä½ çš„æ’æ§½å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªæ‹¥æœ‰å•ä¸ªå‚æ•°çš„å‡½æ•°é‡Œï¼Œè¿™æ„å‘³ç€ v-slot çš„å€¼å®é™…ä¸Šå¯ä»¥æ˜¯ä»»ä½•èƒ½å¤Ÿä½œä¸ºå‡½æ•°å®šä¹‰ä¸­çš„å‚æ•°çš„ JavaScript è¡¨è¾¾å¼ã€‚ 1234&lt;!-- prop é‡å‘½å --&gt;&lt;current-user v-slot=\"&#123; user: person &#125;\"&gt; &#123;&#123; person.firstName &#125;&#125;&lt;/current-user&gt; 1234&lt;!-- ä¸º prop æŒ‡å®šé»˜è®¤å€¼ --&gt;&lt;current-user v-slot=\"&#123; user = &#123; firstName: 'Guest' &#125; &#125;\"&gt; &#123;&#123; user.firstName &#125;&#125;&lt;/current-user&gt; è¾¹ç•Œæƒ…å†µå¤„ç†è®¿é—®å…ƒç´ &amp;ç»„ä»¶ è®¿é—®æ ¹å®ä¾‹ ä¸€èˆ¬ä¸å»ºè®®è§¦è¾¾å¦ä¸€ä¸ªç»„ä»¶å®ä¾‹å†…éƒ¨æˆ–æ‰‹åŠ¨æ“ä½œ DOM å…ƒç´  å¦‚æœå¿…é¡»è¿™ä¹ˆåšï¼Œå¯ä»¥é€šè¿‡ this.$root æ¥è®¿é—®æ ¹å®ä¾‹ä¸­çš„ dataã€computed å’Œ methods ç­‰å±æ€§ è®¿é—®çˆ¶çº§å…ƒç´  åŒè®¿é—®æ ¹å®ä¾‹ï¼Œçˆ¶çº§å…ƒç´ çš„è®¿é—®æ˜¯é€šè¿‡ this.$parent è®¿é—®å­å…ƒç´  ä½ å¯ä»¥é€šè¿‡ ref è¿™ä¸ª attribute ä¸ºå­ç»„ä»¶èµ‹äºˆä¸€ä¸ª ID å¼•ç”¨ï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ ä»–ä¼š this.$refs.someId æ¥è®¿é—®å­å…ƒç´ çš„æ‰€æœ‰å±æ€§ ä¾èµ–æ³¨å…¥ å½“å‡ºç°äº†å¤šå±‚åµŒå¥—çš„ç»„ä»¶æ—¶ï¼Œä½¿ç”¨ $parent å±æ€§æ— æ³•å¾ˆå¥½è·å–åˆ°ç‰¹å®šçˆ¶çº§å…ƒç´ ï¼Œè¿™æ—¶éœ€è¦é‡‡ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹æ³• provide å’Œ injectï¼Œç›¸å½“äºçˆ·ç»„ä»¶å’Œå­™ç»„ä»¶ä¹‹é—´çš„ propsï¼š 123456789// çˆ·ç»„ä»¶ä¸­æ·»åŠ  provide å±æ€§provide: function () &#123; return &#123; getMap: this.getMap &#125;&#125;// å­™ç»„ä»¶ä¸­æ·»åŠ  inject å±æ€§inject: ['getMap'] å¾ªç¯å¼•ç”¨ ç»„ä»¶é€’å½’å¼•ç”¨è¦é¿å… ä¸åŒç»„ä»¶é—´ç›¸äº’å¼•ç”¨ï¼Œå¦‚æœäº§ç”Ÿå¾ªç¯å¼•ç”¨ï¼ˆä¾‹å¦‚ Tree æ–‡ä»¶ç³»ç»Ÿæˆ–çº§è”ç³»ç»Ÿï¼Œæ¨¡å—ç³»ç»Ÿä¼šä¸çŸ¥é“åˆ°åº•å“ªä¸ªæ˜¯åˆå§‹ç»„ä»¶ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹å¼æ¥è§£å†³ï¼š åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ beforeCreate ä¸­è¿›è¡Œç»„ä»¶çš„å¼•å…¥ï¼š 123beforeCreate: function () &#123; this.$options.components.TreeFolderContents = require('./tree-folder-contents.vue').default&#125; å¼•ç”¨ç»„ä»¶æ—¶é‡‡ç”¨å¼‚æ­¥æ–¹å¼ï¼š 123components: &#123; TreeFolderContents: () =&gt; import('./tree-folder-contents.vue')&#125; è¿‡æ¸¡&amp;åŠ¨ç”»å•å…ƒç´ /ç»„ä»¶çš„è¿‡æ¸¡ä½¿ç”¨ å°è£…æ‰€è¦æ·»åŠ è¿‡æ¸¡çš„å…ƒç´ ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºä»¥ä¸‹å››ç§æƒ…å†µï¼ˆéƒ½æ˜¯å•ä¸ªç»„ä»¶æ˜¾éšï¼‰ï¼š æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ v-if) æ¡ä»¶å±•ç¤º (ä½¿ç”¨ v-show) åŠ¨æ€ç»„ä»¶ ç»„ä»¶æ ¹èŠ‚ç‚¹ å°è£…å¥½å…ƒç´ åï¼Œè¿˜éœ€è¦æä¾›ç›¸åº”çš„ css æ ·å¼ï¼Œåˆ†åˆ«ç”±å…­ç§çŠ¶æ€çš„æ ·å¼åï¼Œéœ€è¦æ ¹æ® name å±æ€§è¿›è¡Œç›¸åº”çš„è®¾ç½®ï¼šsomeTransition-enter è¡¨ç¤ºè¿›å…¥è¿‡æ¸¡å¼€å§‹çŠ¶æ€ï¼ŒsomeTransition-enter-active è¡¨ç¤ºè¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆçŠ¶æ€ï¼ŒsomeTransition-enter-to è¡¨ç¤ºè¿›å…¥è¿‡æ¸¡ç»“æŸçŠ¶æ€ï¼ŒsomeTransition-leaveï¼ŒsomeTransition-leave-activeï¼ŒsomeTransition-leave-toã€‚ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»åï¼Œç›¸å¯¹åº”ä¸Šé¢å…­ç§é»˜è®¤çš„æ ·å¼ï¼Œå¯ä»¥åœ¨ transition æ ‡ç­¾ä¸­æ·»åŠ  enter-classï¼Œenter-active-classï¼Œenter-to-classï¼Œleave-classï¼Œleave-active-classï¼Œleave-to-classã€‚ transition æ ‡ç­¾ä¸­å¯ä»¥æŒ‡å®šè¿›å…¥å’Œç¦»å¼€è¿‡æ¸¡çš„æ—¶é•¿ï¼Œå¯ä»¥é€šè¿‡ :duration=&quot;{ enter: 500, leave: 800 }&quot; å®ç° transition æ ‡ç­¾ä¸­å¯ä»¥æŒ‡å®šè¿‡æ¸¡å„é˜¶æ®µçš„é’©å­ï¼Œä»¥ç”¨æ¥ç»‘å®šç›¸åº”çš„äº‹ä»¶ï¼ŒåŒ…æ‹¬ @before-enterã€@enterã€@after-enterã€@enter-cancelledã€@before-leaveã€@leaveã€@after-leaveã€@leave-cancelled å…«ç§é’©å­ï¼š 123456// åœ¨ enter å’Œ leave é’©å­äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰ css æ§åˆ¶å…ƒç´ è¿‡æ¸¡ï¼Œé‚£ä¹ˆä¸€å®šéœ€è¦æœ‰ done() å›è°ƒ// å¦åˆ™ enter å’Œ leave é’©å­äº‹ä»¶ä¼šåŒæ—¶å®ŒæˆbeforeEnter: function (el) &#123;&#125;,enter: function (el, done) &#123; done()&#125; transition æ ‡ç­¾ä¸­å¯ä»¥ä½¿ç”¨ appear å±æ€§æ¥è®¾ç½®å…ƒç´ åˆå§‹åŒ–è¿‡æ¸¡çš„æ ·å¼ï¼Œç”¨æ³•ä¸ enter å’Œ leave ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨ someTrasition-appear ç±»æˆ–è€…è‡ªå®šä¹‰ç±»åå±æ€§ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒé’©å­çš„å®ç°ã€‚ å¤šå…ƒç´ çš„è¿‡æ¸¡å¤šå…ƒç´ ä½¿ç”¨è¿‡æ¸¡æ—¶ï¼Œå¯ä»¥åœ¨æœ€å¤–å±‚ä½¿ç”¨ transition æ ‡ç­¾è¿›è¡ŒåŒ…è£…ï¼Œç”¨æ³•ä¸å•å…ƒç´ ç›¸åŒï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„â€”â€”ä½¿ç”¨ v-if æˆ–è€… v-for è®¾ç½®å¤šä¸ªå…ƒç´ æ—¶ï¼Œä¸€å®šè¦åœ¨æ¯ä¸ªå…ƒç´ ä¸Šç»‘å®šè‡ªå·±çš„ keyã€‚ å¤šä¸ªå…ƒç´ åˆ‡æ¢æ˜¾éšçŠ¶æ€æ—¶ï¼ŒVue æä¾›äº†ä¸€ä¸ª mode å±æ€§æ¥è¿›è¡Œå¹³æ»‘è¿‡æ¸¡ï¼š 1&lt;transition name=\"fade\" mode=\"out-in\"&gt;&lt;/transition&gt; å¤šç»„ä»¶çš„è¿‡æ¸¡å¤šç»„ä»¶çš„è¿‡æ¸¡ï¼Œä½¿ç”¨ä¹‹å‰æ‰€æåˆ°çš„åŠ¨æ€ç»„ä»¶å³å¯å®ç°ï¼Œåœ¨è¿‡æ¸¡æ—¶å¯ä»¥åœ¨ç»„ä»¶å¤–åŒ…è£…ä¸€å±‚ transitionï¼ŒæŒ‡å®šè¿‡æ¸¡çš„æ ·å¼å name å±æ€§ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ ·å¼æˆ–é’©å­è¿›è¡Œè¿‡æ¸¡æ ·å¼çš„å®ç°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ æ‰€éœ€è¦çš„ modeï¼š 123&lt;transition name=\"component-fade\" mode=\"out-in\"&gt; &lt;component v-bind:is=\"view\"&gt;&lt;/component&gt;&lt;/transition&gt; å¯¹äºåˆ—è¡¨çš„è¿‡æ¸¡ï¼Œå¯ä»¥ä½¿ç”¨ åŒ…è£… v-for æ¸²æŸ“å‡ºçš„åˆ—è¡¨ï¼ŒæŒ‡æ˜è¿‡æ¸¡æ ·å¼å name å±æ€§ï¼Œå³å¯ç”¨ä¸Šé¢ç›¸åŒçš„æ–¹å¼è¿›è¡Œè¿‡æ¸¡çš„å®ç°ã€‚åœ¨åˆ—è¡¨æ‰“ä¹±æˆ–é‡æ–°æ’åºæ—¶ï¼ŒVue æä¾›äº† someTransition-move çš„ç±»åæ¥å®ç°ï¼š 123456&lt;button v-on:click=\"shuffle\"&gt;Shuffle&lt;/button&gt;&lt;transition-group name=\"flip-list\" tag=\"ul\"&gt; &lt;li v-for=\"item in items\" v-bind:key=\"item\"&gt; &#123;&#123; item &#125;&#125; &lt;/li&gt;&lt;/transition-group&gt; 1234567891011new Vue(&#123; el: '#flip-list-demo', data: &#123; items: [1,2,3,4,5,6,7,8,9] &#125;, methods: &#123; shuffle: function () &#123; this.items = _.shuffle(this.items) &#125; &#125;&#125;) 123.flip-list-move &#123; transition: transform 1s;&#125;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"http://keefe.wang/tags/Vue/"},{"name":"Framework","slug":"Framework","permalink":"http://keefe.wang/tags/Framework/"}]},{"title":"JavaScript åŸºäºäº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹","slug":"2020-06-03-advanced-eventloop-in-javascript","date":"2020-06-03T08:31:00.000Z","updated":"2021-01-20T01:46:35.460Z","comments":true,"path":"2020/06/03/2020-06-03-advanced-eventloop-in-javascript.html","link":"","permalink":"http://keefe.wang/2020/06/03/2020-06-03-advanced-eventloop-in-javascript.html","excerpt":"","text":"runtimeï¼ˆè¿è¡Œæ—¶åˆ»ï¼‰æ˜¯æŒ‡ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œçš„çŠ¶æ€ã€‚JavaScript çš„è¿è¡Œæ—¶åˆ»æœ‰ä¸€ä¸ªåŸºäºäº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹ï¼Œäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚ JavaScript ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šå½¢æˆä¸€ä¸ªç”±è‹¥å¹²å¸§ç»„æˆçš„æ ˆï¼Œå½“ä¸€ä¸ªå‡½æ•°ä¸­å­˜åœ¨é—­åŒ…å‡½æ•°æ—¶ï¼Œå¤–å±‚å‡½æ•°ä¼šå…ˆå‹å…¥æ ˆä¸­ï¼Œå…¶ä¸­åŒ…å«å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼›é—­åŒ…å‡½æ•°è·Ÿç€å‹å…¥æ ˆä¸­ï¼Œä¹ŸåŒ…å«äº†è‡ªå·±çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚é—­åŒ…å‡½æ•°å…ˆä»æ ˆä¸­å¼¹å‡ºï¼Œæ‰§è¡Œå®Œäº†ä¹‹åå¤–å±‚å‡½æ•°ä»æ ˆä¸­å¼¹å‡ºæ‰§è¡Œï¼Œæ ˆå°±è¢«æ¸…ç©ºäº†ã€‚ å¯¹è±¡æ˜¯è¢«åˆ†é…åœ¨å †ä¸­ã€‚ ä¸€ä¸ª JavaScript è¿è¡Œæ—¶åŒ…å«äº†ä¸€ä¸ªå¾…å¤„ç†æ¶ˆæ¯çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯ä¸€ä¸ªæ¶ˆæ¯éƒ½å…³è”ç€ä¸€ä¸ªç”¨ä»¥å¤„ç†è¿™ä¸ªæ¶ˆæ¯çš„å›è°ƒå‡½æ•°ã€‚ äº‹ä»¶å¾ªç¯123while (queue.waitForMessage()) &#123; queue.processNextMessage();&#125; JavaScript ä¸­æ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯éœ€è¦å®Œæ•´æ‰§è¡Œå®Œæˆæ‰ä¼šç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ï¼ˆå•çº¿ç¨‹è¯­è¨€ï¼šone thread â‡’ one call stack â‡’ one thing at a timeï¼‰ï¼Œæ‰€ä»¥ JavaScript çš„ä»£ç å¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶é—´è¿‡é•¿çš„æƒ…å†µã€‚ä¸ºäº†å®ç°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œï¼ŒJavaScript å¼•å…¥äº†äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚ åœ¨ä¸Šé¢æ‰€æåˆ°çš„å‡½æ•°è°ƒç”¨æ ˆä¹‹å¤–ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ runtime æ‰§è¡Œä»£ç è¿‡ç¨‹ä¸­é‡åˆ°äº†åƒ setTimeout æˆ– DOM äº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ï¼Œä¼šé¦–å…ˆè°ƒç”¨ WebAPIs å»è¿›è¡Œæ‰§è¡Œâ€”â€”ä¾‹å¦‚ setTimeout ä¼šäº§ç”Ÿä¸€ä¸ª timer è®¡æ—¶å™¨ï¼Œå½“è®¡æ—¶å™¨åˆ°è¾¾æŒ‡å®šæ—¶é—´åï¼Œä¼šå°†è¿™ä¸ªäº‹ä»¶æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚ä»»åŠ¡é˜Ÿåˆ—å°±æ˜¯ç”±ä¸€ä¸ªä¸ªå¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°æ‰€ç»„æˆçš„é˜Ÿåˆ—ã€‚äº‹ä»¶å¾ªç¯ç®€å•æ¥è¯´å°±æ˜¯ï¼šå½“ runtime å‡½æ•°è°ƒç”¨æ ˆæ¸…ç©ºåï¼ŒæŸ¥çœ‹å½“å‰ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æŠŠé˜Ÿåˆ—ç¬¬ä¸€ä¸ªä»»åŠ¡å‹å…¥ runtime å‡½æ•°è°ƒç”¨æ ˆã€‚ æµè§ˆå™¨çš„ render åˆ·æ–°æœ€å¿«æ˜¯ 16.6ms ä¸€æ¬¡ï¼ˆæµè§ˆå™¨åˆ·æ–°ä¸€èˆ¬æ˜¯ 60æ¬¡/s ï¼‰ï¼Œè¿™æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸ºç©ºçš„æ—¶å€™ï¼ˆæ‰€ä»¥ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡æ˜¯ä¸ä¼šé˜»å¡æµè§ˆå™¨æ¸²æŸ“çš„ï¼‰ã€‚å¦‚æœæƒ³åœ¨æµè§ˆå™¨æ¸²æŸ“ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ requestAnimationFrame(callback)æ–¹æ³•æ¥è¿›è¡Œæ·»åŠ ã€‚å¦‚æœå‡½æ•°è°ƒç”¨æ ˆä¸ä¸ºç©ºï¼Œåˆ™ render ä¼šè¢«é˜»å¡ï¼šä¸»çº¿ç¨‹ä¸­çš„æ­»å¾ªç¯ä¼šé˜»å¡æµè§ˆå™¨æ¸²æŸ“ï¼Œä½†æ˜¯çœ‹ä¸‹é¢çš„ä»£ç ï¼š 1234function loop() &#123; setTimeout(loop, 0);&#125;loop(); è¿™ä¸ªæ— é™è‡ªæˆ‘é€’å½’è°ƒç”¨ä¹Ÿä¼šå½¢æˆä¸€ä¸ªå¾ªç¯ï¼Œä½†æ˜¯ç”±äº setTimeout æ–¹æ³•åªæ˜¯ä¸åœåœ°å¾€ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢æ·»åŠ ä»»åŠ¡ï¼Œè€Œä¸»çº¿ç¨‹è¿˜æ˜¯æ¯æ¬¡å–ä¸€ä¸ªä»»åŠ¡å»æ‰§è¡Œï¼Œä¸»çº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œæ‰€ä»¥æµè§ˆå™¨æ¸²æŸ“ä¹Ÿä¸ä¼šè¢«é˜»å¡ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†åˆ°äº†ä¸»çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—å’Œæ¸²æŸ“ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ä¸»çº¿ç¨‹ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆæ¸…ç©ºåï¼Œä¼šä»éç©ºçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‹¿ç¬¬ä¸€ä¸ªä»»åŠ¡åˆ°ä¸»çº¿ç¨‹å°½å¿ƒæ‰§è¡Œï¼Œæ¯æ¬¡å¾ªç¯éƒ½æ˜¯åªå–ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚è€Œæ¸²æŸ“ä»»åŠ¡åˆ™æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œæˆçš„ã€‚ å®é™…ä¸Šï¼Œæµè§ˆå™¨æ€»è¿˜æœ‰ä¸€ä¸ª microTask queueï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸­ä¸€èˆ¬æˆ‘ä»¬é‡åˆ°çš„ 99.9% åº”è¯¥éƒ½æ˜¯ä»¥ promise å½¢å¼å‡ºç°çš„ï¼ŒmicroTask æ‰§è¡Œçš„æ—¶é—´æ˜¯æ¯ä¸€æ®µ JS ä»£ç æ‰§è¡Œå®Œæ¯•ï¼ˆä¸»çº¿ç¨‹ä»»åŠ¡æ¸…ç©ºã€ä»»åŠ¡é˜Ÿåˆ—å–å¾—ç¬¬ä¸€ä¸ªä»»åŠ¡åˆ°ä¸»çº¿ç¨‹å¹¶æ‰§è¡Œå®Œã€æµè§ˆå™¨æ¸²æŸ“ä»»åŠ¡æ‰§è¡Œå®Œï¼‰éƒ½ä¼šè¿›è¡Œæ‰§è¡Œï¼Œè€Œä¸”ä¸€æ—¦æ‰§è¡Œï¼ŒmicroTask queue ä¸­æ— è®ºæœ‰å¤šå°‘ä¸ªä»»åŠ¡ï¼ˆåŒ…æ‹¬åŒæ—¶æ·»åŠ è¿›æ¥çš„ä»»åŠ¡ï¼‰éƒ½ä¼šä¸€ç›´æ‰§è¡Œå®Œã€‚æ‰€ä»¥ï¼ŒmicroTask queue æ˜¯ä¼šäº§ç”Ÿé˜»å¡çš„ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æ‰€çŸ¥çš„æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯æœ‰ä»¥ä¸‹çš„å‡ ç§é˜Ÿåˆ—æœºåˆ¶ï¼š ä¸»çº¿ç¨‹ä»»åŠ¡é˜Ÿåˆ— æ¥å— JS ç¨‹åºä¸­æŒ‰é¡ºåºçš„åŒæ­¥ä»»åŠ¡ï¼Œåœ¨æ¯æ¬¡äº‹ä»¶å¾ªç¯ä¸­éƒ½ä¼šæ‰§è¡Œä»»åŠ¡ç›´è‡³é˜Ÿåˆ—æ¸…ç©º å¼‚æ­¥å›è°ƒä»»åŠ¡é˜Ÿåˆ— æ¥å—åƒ setTimeoutã€ajax ç­‰çš„å¼‚æ­¥å›è°ƒå‡½æ•°ä»»åŠ¡ï¼Œåœ¨æ¯æ¬¡æ—¶é—´å¾ªç¯ä¸­ä¸»çº¿ç¨‹ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œä¼šæ‹¿å‡ºè¯¥é˜Ÿåˆ—çš„å¤´éƒ¨ä»»åŠ¡æ”¾å…¥ä¸»çº¿ç¨‹è¿›è¡Œæ‰§è¡Œ microtask ä»»åŠ¡é˜Ÿåˆ— æ¥å— promise.then çš„å›è°ƒå‡½æ•°ä»»åŠ¡ï¼Œåœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯ä¸€æ®µ JS ä»£ç æ‰§è¡Œå®Œæ¯•ï¼ˆä¸»çº¿ç¨‹ä»»åŠ¡æ¸…ç©ºã€ä»»åŠ¡é˜Ÿåˆ—å–å¾—ç¬¬ä¸€ä¸ªä»»åŠ¡åˆ°ä¸»çº¿ç¨‹å¹¶æ‰§è¡Œå®Œã€æµè§ˆå™¨æ¸²æŸ“ä»»åŠ¡æ‰§è¡Œå®Œï¼‰éƒ½ä¼šæ‰§è¡Œï¼Œä¸”æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šå°†è¯¥é˜Ÿåˆ—æ¸…ç©ºï¼ŒåŒ…æ‹¬åŒæ—¶å…¥é˜Ÿçš„ä»»åŠ¡ä¹Ÿä¼šä¸€å¹¶æ¸…ç©º åŠ¨ç”»å¸§å›è°ƒä»»åŠ¡é˜Ÿåˆ— æ¥å— requestAnimationFrame çš„å›è°ƒå‡½æ•°ä»»åŠ¡ï¼Œåœ¨æ¯æ¬¡æµè§ˆå™¨æ¸²æŸ“ä»»åŠ¡æ‰§è¡Œä¹‹å‰è¿›è¡Œæ‰§è¡Œï¼ˆç›®å‰ä»…åœ¨ chrome ä¸­æ˜¯è¯¥é¡ºåºï¼‰ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½æ¸…ç©ºå½“å‰é˜Ÿåˆ—ï¼Œå¦‚æœ‰æ–°çš„ä»»åŠ¡æ·»åŠ åˆ™ç­‰å¾…ä¸‹æ¬¡æ¸²æŸ“å‰æ‰§è¡Œ æµè§ˆå™¨æ¸²æŸ“ä»»åŠ¡é˜Ÿåˆ— æ¯å½“ä¸Šé¢ä¸»çº¿ç¨‹ã€å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€microTask ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œä¸”è·ç¦»ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶é•¿å¤§äº 16.6ms æ—¶ï¼Œå°±ä¼šè¿›è¡Œä»»åŠ¡æ‰§è¡Œï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œéƒ½ä¼šå°†å½“å‰é˜Ÿåˆ—ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæ¯• ç”¨ä¸€ä¸ªä¼ªä»£ç æ¥è¿›è¡Œä¸Šé¢æµç¨‹çš„è¡¨è¿°ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122while (true) &#123; while (mainThread.hasTasks()) &#123; execute(mainThread.getNextTask()); &#125; queue = getNextQueue(); task = queue.pop(); execute(task); while(microTask.hasTasks()) &#123; doMicroTask(); &#125; if (isRepaintTime()) &#123; animationTasks = animationQueue.copyTasks(); for (task in animationTasks) &#123; doAnimationTask(); &#125; &#125; repaint()&#125; Node ä¸­çš„äº‹ä»¶å¾ªç¯NodeJS çš„äº‹ä»¶å¾ªç¯åŸºæœ¬ä¸Šä¸æµè§ˆå™¨ä¸­çš„äº‹ä»¶å¾ªç¯æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡æµè§ˆå™¨ä½¿ç”¨çš„æ˜¯ WebAPIsï¼Œè€Œ NodeJS ä¸­ä½¿ç”¨çš„æ˜¯ C++ APIsã€‚ ä¸»çº¿ç¨‹ä¸å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œä»¥åŠ microTask ä»»åŠ¡é˜Ÿåˆ—éƒ½ä¸æµè§ˆå™¨ä¸­çš„äº‹ä»¶å¾ªç¯ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šå›¾ä¸­å¤šäº†ä¸‰ä¸ªæ²¡æœ‰è§åˆ°è¿‡çš„ä»»åŠ¡é˜Ÿåˆ—ï¼š check phase ä»»åŠ¡é˜Ÿåˆ— æ¥å—ä½¿ç”¨ setImmediate æ–¹æ³•ä¼ å…¥çš„å›è°ƒå‡½æ•°ä»»åŠ¡ï¼Œæ¯æ¬¡åœ¨å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæˆåï¼Œæ¸…ç©ºè¯¥é˜Ÿåˆ— timer phase ä»»åŠ¡é˜Ÿåˆ— æ¥å— setTimeoutã€setInterval ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œæ¯æ¬¡åœ¨ check phase ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œæ¸…ç©ºè¯¥ä»»åŠ¡é˜Ÿåˆ— nextTick ä»»åŠ¡é˜Ÿåˆ— ä¸ microTask ä»»åŠ¡é˜Ÿåˆ—ç›¸åŒï¼Œ æ¥å— process.nextTick ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œè¯¥é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜äº microTask ç”¨ä¼ªä»£ç è¿›è¡Œä¸Šè¿°æµç¨‹çš„æ¨¡æ‹Ÿï¼Œå¦‚ä¸‹ï¼š 123456789101112131415while (tasksAreWaiting()) &#123; queue = getNextQueue(); while (queue.hasTasks()) &#123; task = queue.pop(); execute(task); while (nextTickQueue.hasTasks()) &#123; doNextTickTask(); &#125; while (promiseQueue.hasTasks()) &#123; doPromiseTask(); &#125; &#125;&#125;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"}]},{"title":"EggJSæºç é˜…è¯»-å¯åŠ¨æµç¨‹ä¸ä»£ç å®ç°","slug":"2020-05-30-source-code-reading-Egg-starting","date":"2020-05-23T04:30:00.000Z","updated":"2020-10-20T10:00:10.799Z","comments":true,"path":"2020/05/23/2020-05-30-source-code-reading-Egg-starting.html","link":"","permalink":"http://keefe.wang/2020/05/23/2020-05-30-source-code-reading-Egg-starting.html","excerpt":"","text":"eggæ˜¯é˜¿é‡Œå¼€æºçš„ä¸€ä¸ªæ¡†æ¶ï¼Œä¸ºä¼ä¸šçº§æ¡†æ¶å’Œåº”ç”¨è€Œç”Ÿï¼Œç›¸è¾ƒäºexpresså’Œkoaï¼Œæœ‰æ›´åŠ ä¸¥æ ¼çš„ç›®å½•ç»“æ„å’Œè§„èŒƒã€‚ä¸åŒçš„å›¢é˜Ÿå¯ä»¥åŸºäºeggï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚å°è£…å‡ºé€‚åˆå›¢é˜Ÿä¸šåŠ¡çš„æ›´ä¸Šå±‚æ¡†æ¶ã€‚ eggå¦‚ä½•å¯åŠ¨ æ ¹æ®package.jsonä¸­çš„scriptå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„ç›´æ¥æ˜¯egg-bin devçš„å‘½ä»¤ã€‚æ‰¾åˆ°egg-binæ–‡ä»¶å¤¹ä¸­çš„dev.js,ä¼šçœ‹åˆ°é‡Œé¢ä¼šå»æ‰§è¡Œå¤–å±‚çš„start-clusteræ–‡ä»¶: 1require(options.framework).startCluster(options); æ­¤å¤„çš„options.frameworkå…¶å®æŒ‡çš„å°±æ˜¯eggæ¡†æ¶ï¼Œç„¶åè°ƒç”¨äº†egg-clusteråŒ…ä¸­çš„startClusteræ–¹æ³•ï¼Œeggæ­£å¼è¿ˆå‡ºäº†å¯åŠ¨çš„ç¬¬ä¸€æ­¥ã€‚ [æºç æµç¨‹] eggæ¡†æ¶é‡‡ç”¨äº†master-agent-worderçš„é›†ç¾¤æ¨¡å¼ï¼Œå¦‚æœæ‰€ç¤ºï¼Œå®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿå¯¹äºè¿™ä¸‰ç§è¿›ç¨‹çš„å¯åŠ¨å’Œé€šä¿¡ç»™å‡ºäº†è¾ƒä¸ºè¯¦ç»†çš„è¯´æ˜ï¼š Master å¯åŠ¨åå…ˆ fork Agent è¿›ç¨‹ Agent åˆå§‹åŒ–æˆåŠŸåï¼Œé€šè¿‡ IPC é€šé“é€šçŸ¥ Master Master å† fork å¤šä¸ª App Worker App Worker åˆå§‹åŒ–æˆåŠŸï¼Œé€šçŸ¥ Master æ‰€æœ‰çš„è¿›ç¨‹åˆå§‹åŒ–æˆåŠŸåï¼ŒMaster é€šçŸ¥ Agent å’Œ Worker åº”ç”¨å¯åŠ¨æˆåŠŸ æˆ‘ä»¬å°è¯•ä»æºç ä¸­å¤§è‡´å°†è¿™ä¸ªæµç¨‹å®ç°å‡ºæ¥ï¼š 12345678// egg-cluster/lib/master.jsready.mixin(this); // å°† ready æ–¹æ³•æŒ‚åœ¨ Master ä¸Šthis.detectPorts().then(() =&gt; &#123; // æ£€æµ‹ç«¯å£ this.forkAgentWorker(); // å¯åŠ¨ agent è¿›ç¨‹ï¼Œå‘é€ agent-start æ¶ˆæ¯ç»™ master è¿›ç¨‹&#125;);// master è¿›ç¨‹ä¸€æ—¦æ¥æ”¶åˆ° agent-start æ¶ˆæ¯åï¼Œå¼€å§‹åˆ›å»º worker è¿›ç¨‹this.once('agent-start', this.forkAppWorkers.bind(this)); [æºç æµç¨‹] Agentä¸AppWorkerçš„å®ç°AgentWorkerä¸AppWorkerè¿›ç¨‹çš„å¯åŠ¨ åœ¨å¯åŠ¨AgentWorkerå’ŒAppWorkeræ—¶ï¼Œä¼šåˆ†åˆ«åŠ è½½agent_worker.jså’Œapp_worker.jsä¸¤ä¸ªæ–‡ä»¶å¹¶åˆ›å»ºè¿›ç¨‹ï¼Œå…¶ä¸­agent_worker.jsä¸­ä¼šåˆ›å»ºAgentç±»çš„å®ä¾‹ï¼Œè€Œapp_worker.jsä¸­ä¼šåˆ›å»ºApplicationç±»çš„å®ä¾‹ã€‚ ä¸¤ç§è¿›ç¨‹åœ¨å¯åŠ¨æ—¶éƒ½ä¼šè°ƒç”¨this.loader.load()æ–¹æ³•æ¥åŠ è½½è‡ªå·±ç›¸åº”çš„ä¸€äº›æ’ä»¶å’Œè‡ªå®šä¹‰çš„æ‰©å±•ã€‚ åŸºäºegg_loaderå®ç°äº†AppWorkerLoaderå’Œ AgentWorkerLoaderï¼Œä¸Šå±‚æ¡†æ¶åŸºäºè¿™ä¸¤ä¸ªç±»æ¥æ‰©å±•ï¼ŒLoaderçš„æ‰©å±•åªèƒ½åœ¨æ¡†æ¶è¿›è¡Œã€‚ 123456789101112131415161718192021222324252627import &#123; AppWorkerLoader &#125; from 'egg'import common from './common'class MyAppWorkerLoader extends AppWorkerLoader &#123; constructor(opt) &#123; super(opt); // è‡ªå®šä¹‰åˆå§‹åŒ– &#125; loadConfig() &#123; super.loadConfig(); // å¯¹ config è¿›è¡Œå¤„ç† &#125; load() &#123; super.load(); // è‡ªå®šä¹‰åŠ è½½å…¶ä»–ç›®å½• // æˆ–å¯¹å·²åŠ è½½çš„æ–‡ä»¶è¿›è¡Œå¤„ç† &#125;&#125;Object.assign(MyAppWorkerLoader.prototype, &#123; // å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œé‡å†™ä¸€äº›è·å–é…ç½®çš„æ–¹æ³• getServerEnv()&#123;&#125;; _preloadAppConfig()&#123;&#125; getTypeFiles()&#123;&#125;&#125;)export default MyAppWorkerLoader Agentå¦‚ä½•å®ç° Agentå¯¹è±¡åœ¨egg-clusteråˆ›å»ºç¯èŠ‚ä¸­è¢«åˆ›å»ºå‡ºæ¥ï¼Œç»§æ‰¿è‡ªegg.Agentå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç»§æ‰¿EggApplication,ä¸”loaderä¸º./lib/loader/agent_worker_loader.jsæ–‡ä»¶ï¼Œç»§æ‰¿è‡ªegg-core.eggLoaderå¯¹è±¡ï¼Œæ•´ä½“ç»§æ‰¿é“¾å¦‚ä¸Šå›¾ã€‚ 1234567891011121314151617// egg/lib/agent.jsclass Agent extends EggApplication &#123; constructor(options = &#123;&#125;) &#123; options.type = 'agent'; // 1.å®Œæˆçˆ¶ç±»æ„å»º super(options); // 2.é©±åŠ¨loaderæ‰§è¡Œloadæ–¹æ³• this.loader.load(); // 3.dumpç›¸å…³é…ç½®æ–‡ä»¶è¿›å…¥./runç›®å½•ä¸‹ this.dumpConfig(); setInterval(() =&gt; &#123;&#125;, 24 * 60 * 60 * 1000); // 4.ç›‘å¬å¼‚å¸¸äº‹ä»¶ this._uncaughtExceptionHandler = this._uncaughtExceptionHandler.bind(this); process.on('uncaughtException', this._uncaughtExceptionHandler); &#125;&#125; Agentç±»çš„å®ç°ä¸­ï¼Œä¸»è¦æ˜¯å®ä¾‹åŒ–äº†EggApplicationï¼Œè°ƒç”¨äº†this.loader.load()æ–¹æ³•æ¥åŠ è½½å„ç§æ–‡ä»¶å’Œé…ç½®ã€‚ 1234567891011121314151617181920// egg/lib/egg.jsclass EggApplication extends EggCore &#123; constructor(options = &#123;&#125;) &#123; options.mode = options.mode || 'cluster'; // 1.åŸå‹EggCoreæ„å»º super(options); // 2.è°ƒç”¨loadConfigï¼Œåœ¨agentçš„å®ç°ä¸­ï¼ŒæŒ‡å‘çš„å¹¶ä¸æ˜¯egg-core.loaderï¼Œè€Œæ˜¯agent_worker_loader this.loader.loadConfig(); // 3.readyäº‹ä»¶ this.ready(() =&gt; process.nextTick(() =&gt; &#123; const dumpStartTime = Date.now(); this.dumpConfig(); this.dumpTiming(); &#125;)); // ç›‘å¬unhandleRejectionäº‹ä»¶ // 4.clusteråˆå§‹åŒ– this[CLUSTER_CLIENTS] = []; this.cluster = (clientClass, options) =&gt; &#123;&#125;; &#125;&#125; åœ¨EggApplicationç±»çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯ç»§æ‰¿è‡ªEggCoreç±»ï¼Œåœ¨çˆ¶ç±»æ„å»ºå¥½ä¹‹åï¼Œä¼šè°ƒç”¨this.loader.loadConfig()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„loaderå®ä¾‹å®é™…æŒ‡å‘äº†AgentWorkerLoaderï¼ˆagent_worker_loader.jsï¼‰ï¼š 1234567891011121314// egg/lib/loader/agent_worker_loader.jsclass AgentWorkerLoader extends EggLoader &#123; loadConfig() &#123; this.loadPlugin(); // loadPlugin from egg-core/lib/loader/mixin/plgin.js super.loadConfig(); // loadConfig from egg-core/lib/loader/mixin/config.js &#125; load() &#123; this.loadAgentExtend(); this.loadContextExtend(); this.loadCustomAgent(); &#125;&#125; loadPluginæ–¹æ³•ä¼šåŠ è½½ä¸‰ç§æ’ä»¶ï¼š eggPluginsï¼Œä»eggjsæ¡†æ¶é…ç½®çš„æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯egg/config/plugins.jsæ–‡ä»¶ä¸­eggæ¡†æ¶è‡ªå¸¦çš„æ’ä»¶ï¼› appPluginsï¼Œæ¯ä¸ªåº”ç”¨è‡ªå·±é…ç½®çš„æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯myproject/config/plugins.jsï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰é…ç½®ä¸€äº›ç‰¹æ®Šçš„æ’ä»¶ï¼› customPluginsï¼Œåº”ç”¨å¯åŠ¨å‘½ä»¤ä¸­å‚æ•°EGG_PLUGINSå€¼æ‰€ä»£è¡¨çš„æ’ä»¶ï¼› æœ€åä¼šå°†è¿™ä¸‰ç§æ’ä»¶éƒ½æŒ‚åœ¨appå®ä¾‹ä¸Šï¼šthis.plugins = enablePlugins; loadConfigæ–¹æ³•ä¼šåŠ è½½ä¸‰ç§é…ç½®ï¼š appConfigï¼Œæ¯ä¸ªåº”ç”¨è‡ªå·±ç‹¬æœ‰çš„é…ç½®ï¼Œå…¶ä¸­ä¼šæŒ‰é¡ºåºåŠ è½½ä¸¤ä¸ªé…ç½®ï¼Œä¸€ä¸ªæ˜¯é»˜è®¤é…ç½®config.defaultï¼Œå¦ä¸€ä¸ªæ˜¯å½“å‰ç¯å¢ƒçš„é…ç½®config.${this.serverEnv}ï¼Œä¹Ÿå°±æ˜¯myproject/configä¸‹çš„ä¸€äº›é…ç½®æ–‡ä»¶åŠ è½½ åŠ è½½è‡ªå®šä¹‰æ·»åŠ çš„pluginæ’ä»¶çš„é…ç½® åŠ è½½æ¡†æ¶eggçš„é…ç½®ï¼Œå³egg/config é‡æ–°åŠ è½½åº”ç”¨appçš„é…ç½®ï¼Œå³myproject/configä¸‹çš„ æœ€åå°†åˆå¹¶çš„é…ç½®æŒ‚è½½åœ¨appå®ä¾‹ä¸Šthis.config = target; Applicationå¦‚ä½•å®ç°ä¸Šé¢æåˆ°ï¼ŒAppWorkeråœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè°ƒç”¨this.loader.load()ã€‚è¿›å…¥å…·ä½“è¿™ä¸ªApplicationæ‰€å¯¹åº”çš„loader.loadæ–¹æ³•ï¼Œå¯ä»¥å‘ç°Applicationçš„å®ç°æ¯”Agentçš„å®ç°å¤šè°ƒç”¨äº†å¾ˆå¤šåŠ è½½çš„æ–¹æ³•ï¼š this.loadApplicationExtend();ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨ä¼šç»™åº”ç”¨åŠ è½½æ‰©å±•æ–¹æ³•ï¼ŒåŠ è½½è·¯å¾„ä¸ºapp\\extend\\application.js, ä¼šå°†å¯¹åº”çš„å¯¹è±¡æŒ‚è½½åœ¨app åº”ç”¨ä¸Šã€‚ this.loadRequestExtend();ï¼ŒåŠ è½½app\\extend\\request.js this.loadResponseExtend();ï¼ŒåŠ è½½app\\extend\\response.js this.loadContextExtend();ï¼ŒåŠ è½½app\\extend\\context.js this.loadHelperExtend();ï¼ŒåŠ è½½app\\extend\\helper.js this.loadService() this.loadMiddleware() this.loadController() this.loadRouter() æ€»ç»“ eggå¯åŠ¨æœåŠ¡é›†ç¾¤ï¼Œé‡‡ç”¨äº†master-agent-workeræ¨¡å¼ï¼ŒAgentWorkerå’ŒAppWorkeréƒ½ç”±Application(egg/lib/applicaton.js) -&gt; EggApplication(egg/lib/egg.js) -&gt; EggCore(egg-core/lib/egg.js) -&gt; KoaApplication(koa)åŸå‹é“¾è¿›è¡Œç»§æ‰¿ Agentå’ŒApplicationåœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šè°ƒç”¨ç›¸åº”çš„Loaderå»åŠ è½½è‡ªå·±æ‰€éœ€çš„æ’ä»¶å’Œé…ç½®ï¼Œä¸”åŠ è½½é¡ºåºä¸¥æ ¼æŒ‰ç…§æ’ä»¶plugin-æ¡†æ¶framework-åº”ç”¨applicationè¿™æ ·ä¸€ä¸ªé¡ºåº","categories":[{"name":"SourceCodeReading","slug":"SourceCodeReading","permalink":"http://keefe.wang/categories/SourceCodeReading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"æºç å­¦ä¹ ","slug":"æºç å­¦ä¹ ","permalink":"http://keefe.wang/tags/æºç å­¦ä¹ /"},{"name":"EggJS","slug":"EggJS","permalink":"http://keefe.wang/tags/EggJS/"},{"name":"NodeJS","slug":"NodeJS","permalink":"http://keefe.wang/tags/NodeJS/"}]},{"title":"Expressæºç é˜…è¯»-routerç›¸å…³","slug":"2020-03-05-source-code-reading-express-router","date":"2020-03-15T04:30:00.000Z","updated":"2020-10-20T10:00:17.103Z","comments":true,"path":"2020/03/15/2020-03-05-source-code-reading-express-router.html","link":"","permalink":"http://keefe.wang/2020/03/15/2020-03-05-source-code-reading-express-router.html","excerpt":"","text":"Express æ˜¯ä¸€ç§ä¿æŒæœ€ä½ç¨‹åº¦è§„æ¨¡çš„çµæ´» Node.js Web åº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œä¸º Web å’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›ä¸€ç»„å¼ºå¤§çš„åŠŸèƒ½ã€‚ Expressä¸­çš„app123456789101112131415161718// express.jsfunction createApplication() &#123; // typeof app === 'function'ï¼ŒåŒæ—¶å®ƒèº«ä¸Šè¿˜ç»‘å®šç€æ— æ•°å±æ€§å’Œæ–¹æ³• var app = function(req, res, next) &#123; app.handle(req, res, next); &#125;; // appåŒæ—¶ç»§æ‰¿äº†äº‹ä»¶ç›‘å¬/è§¦å‘æœºåˆ¶å’Œapplication.jsä¸­çš„å„ç§æ–¹æ³• mixin(app, EventEmitter.prototype, false); mixin(app, proto, false); // æ­¤å¤„æš´éœ²äº†requestå’Œresponseä¸¤ä¸ªç±» app.request = Object.create(req, &#123; ... &#125;); app.response = Object.create(res, &#123; ... &#125;); // è°ƒç”¨application.jsä¸­çš„initæ–¹æ³•ï¼Œä¸»è¦è°ƒç”¨çš„æ˜¯defaultConfigurationæ–¹æ³• app.init(); return app;&#125;// è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯exportså’Œmodule.exportsçš„ä¸åŒï¼šå½“module.exportsè¢«èµ‹å€¼åï¼Œexportså°±ä¸åŒäºmodule.exportsäº†ï¼Œæ‰€ä»¥éœ€è¦è¿™ä¹ˆåšï¼›å½“ç„¶ä¹Ÿå¯ä»¥åªç”¨module.exportsï¼›exports = module.exports = createApplication; å¯ä»¥çœ‹å‡ºï¼Œè°ƒç”¨express()è¿”å›çš„appå…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨app.listen()å…¶å®æ‰§è¡Œçš„æ˜¯http.createServer(app).listen()ã€‚å› æ­¤ï¼Œappå…¶å®å°±æ˜¯ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ï¼Œä½œä¸ºhttp.createServerçš„å‚æ•°ã€‚è€Œexpresså…¶å®æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆè¯·æ±‚å¤„ç†å‡½æ•°ã€‚ ä¸­é—´ä»¶ An Express application is essentially a series of middleware calls.ä¸€ä¸ªExpressåº”ç”¨å®é™…ä¸Šå°±æ˜¯ä¸€ç³»åˆ—ä¸­é—´ä»¶çš„è°ƒç”¨ã€‚ ä¸­é—´ä»¶å¤§è‡´å¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ™®é€šä¸­é—´ä»¶ï¼Œé€šè¿‡ app.use(&#39;/user&#39;) æ–¹æ³•è¿›è¡Œæ³¨å†Œï¼Œè¯¥æ–¹æ³•ä¸­çš„è·¯å¾„æ˜¯åŒ¹é…æ‰€æœ‰ä»¥ /user å¼€å¤´çš„è·¯å¾„ï¼›å¦å¤–ä¸€ç§æ˜¯è·¯ç”±ä¸­é—´ä»¶ï¼Œé€šè¿‡ app.METHOD() æ–¹æ³•è¿›è¡Œæ³¨å†Œï¼Œè¿™ç§æ–¹å¼ç²¾ç¡®åŒ¹é…è·¯å¾„ï¼Œä¸”åªèƒ½å¤„ç†ç¡®å®šè¯·æ±‚æ–¹æ³•çš„è¯·æ±‚ã€‚ é’ˆå¯¹app.useéƒ¨åˆ†çš„ä»£ç å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546app.use = function use(fn) &#123; var offset = 0; // é»˜è®¤è®¾ç½®è·¯å¾„ä¸ºæ ¹è·¯å¾„ï¼ŒåŒæ—¶åˆ¤æ–­ä¸­é—´ä»¶æ˜¯æ–¹æ³•è¿˜æ˜¯æ–¹æ³•æ‰€åœ¨è·¯å¾„ var path = '/'; if (typeof fn !== 'function') &#123; var arg = fn; while (Array.isArray(arg) &amp;&amp; arg.length !== 0) &#123; arg = arg[0]; &#125; if (typeof arg !== 'function') &#123; offset = 1; path = fn; &#125; &#125; // routeråˆå§‹åŒ– this.lazyrouter(); var router = this._router; var fns = flatten(slice.call(arguments, offset)); fns.forEach(function (fn) &#123; // non-express app if (!fn || !fn.handle || !fn.set) &#123; return router.use(path, fn); &#125; debug('.use app under %s', path); fn.mountpath = path; fn.parent = this; // restore .app property on req and res router.use(path, function mounted_app(req, res, next) &#123; var orig = req.app; fn.handle(req, res, function (err) &#123; setPrototypeOf(req, orig.request) setPrototypeOf(res, orig.response) next(err); &#125;); &#125;); // mounted an app fn.emit('mount', this); &#125;, this); return this;&#125;; é’ˆå¯¹app.METHODSçš„ä»£ç å¦‚ä¸‹ï¼š1234567891011121314methods.forEach(function(method)&#123; app[method] = function(path)&#123; if (method === 'get' &amp;&amp; arguments.length === 1) &#123; // app.get(setting) return this.set(path); &#125; // è·¯ç”±åˆå§‹åŒ– this.lazyrouter(); var route = this._router.route(path); route[method].apply(route, slice.call(arguments, 1)); return this; &#125;;&#125;); è·¯ç”±è¯¦è§£åœ¨ä¸Šé¢ä¸¤ç§ä¸­é—´ä»¶çš„å®ç°ä»£ç ä¸­ï¼Œéƒ½è°ƒç”¨äº† this.lazyrouter() æ–¹æ³•ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°è·¯ç”±çš„æ–¹æ³•éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯åˆå§‹åŒ–ä¸€ä¸ªåº”ç”¨çš„å†…éƒ¨è·¯ç”±ã€‚1234567891011app.lazyrouter = function lazyrouter() &#123; if (!this._router) &#123; // ç”Ÿæˆä¸€ä¸ªè·¯ç”±å®ä¾‹ this._router = new Router(&#123; caseSensitive: this.enabled('case sensitive routing'), strict: this.enabled('strict routing') &#125;); this._router.use(query(this.get('query parser fn'))); this._router.use(middleware.init(this)); &#125;&#125;; é’ˆå¯¹ç¬¬ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼Œå¯ä»¥çœ‹ä¸‹å…·ä½“è°ƒç”¨äº†å“ªäº›æ–¹æ³•ï¼Œæœ€ç»ˆå®ç°äº†ä»€ä¹ˆé€»è¾‘ï¼š1234567this.get('query parser fn');// ä¸Šé¢çš„ get æ–¹æ³•åŒ app.getï¼Œå¯ä»¥åœ¨ methods.forEach å¾ªç¯å¤„ç†æ—¶ï¼Œå¦‚æœ get æ–¹æ³•çš„å…¥å‚é•¿åº¦ä¸º1æ—¶ï¼Œä¼šè°ƒç”¨ this.set(arg)// åœ¨setæ–¹æ³•ä¸­ï¼Œæœ‰é’ˆå¯¹ 'query parser' çš„å¤„ç†// æœ€ç»ˆï¼Œquery æ–¹æ³•å®ç°äº†å°† req.query è¿›è¡Œ querystring.parse çš„ä¸€ä¸ªè§£æè¿‡ç¨‹case 'query parser': this.set('query parser fn', compileQueryParser(val)); break; é’ˆå¯¹ç¬¬äºŒä¸ªé»˜è®¤è·¯ç”± initï¼Œæ˜¯ç»™ app ä¸Šçš„æš´éœ²å‡ºçš„ reqã€res ç»§æ‰¿ node åŸç”Ÿçš„ request å’Œ response çš„ä¸€äº›å±æ€§ã€‚ ä¹‹æ‰€ä»¥ä¸åœ¨ defaultConfiguration æ–¹æ³•ä¸­è¿›è¡Œè¿™ä¸€æ­¥è·¯ç”±çš„åˆå§‹åŒ–ï¼ŒåŸå› åœ¨äºè®¾ç½®è·¯ç”±çš„ç›¸å…³å‚æ•°éœ€è¦è°ƒç”¨app.setæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜æ˜¾éœ€è¦æœ‰appå®ä¾‹ï¼Œå¦‚æœåœ¨è·å–appå®ä¾‹çš„æ—¶å€™å°±åˆå§‹åŒ–äº†ä¸€ä¸ªè·¯ç”±ï¼Œè¿™ä¸ªè·¯ç”±çš„å‚æ•°å°±æ²¡åŠæ³•é…ç½®äº†ã€‚å› æ­¤ï¼Œåœ¨è·å–appå®ä¾‹åï¼Œå¿…é¡»å…ˆå¯¹è·¯ç”±å‚æ•°è¿›è¡Œé…ç½®ï¼Œç„¶åå†è°ƒç”¨å¯¹åº”çš„app.useç­‰æ–¹æ³•ã€‚ app.Methodsæˆ‘ä»¬å…ˆä»¥ app.get ä¸ºä¾‹ï¼Œé€šè¿‡æ–­ç‚¹è°ƒè¯•çš„æ–¹å¼æ¥æŸ¥çœ‹ app.get è¿™ç§è·¯ç”±çš„ _router å¯¹è±¡æ˜¯ä»€ä¹ˆç»“æ„ã€‚ ä¸Šé¢çš„æˆªå›¾æ˜¯å½“æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ª express å®ä¾‹ï¼Œå¹¶è®¾ç½®äº†ä¸€ä¸ª app.get() çš„è·¯ç”±åï¼Œåœ¨ app.listen å¤„æ·»åŠ æ–­ç‚¹è¿›è¡Œè°ƒè¯•æ—¶çš„ app å®ä¾‹çš„å±æ€§ã€‚å¯ä»¥çœ‹åˆ°åœ¨ app._router ä¸­æœ‰ä¸€ä¸ª stackï¼Œé‡Œé¢æŒ‰é¡ºå­˜æ”¾ç€ä¸‰ä¸ª layer å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯åˆå§‹åŒ–æ—¶çš„ query å’Œ init ä¸¤ä¸ªè·¯ç”±ï¼Œå’Œç¬¬ä¸‰ä¸ªåˆ™æ˜¯æˆ‘ä»¬æ‰€è®¾ç½®çš„ get è·¯ç”±ã€‚æ¯ä¸€ä¸ª layer ä¸­åŒ…å«è·¯ç”±å¤„ç†çš„å›è°ƒå‡½æ•° handleï¼Œè·¯ç”±å¯¹è±¡ route&lt;Route&gt;ï¼Œè¯¥å¯¹è±¡ä¸­è¿˜åŒ…å«ä¸€ä¸ªå­˜æœ‰ Layer å¯¹è±¡çš„æ ˆï¼ˆstack)ï¼Œå°±å’Œ app._router.stack ç›¸åŒã€‚ æ ¹æ®ä¸Šé¢å¯¹äº app.get è¿™ç§è·¯ç”±çš„ç»“æ„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçŒœæƒ³å®ƒçš„å®ç°æµç¨‹ï¼š é¦–å…ˆæ ¹æ®ä¼ å…¥çš„è·¯å¾„å°è£…ä¸€ä¸ªRouteå¯¹è±¡ï¼Œå†å¯¹ä¼ å…¥çš„å›è°ƒå‡½æ•°å°è£…æˆLayerå¯¹è±¡ï¼Œæ¥ç€æŠŠè¿™ä¸ªLayerå¯¹è±¡pushåˆ°Route.stacké‡Œé¢å» å†åˆ›å»ºä¸€ä¸ªé»˜è®¤Layer(è·Ÿapp.useé‡Œé¢Layerçš„åŒçº§)ï¼ŒæŠŠæ­¥éª¤ä¸€ä¸­çš„RouteæŒ‚åˆ°è¿™ä¸ªLayer.routeå±æ€§ä¸Šé¢ï¼Œè€Œè¿™ä¸ªLayerå¯¹è±¡ï¼Œä¼šè¢«pushåˆ°app._router.stacké‡Œé¢ app.useæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ app.use è¿™ç§è·¯ç”±åˆæœ‰ä»€ä¹ˆä¸åŒã€‚ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ç§è·¯ç”±ä¸­ï¼Œé™¤äº† query å’Œ init ä¸¤ä¸ªåˆå§‹åŒ–è·¯ç”±çš„æ–¹æ³•å¤–ï¼Œç¬¬ä¸‰ä¸ªçœŸæ­£çš„å›è°ƒæ–¹æ³•è¢«å°è£…æˆçš„ Layer å¯¹è±¡ä¸­ï¼Œroute å±æ€§çš„å€¼ä¸º undefinedã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŒœæƒ³ï¼šåœ¨ app.use è¿™ç§è·¯ç”±é‡Œï¼Œä¼ å…¥çš„å‚æ•°ï¼ˆè·¯å¾„ã€å›è°ƒå‡½æ•°ï¼‰ä¼šè¢«å°è£…æˆ Layer å¯¹è±¡ï¼ˆå…¶ä¸­ route å±æ€§ä¸º undefinedï¼‰ï¼Œå‹å…¥ app._router.stack æ ˆä¸­ã€‚ ä¸¤ç§è·¯ç”±çš„æºç å®ç°æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡æºç æ¥åˆ†ææˆ‘ä»¬å†™çš„ app.use(&#39;/main&#39;, someFun()) æ˜¯å¦‚ä½•æˆä¸ºä¸€ä¸ª layer å¯¹è±¡å¹¶å‹å…¥ app._router çš„è·¯ç”±æ ˆä¸­çš„ã€‚ é¦–å…ˆæ¥çœ‹ app.useï¼š 123456789101112131415161718app.use = function use(fn) &#123; var path = '/'; // è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„è·¯ç”±æ–¹æ³•è·¯å¾„ // ... // è®¾ç½®è·¯ç”±ï¼ŒåŒæ ·ä¹Ÿæ˜¯ç”±lazyrouterè¿›è¡Œè·¯ç”±å¯¹è±¡çš„åˆå§‹åŒ–ï¼šthis._router = new Router(&#123;&#125;) this.lazyrouter(); var router = this._router; fns.forEach(function (fn) &#123; // router.useæ˜¯æ¥ä¸‹æ¥é‡ç‚¹è¦çœ‹çš„æ–¹æ³• router.use(path, function mounted_app(req, res, next) &#123; // ... &#125;); &#125;); // ... &#125;, this); return this;&#125;; æ¥ä¸‹æ¥çœ‹ Router å¯¹è±¡çš„ use æ–¹æ³•å®ç°ï¼š 1234567891011121314151617proto.use = function use(fn) &#123; var path = '/'; // ... var callbacks = flatten(slice.call(arguments, offset)); for (var i = 0; i &lt; callbacks.length; i++) &#123; var fn = callbacks[i]; // é’ˆå¯¹ä¼ å…¥è·¯ç”±ä¸­çš„æ¯ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œéƒ½åŒ…è£…æˆä¸€ä¸ª Layer å¯¹è±¡å¹¶å‹å…¥ var layer = new Layer(path, &#123; sensitive: this.caseSensitive, strict: false, end: false &#125;, fn); layer.route = undefined; this.stack.push(layer); &#125; return this;&#125;; ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸æˆ‘ä»¬çš„çŒœæƒ³ä¸€è‡´ï¼Œapp.use è¿™ç§è·¯ç”±çš„å®ç°ï¼Œæ˜¯å°†ä¼ å…¥çš„ä¸€ä¸ªä¸ªè·¯å¾„æˆ–å›è°ƒæ–¹æ³•ç­‰å‚æ•°å°è£…æˆ Layer å¯¹è±¡å‹å…¥ _router.stack æ ˆä¸­ã€‚ ç„¶åæ¥çœ‹ app.get è¿™ç§è·¯ç”±çš„ä»£ç å®ç°ï¼š 1234567891011121314// methods ä¸­åŒ…å«å„ç§è¯·æ±‚ç±»å‹ç­‰ï¼Œget å°±åŒ…å«åœ¨å…¶ä¸­methods.forEach(function(method)&#123; app[method] = function(path)&#123; if (method === 'get' &amp;&amp; arguments.length === 1) &#123; // app.get(setting) return this.set(path); &#125; this.lazyrouter(); // è·¯ç”±å¯¹è±¡ Router åˆå§‹åŒ– var route = this._router.route(path); route[method].apply(route, slice.call(arguments, 1)); return this; &#125;;&#125;); ä¸Šé¢ä»£ç ä¸­æœ€ç»ˆè¿”å›çš„æ˜¯ appï¼Œé‚£ä¹ˆè¿™ç«¯ä»£ç å¯¹ app è¿›è¡Œäº†ä»€ä¹ˆæ ·çš„æ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†ç›®å…‰èšç„¦åœ¨ route[method].apply() è¿™è¡Œä»£ç ä¸Šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ route åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚this._router.route çš„ä»£ç å®ç°ï¼š 1234567891011121314proto.route = function route(path) &#123; var route = new Route(path); var layer = new Layer(path, &#123; sensitive: this.caseSensitive, strict: this.strict, end: true &#125;, route.dispatch.bind(route)); layer.route = route; this.stack.push(layer); return route;&#125;; è¿™é‡Œå¯ä»¥çœ‹åˆ°è¿”å›çš„ route æ˜¯ä¸€ä¸ª Route å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­å°†å‚æ•°å°è£…æˆäº† Layer å¯¹è±¡æ¨å…¥äº† app._router.stack ä¸­ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ Route å¯¹è±¡ä¸­çš„ä¸€äº›å®ç°ä»£ç ï¼š 1234567891011121314151617181920212223function Route(path) &#123; // Routeå¯¹è±¡åˆå§‹åŒ–æ—¶æ·»åŠ äº†ä¸€ä¸ªç©ºæ•°ç»„stackå±æ€§ this.path = path; this.stack = []; this.methods = &#123;&#125;;&#125;// å¯¹äºapp.METHODSè¿™ç§è·¯ç”±ï¼Œå°†è·¯ç”±å‚æ•°ï¼ˆè·¯å¾„ã€å›è°ƒæ–¹æ³•ï¼‰åŒ…è£…æˆLayerå¯¹è±¡å‹å…¥Route.stackä¸­methods.forEach(function(method)&#123; Route.prototype[method] = function()&#123; var handles = flatten(slice.call(arguments)); for (var i = 0; i &lt; handles.length; i++) &#123; // ... var layer = Layer('/', &#123;&#125;, handle); layer.method = method; this.methods[method] = true; this.stack.push(layer); &#125; // ... return this; &#125;;&#125;); è‡³æ­¤ï¼Œåœ¨è°ƒç”¨ route[method].apply() æ—¶å°±ä¼šä¸º app.METHODS è¿™ç§ç±»å‹çš„è·¯ç”±çš„ Layer ä¸­æ·»åŠ  route&lt;Route&gt; å±æ€§ã€‚","categories":[{"name":"SourceCodeReading","slug":"SourceCodeReading","permalink":"http://keefe.wang/categories/SourceCodeReading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"æºç å­¦ä¹ ","slug":"æºç å­¦ä¹ ","permalink":"http://keefe.wang/tags/æºç å­¦ä¹ /"},{"name":"NodeJS","slug":"NodeJS","permalink":"http://keefe.wang/tags/NodeJS/"},{"name":"Express","slug":"Express","permalink":"http://keefe.wang/tags/Express/"}]},{"title":"JavaScriptæ¨¡å—åŒ–","slug":"2020-01-12-Javascript-module-history","date":"2020-01-12T04:30:00.000Z","updated":"2020-10-20T09:36:13.923Z","comments":true,"path":"2020/01/12/2020-01-12-Javascript-module-history.html","link":"","permalink":"http://keefe.wang/2020/01/12/2020-01-12-Javascript-module-history.html","excerpt":"","text":"åè¯å®šä¹‰å…ˆè¡Œæ¨¡å—åŒ–ä¸»è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š ä»£ç åˆ†ç¦» ä¸åŒæ¨¡å—é—´çš„ä¾èµ–å®šä¹‰ ä»£ç åˆ°æ‰§è¡Œç¯å¢ƒçš„ä¼ é€’ èƒ½å¤Ÿè§£å†³å…¶ä¸­ä¸€ä¸¤ä¸ªç‚¹çš„è§£å†³æ–¹æ¡ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ¨¡å¼â€ï¼Œèƒ½å¤Ÿè§£å†³å…¨éƒ¨ä¸‰ä¸ªé—®é¢˜çš„æ–¹æ¡ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ¨¡å—ç³»ç»Ÿâ€ï¼› æˆ‘ä»¬å°†å°è£…å¥½çš„å¯¼å‡ºå®ä¾‹ï¼ˆå¯¹è±¡ã€æ–¹æ³•ç­‰ï¼‰å’Œå¼•å…¥çš„å®ä¾‹ç§°ä¸ºâ€œæ¨¡å—æ ¼å¼â€ï¼›ç”¨â€œåˆ†ç¦»ä¾èµ–å®šä¹‰ï¼ˆdetached dependency definitionsï¼Œå³ç”¨ä¸åŒæ–‡ä»¶å­˜å‚¨ä¸åŒæ–‡ä»¶ï¼‰â€æ¥æè¿°æ¨¡å—ç³»ç»Ÿä¸­å¯è¢«ä½¿ç”¨çš„ç‹¬ç«‹ä¾èµ–ã€‚ å…³äºæ¨¡å—åŒ–æ‰€è§£å†³çš„é—®é¢˜ å‘½åå†²çª åœ¨1995-1999å¹´é—´ï¼Œä½¿ç”¨varæ¥å®šä¹‰å…¨å±€å˜é‡æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œå› ä¸ºå½“æ—¶çš„JavaScriptå°±æ˜¯ç”¨æ¥ç¼–å†™è„šæœ¬å¤„ç†å°å¾®ä»»åŠ¡ï¼Œè€Œéšç€åº”ç”¨çš„ä»£ç é‡ä¸Šå‡ï¼Œå…¨å±€å˜é‡çš„ç¼ºç‚¹å°±è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œå› æ­¤æˆ‘ä»¬ç”šè‡³ä¸èƒ½å¼•ç”¨ç¬¬ä¸‰æ–¹è„šæœ¬ã€‚123456789101112131415// file greeting.jsvar helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;function writeHello(lang) &#123; document.write(helloInLang[lang]);&#125;// file hello.jsfunction writeHello() &#123; document.write('The script is broken');&#125; æ”¯æŒå¤§é‡ä»£ç ä»“åº“ ç”±äºç¼–å†™åº”ç”¨çš„ä»£ç é‡è¶Šæ¥è¶Šå¤§ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†ä»£ç åˆ†ä¸ºå¤šä¸ªè„šæœ¬æ–‡ä»¶é€ä¸€å¼•å…¥ï¼Œè¿™å¯¼è‡´äº†è¶Šæ¥è¶Šå¤šæ•°é‡çš„è„šæœ¬æ–‡ä»¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç»´æŠ¤ï¼Œè€Œä¸”è¿˜è¦è€ƒè™‘è„šæœ¬å¼•å…¥çš„é¡ºåºï¼è¿™çœŸæ˜¯å¤ªä»¤äººå¤´ç—›ï¼ Directly Defined Dependencies1999å¹´æå‡ºçš„é¦–æ¬¡å¯¹äºç‹¬ç«‹ä¾èµ–çš„æ¨¡å¼â€œç›´æ¥å®šä¹‰ä¾èµ–â€ã€‚è¯¥æ¨¡å¼æ˜¯ç”± Erik Arvidsson åœ¨1999å¹´æå‡ºã€‚ 123456789101112131415161718192021// file greeting.jsdojo.provide(\"app.greeting\");app.greeting.helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;app.greeting.sayHello = function (lang) &#123; return app.greeting.helloInLang[lang];&#125;;// file hello.jsdojo.provide(\"app.hello\");dojo.require('app.greeting');app.hello = function(x) &#123; document.write(app.greeting.sayHello('es'));&#125;; ä»£ç ä½¿ç”¨dojo 1.6ç¼–å†™ï¼Œå…¶ä¸­dojo.provideç”¨æ¥å®šä¹‰æ¨¡å—ï¼Œè·å–æ¨¡å—æ—¶éœ€è¦ä½¿ç”¨dojo.require å‘½åç©ºé—´æ¨¡å¼åœ¨JavaScriptä¸­ï¼Œå‡½æ•°æ˜¯first class citizensï¼Œæ„å‘³ç€å¯ä»¥è¢«èµ‹ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥è¢«å‡½æ•°è¿”å›ã€‚å‘½åç©ºé—´æ¨¡å¼æ˜¯ç”± Erik Arvidssonäº2002å¹´å‘æ˜çš„äº’è”ç½‘åº”ç”¨å¼€å‘å·¥å…·Bindowså¼€å§‹å½¢æˆã€‚è¯¥æ¨¡å¼ç±»ä¼¼äºï¼š 1234567891011121314// file app.jsvar app = &#123;&#125;;// file greeting.jsapp.helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;// file hello.jsapp.writeHello = function (lang) &#123; document.write(app.helloInLang[lang]);&#125;; å¯è§ï¼Œæ‰€æœ‰çš„é€»è¾‘å’Œæ•°æ®éƒ½è¢«æ”¾åœ¨äº†appå¯¹è±¡çš„å±æ€§ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šæ±¡æŸ“å…¶ä»–å…¨å±€å˜é‡ã€‚å°½ç®¡è¯¥æ¨¡å¼çœ‹ä¼¼è®©ä»£ç ç»„ç»‡æœ‰äº†ä¸€å®šçš„è§„å¾‹ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ä¸Šé¢çš„æ•°æ®å’Œé€»è¾‘ä»ç„¶æ²¡æœ‰è¢«éš”ç¦»ï¼Œæˆ‘ä»¬å¾ˆè½»æ˜“å°±å¯ä»¥ä¿®æ”¹è¿™äº›ä»£ç ã€‚ æ¨¡å—æ¨¡å¼æ¨¡å—æ¨¡å¼çš„ä¸»æ—¨æ˜¯å°†æ•°æ®å’Œé€»è¾‘ä»£ç æ”¾åœ¨é—­åŒ…ä¸­å¹¶æä¾›ä¸€äº›å…¬ç”¨æ–¹æ³•ä½œä¸ºå¯¹å¤–æ¥å£å¯¹è¿™äº›èµ„æºè¿›è¡Œè®¿é—®JavaScript Module Pattern: In-Depthã€‚ä¾‹å¦‚ï¼š 12345678910111213141516171819var greeting = (function () &#123; var module = &#123;&#125;; var helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!' &#125;; module.getHello = function (lang) &#123; return helloInLang[lang]; &#125;; module.writeHello = function (lang) &#123; document.write(module.getHello(lang)) &#125;; return module;&#125;()); è¿™ç§å°†æ•°æ®å’Œé€»è¾‘é—­åŒ…åœ¨ç«‹å³è°ƒç”¨æ–¹æ³•ä¸­çš„æ–¹å¼åœ¨2008å¹´Douglas Crockfordå‘è¡¨çš„ã€ŠJavaScript the Good Partsã€‹ä¸€ä¹¦ä¸­è¢«ç§°ä½œâ€œæ¨¡å—â€ã€‚ æ¨¡æ¿å®šä¹‰ä¾èµ–ï¼ˆTemplate Defined Dependencies)å½“æœ‰å¤šä¸ªscriptæ–‡ä»¶ä¾èµ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¨¡æ¿æ¥å°†è¿™äº›ä¾èµ–è¿›è¡Œé¡ºåºç®¡ç†ï¼š 1234567891011121314151617181920// file app.tmp.js/*borschik:include:../lib/main.js*//*borschik:include:../lib/helloInLang.js*//*borschik:include:../lib/writeHello.js*/// file main.jsvar app = &#123;&#125;;// file helloInLang.jsapp.helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;// file writeHello.jsapp.writeHello = function (lang) &#123; document.write(app.helloInLang[lang]);&#125;; æ³¨é‡Šå®šä¹‰ä¾èµ–1234567891011121314151617181920// file helloInLang.jsvar helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;// file sayHello.js/*! lazy require scripts/app/helloInLang.js */function sayHello(lang) &#123; return helloInLang[lang];&#125;// file hello.js/*! lazy require scripts/app/sayHello.js */document.write(sayHello('en')); è¿™ç§ä¾èµ–çš„å·¥ä½œæ–¹å¼æ˜¯ï¼šé¦–å…ˆä¸‹è½½è¿™äº›ä¾èµ–æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ–‡ä»¶å†…å®¹è§£æï¼Œè§£æåˆ°æœ‰ä¾èµ–å­˜åœ¨çš„æ³¨é‡Šæ—¶è¿­ä»£ä¸‹è½½ã€è§£æâ€¦â€¦ å¤–éƒ¨å®šä¹‰ä¾èµ–1234567891011121314151617181920212223// file deps.json&#123; \"files\": &#123; \"main.js\": [\"sayHello.js\"], \"sayHello.js\": [\"helloInLang.js\"], \"helloInLang.js\": [] &#125;&#125;// file helloInLang.jsvar helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;// file sayHello.jsfunction sayHello(lang) &#123; return helloInLang[lang];&#125;// file main.jsconsole.log(sayHello('en')); deps.jsonæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬å®šä¹‰æ‰€æœ‰ä¾èµ–çš„å¤–éƒ¨ä¸Šä¸‹æ–‡ä¾èµ–æ–‡ä»¶ã€‚å½“è¿è¡Œè¿™ä¸ªåº”ç”¨æ—¶ï¼ŒåŠ è½½å™¨ä¼šè·å–åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¾èµ–æŒ‰ç…§æ•°ç»„çš„æ­£ç¡®é¡ºåºè¿›è¡Œè¯»å–å’ŒåŠ è½½ã€‚lodashå°±æ˜¯ä½¿ç”¨çš„è¿™ç§æ–¹æ³•è¿›è¡Œä¾èµ–åŠ è½½çš„ã€‚ æ²™ç®±æ¨¡å¼123456789101112131415161718192021222324252627282930313233343536// file sandbox.jsfunction Sandbox(callback) &#123; var modules = []; for (var i in Sandbox.modules) &#123; modules.push(i); &#125; for (var i = 0; i &lt; modules.length; i++) &#123; this[modules[i]] = Sandbox.modules[modules[i]](); &#125; callback(this);&#125;// file greeting.jsSandbox.modules = Sandbox.modules || &#123;&#125;;Sandbox.modules.greeting = function () &#123; var helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!' &#125;; return &#123; sayHello: function (lang) &#123; return helloInLang[lang]; &#125; &#125;;&#125;;// file app.jsnew Sandbox(function(box) &#123; document.write(box.greeting.sayHello('es'));&#125;); è¯¥æ¨¡å¼çš„å…³é”®æ˜¯ä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„æ„é€ å‡½æ•°æ¥ä»£æ›¿å…¨å±€å¯¹è±¡ï¼Œä¾èµ–æ¨¡å—å¯ä»¥è¢«å®šä¹‰ä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„å±æ€§ã€‚ ä¾èµ–æ³¨å…¥12345678910111213141516171819// file greeting.jsangular.module('greeter', []) .value('greeting', &#123; helloInLang: &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!' &#125;, sayHello: function(lang) &#123; return this.helloInLang[lang]; &#125; &#125;);// file app.jsangular.module('app', ['greeter']) .controller('GreetingController', ['$scope', 'greeting', function($scope, greeting) &#123; $scope.phrase = greeting.sayHello('en'); &#125;]); CommonJS Modules1234567891011121314151617// file greeting.jsvar helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'&#125;;var sayHello = function (lang) &#123; return helloInLang[lang];&#125;module.exports.sayHello = sayHello;// file hello.jsvar sayHello = require('./lib/greeting').sayHello;var phrase = sayHello('en');console.log(phrase); CommonJSä½¿ç”¨requireå’Œmoduleä¸¤ä¸ªæ ‡å¿—æ¥è¡¨ç¤ºä¾èµ–çš„å¼•å…¥å’Œå¯¼å‡ºã€‚ AMD1234567891011121314151617181920// file lib/greeting.jsdefine(function() &#123; var helloInLang = &#123; en: 'Hello world!', es: 'Â¡Hola mundo!', ru: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!' &#125;; return &#123; sayHello: function (lang) &#123; return helloInLang[lang]; &#125; &#125;;&#125;);// file hello.jsdefine(['./lib/greeting'], function(greeting) &#123; var phrase = greeting.sayHello('en'); document.write(phrase);&#125;);","categories":[{"name":"Reading","slug":"Reading","permalink":"http://keefe.wang/categories/Reading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://keefe.wang/tags/è§„èŒƒ/"}]},{"title":"æ€æ ·åšä¸€ä¸ªPragmatic Programmer","slug":"2020-01-09-how-to-be-a-pragmatic-programmer","date":"2020-01-09T04:30:00.000Z","updated":"2020-10-20T10:00:20.894Z","comments":true,"path":"2020/01/09/2020-01-09-how-to-be-a-pragmatic-programmer.html","link":"","permalink":"http://keefe.wang/2020/01/09/2020-01-09-how-to-be-a-pragmatic-programmer.html","excerpt":"","text":"What maks a pragmatic programmer1.Early adopter/faster adapter: å–„äºå­¦ä¹ æ–°çš„æŠ€æœ¯å¹¶èƒ½å¤Ÿå°è¯•å°†å…¶é›†æˆåœ¨è‡ªå·±çš„çŸ¥è¯†åº“ä¸­;2.Inquisitiveï¼šå–„äºæé—®ã€ä¿æŒå¥½å¥‡å¿ƒï¼›3.Critical thinkerï¼šè¾©è¯åœ°çœ‹å¾…é—®é¢˜è€Œéä¸€å‘³æ¥å—å‰äººçš„è¯è¯­ï¼›4.Realisticï¼šå‘è§‰é—®é¢˜çš„æœ¬è´¨ï¼Œè®¤è¯†é—®é¢˜çš„éš¾åº¦å¹¶èƒ½ä¼°è®¡è§£å†³è¯¥é—®é¢˜çš„æ—¶é—´ï¼›5.Jack of all tradesï¼šèƒ½å¤Ÿè½¬ç§»é¢†åŸŸä¹‹åå¿«é€Ÿé€‚åº”ï¼Œé€šè¿‡æŒæ¡æ ¸å¿ƒåŸºç¡€çŸ¥è¯†ï¼›6.We who cut mere stones must always be envisioning cathedrals.7.æŒç»­ä»¥ä¸Šè¿‡ç¨‹ TIPsTip1.åœ¨ä¹ä½ æ‰€åšçš„äº‹æƒ…Tip2.ä¸æ–­æ€è€ƒæ‰€åšçš„äº‹æƒ…ï¼Œä¸æ–­ä»big pictureè¿›è¡Œæ€è€ƒTip3.æä¾›è§£å†³æ–¹æ¡ˆè€Œéå„ç§å€Ÿå£Tip4.â€œä¸ç•™ä¸€æ‰‡ç ´çª—â€ï¼Œä¸€æ—¦å‘ç°é—®é¢˜åŠæ—¶ä¿®å¤Tip5.åšé¡¹ç›®çš„å‚¬åŒ–å‰‚ï¼Œå¸å¼•èµ„æºåˆ°ä¸€ä¸ªå¯é¢„è§æˆåŠŸçš„é¡¹ç›®ä¸­Tip6.æ—¶åˆ»ç‰¢è®°â€œè“å›¾â€Tip7.å°†äº§å“è´¨é‡ä½œä¸ºéœ€æ±‚ä¹‹ä¸€è¿›è¡Œè€ƒé‡Tip8.å®šæœŸå¯¹çŸ¥è¯†è¿›è¡ŒæŠ•èµ„Tip9.æ‰¹åˆ¤åœ°çœ‹å¾…è‡ªå·±çš„æ‰€è§æ‰€é—» æŒç»­è¿›è¡ŒçŸ¥è¯†æŠ•èµ„1.å®šæœŸåœ°è¿›è¡ŒçŸ¥è¯†æŠ•èµ„2.æ³¨é‡çŸ¥è¯†çš„å¤šæ ·æ€§3.åœ¨2çš„åŸºç¡€ä¸Šæ³¨æ„æ§åˆ¶é£é™©4.åœ¨ä¸€ä¸ªæŠ€æœ¯è¿˜æœªæˆç†Ÿå‰è¿›è¡Œå­¦ä¹ 5.æ—¶å¸¸å¯¹çŸ¥è¯†åº“è¿›è¡Œreview e.g.1.ä¸€å¹´è‡³å°‘å­¦ä¹ ä¸€ç§æ–°çš„è¯­è¨€2.ä¸€ä¸ªå­£åº¦çœ‹ä¸€æœ¬æŠ€æœ¯ä¹¦ç±ï¼ˆç”šè‡³ä¸€ä¸ªæœˆã€å¯æ¶‰åŠéæŠ€æœ¯ä¾‹å¦‚ç”¨æˆ·ç­‰ï¼‰3.ä¸Šè¯¾4.å‚ä¸åˆ°ç”¨æˆ·ç¾¤ä½“ä¸­5.åœ¨ä¸åŒç¯å¢ƒä¸­è¿›è¡Œè¯•éªŒ6.è·Ÿä¸Šæ½®æµï¼šè®¢é˜…æ‚å¿—æˆ–æœŸåˆŠ","categories":[{"name":"Reading","slug":"Reading","permalink":"http://keefe.wang/categories/Reading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://keefe.wang/tags/è§„èŒƒ/"}]},{"title":"Clean Codeè§„èŒƒæ•´ç†","slug":"2019-12-21-clean-code-note","date":"2019-12-21T03:30:00.000Z","updated":"2020-10-20T09:29:42.058Z","comments":true,"path":"2019/12/21/2019-12-21-clean-code-note.html","link":"","permalink":"http://keefe.wang/2019/12/21/2019-12-21-clean-code-note.html","excerpt":"","text":"å˜é‡ï¼š1.å˜é‡åæœ‰æ„ä¹‰ 2.ä¸ä½¿ç”¨é­”æ³•æ•°å­— 3.å‚æ•°ç”¨å˜é‡è€Œä¸æ˜¯æ•°å­— 4.mappingä¸­çš„iteratorå˜é‡å‘½åæ¸…æ¥š 5.å±æ€§ä¸­ä¸è¦å‡ºç°ç±»å/å¯¹è±¡å 6.æ–¹æ³•å‚æ•°ä½¿ç”¨é»˜è®¤å€¼æ£€æŸ¥å‚æ•°æ˜¯å¦ä¸ºundefined æ–¹æ³•ï¼š1.ä½¿ç”¨ä¸€åˆ°ä¸¤ä¸ªå½¢å‚ï¼ˆæˆ–æ–¹æ³•å¤æ‚ã€ä½¿ç”¨å¯¹è±¡ç±»å‹å‚æ•°ã€å½¢å‚çš„è§£æ„èµ‹å€¼ï¼‰ 2.ä¸€ä¸ªæ–¹æ³•åº”è¯¥åªåšä¸€ä»¶äº‹ï¼ 3.æ–¹æ³•åè¦èƒ½è‡ªæˆ‘è§£é‡Š 4.å¦‚æœå‡ºç°é‡å¤çš„ä»£ç è¦ç²¾ç»ƒå’ŒæŠ½è±¡ 5.ä½¿ç”¨Object.assignç»™å¯¹è±¡èµ‹å€¼ 6.ï¼ˆå¦‚æœæ–¹æ³•ä¸­å‡ºç°flagï¼Œåº”å½“åˆ†æˆä¸¤ä¸ªæ–¹æ³•å¤„ç†ï¼‰ 7.å°½é‡é¿å…æ–¹æ³•çš„å‰¯ä½œç”¨ï¼ˆæ›´æ”¹å…¨å±€å˜é‡ã€å¤šä¸ªæ–¹æ³•å†™ä¸€ä¸ªæ–‡ä»¶ã€å…¬ç”¨ä¸€ä¸ªçŠ¶æ€ç­‰ï¼‰ 8.å¤„ç†æ•°ç»„ã€å¯¹è±¡æ—¶æœ€å¥½å¤„ç†å…¶å¤æœ¬ 9.ä¿®æ”¹åŸç”Ÿå¯¹è±¡å’Œæ–¹æ³•æœ€å¥½ä½¿ç”¨classæ–°å»º 10.å°½é‡ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ä»£æ›¿å‘½ä»¤å¼ç¼–ç¨‹ 11.å­˜åœ¨å¤šä¸ªåˆ¤æ–­æ¡ä»¶æ—¶ç”¨æ–¹æ³•æ¥åŒ…æ‹¬ï¼Œé¿å…ä½¿ç”¨éç±»å‹æ¡ä»¶ 12.é¿å…ä½¿ç”¨æ¡ä»¶è¯­å¥ï¼Œä½¿ç”¨å¤šæ€æ€§ï¼ˆclassï¼‰æ¥ä»£æ›¿ 13.é¿å…ç±»å‹åˆ¤æ–­ å¯¹è±¡ä¸æ•°æ®ç»“æ„1.ä½¿ç”¨classæ¥å®ç°ç»§æ‰¿ 2.ä½¿ç”¨é“¾å¼æ–¹æ³•è°ƒç”¨ 3.è°¨æ…ä½¿ç”¨ç»§æ‰¿ï¼ˆä»…åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µä½¿ç”¨ï¼‰ï¼š a.å…³ç³»ä¸ºis-aè€Œä¸æ˜¯has-açš„æ—¶å€™ b.åŸºç±»å¯ä»¥è¢«å¤ç”¨æ—¶ c.æƒ³é€šè¿‡æ›´æ”¹åŸºç±»æ¥è¿›è¡Œå…¨å±€å±æ€§çš„æ”¹å˜æ—¶ SOLIDåŸåˆ™1.SRPï¼ˆå•ä¸€èŒè´£ï¼‰ï¼šä¸€ä¸ªç±»è¦è¶³å¤Ÿå†…èšï¼Œè´Ÿè´£å°½é‡å•ä¸€çš„åŠŸèƒ½ï¼Œå‡å°‘ç±»çš„æ”¹åŠ¨ï¼› 2.OCPï¼ˆå¼€é—­åŸåˆ™ï¼‰ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ï¼› 3.LSPï¼ˆé‡Œå¼æ›¿æ¢ï¼‰ï¼šçˆ¶ç±»ç‰¹æ€§åœ¨å­ç±»ä¸­è¦å®Œå…¨ç»§æ‰¿æ— å˜åŒ–ï¼Œå³åœ¨çˆ¶ç±»å¯¹è±¡è¢«æ›¿æ¢ä¸ºå­ç±»å¯¹è±¡æ—¶æ— å½±å“ï¼› 4.ISPï¼ˆæ¥å£éš”ç¦»ï¼‰ï¼šä¸åŒæ¥å£ä¹‹é—´éœ€è¦è¿›è¡Œéš”ç¦»ï¼› 5.DIPï¼ˆä¾èµ–å€’ç½®ï¼‰ï¼šé«˜å±‚æ¨¡å—ä¸èƒ½ä¾èµ–åº•å±‚æ¨¡å—ï¼Œåº”éƒ½ä¾èµ–äºæŠ½è±¡ï¼› å¹¶å‘1.ç”¨Promisesï¼Œä¸ç”¨å›è°ƒå‡½æ•°callbacksï¼ˆç”¨async/awaitæ›´å¥½ï¼‰ é”™è¯¯å¤„ç†1.ä¸ç¡®å®šçš„ä»£ç éœ€è¦try...catch... 2.ä¸è¦å¿˜äº†catché‡Œçš„é”™è¯¯å¤„ç†ã€rejecté‡Œçš„é”™è¯¯å¤„ç† æ ¼å¼1.é©¼å³°ã€ä¸‹åˆ’çº¿ã€å¤§å°å†™éƒ½éœ€è¦ä¿æŒä¸€è‡´","categories":[{"name":"Reading","slug":"Reading","permalink":"http://keefe.wang/categories/Reading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"http://keefe.wang/tags/è§„èŒƒ/"}]},{"title":"æºç é˜…è¯» - Vueçš„æ•°æ®å“åº”å¼åŸç†","slug":"2019-12-01-Vue-source-code-reading-data-binding","date":"2019-12-01T02:00:00.000Z","updated":"2020-10-20T09:44:41.240Z","comments":true,"path":"2019/12/01/2019-12-01-Vue-source-code-reading-data-binding.html","link":"","permalink":"http://keefe.wang/2019/12/01/2019-12-01-Vue-source-code-reading-data-binding.html","excerpt":"","text":"ä»€ä¹ˆæ˜¯æ•°æ®å“åº”å¼ Vue.js ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³æ˜¯æ•°æ®é©±åŠ¨ã€‚æ‰€è°“æ•°æ®é©±åŠ¨ï¼Œæ˜¯æŒ‡è§†å›¾æ˜¯ç”±æ•°æ®é©±åŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬å¯¹è§†å›¾çš„ä¿®æ”¹ï¼Œä¸ä¼šç›´æ¥æ“ä½œ DOMï¼Œè€Œæ˜¯é€šè¿‡ä¿®æ”¹æ•°æ®ã€‚â€”â€”ã€ŠVue.jsæŠ€æœ¯æ­ç§˜ã€‹ æ²¡æœ‰åƒ Vue å’Œ React è¿™äº›å…·æœ‰æ•°æ®å“åº”å¼ç‰¹æ€§çš„å‰ç«¯æ¡†æ¶ä¹‹å‰ï¼Œæˆ‘ä»¬ä»æœåŠ¡ç«¯æä¾›è¿‡çš„æ¥å£è·å–åˆ°æ•°æ®è¦æ¸²æŸ“åœ¨ html é¡µé¢ä¸Šæ—¶ï¼ŒæŠ‘æˆ–æ˜¯éœ€è¦è·å–è¡¨å•çš„å€¼è¿›è¡Œè®¡ç®—å›æ˜¾åˆ°é¡µé¢ä¸Šæ—¶ï¼Œéƒ½éœ€è¦å»ºç«‹å¾ˆå¤š DOM äº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶è¿›è¡Œè®¸å¤šçš„ DOM æ“ä½œã€‚ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼šç”¨æˆ·åœ¨ html é¡µé¢çš„è¡¨å•ä¸­è¾“å…¥ä¸¤ä¸ªåŠ æ•° a å’Œ b ï¼Œè®¡ç®—å¾—åˆ°ä¸¤ä¸ªåŠ æ•°ä¹‹å’Œï¼Œå¹¶å±•ç¤ºåˆ°é¡µé¢ä¸Šã€‚è¿™æ—¶æˆ‘ä»¬éœ€è¦ç›‘å¬è¡¨å•ä¸­ a å’Œ b ä¸¤ä¸ªè¾“å…¥æ¡†çš„å˜åŒ–ï¼Œæ‹¿åˆ°å˜åŒ–å€¼ç›¸åŠ ç„¶åé€šè¿‡ä¿®æ”¹æŒ‡å®š id æˆ–è€… class çš„é€‰æ‹©å™¨å¯¹åº”çš„ DOM æ¥ä¿®æ”¹ä¸¤æ•°ä¹‹å’Œã€‚ä½†æ˜¯å½“è¾“å…¥è¡¨å•ä¸æ­¢ä¸¤ä¸ªæ—¶ï¼Œå°±ä¼šä»¤äººæ‰æ€¥ã€‚ è€Œ Vue çš„æ•°æ®å“åº”å¼å¤§å¤§åœ°ä¼˜åŒ–äº†è¿™ä¸€æ•´å¥—çš„æµç¨‹ã€‚é¢å¯¹å¤§é‡çš„ UI äº¤äº’å’Œæ•°æ®æ›´æ–°ï¼Œæ•°æ®å“åº”å¼è®©æˆ‘ä»¬åšåˆ°ä»å®¹ä¸è¿«â€”â€”æˆ‘ä»¬éœ€è¦å»äº†è§£æ•°æ®çš„æ”¹å˜æ˜¯æ€æ ·è¢«è§¦å‘ï¼Œæ›´æ–°è§¦å‘åçš„æ•°æ®æ”¹å˜åˆæ˜¯æ€æ ·åé¦ˆåˆ°è§†å›¾ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡å¯¹éƒ¨åˆ† Vue æºç çš„ç®€å•åˆ†æå’Œå­¦ä¹ æ¥æ·±å…¥äº†è§£ Vue ä¸­çš„æ•°æ®å“åº”å¼æ˜¯æ€æ ·å®ç°çš„ã€‚ æˆ‘ä»¬å°†è¿™ä¸€éƒ¨åˆ†çš„ä»£ç åˆ†æå¤§è‡´åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šè®©æ•°æ®å˜æˆå“åº”å¼ã€ä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°ã€‚ æ•°æ®å“åº”å¼çš„ä¸­å¿ƒæ€æƒ³ è¯¥åŸç†å›¾æºè‡ª Vue å®˜æ–¹æ•™ç¨‹çš„æ·±å…¥å“åº”å¼åŸç†ï¼Œè¿™å¼ å›¾å‘æˆ‘ä»¬å±•ç¤ºäº† Vue çš„æ•°æ®å“åº”å¼çš„ä¸­å¿ƒæ€æƒ³ã€‚ æˆ‘ä»¬å…ˆæ¥ä»‹ç»å›¾ä¸­çš„å››ä¸ªæ¨¡å—ï¼Œé»„è‰²éƒ¨åˆ†æ˜¯ Vue çš„æ¸²æŸ“æ–¹æ³•ï¼Œè§†å›¾åˆå§‹åŒ–å’Œè§†å›¾æ›´æ–°æ—¶éƒ½ä¼šè°ƒç”¨ vm._render æ–¹æ³•è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚æ¸²æŸ“æ—¶ä¸å¯é¿å…åœ°ä¼š touch åˆ°æ¯ä¸ªéœ€è¦å±•ç¤ºåˆ°è§†å›¾ä¸Šçš„æ•°æ®ï¼ˆç´«è‰²éƒ¨åˆ†ï¼‰ï¼Œè§¦å‘è¿™äº›æ•°æ®çš„ get æ–¹æ³•ä»è€Œæ”¶é›†åˆ°æœ¬æ¬¡æ¸²æŸ“çš„æ‰€æœ‰ä¾èµ–ã€‚æ”¶é›†ä¾èµ–å’Œæ›´æ–°æ´¾å‘éƒ½æ˜¯åŸºäºè“è‰²éƒ¨åˆ†çš„ Watcher è§‚å¯Ÿè€…ã€‚è€Œå½“æˆ‘ä»¬åœ¨ä¿®æ”¹è¿™äº›æ”¶é›†åˆ°ä¾èµ–çš„æ•°æ®æ—¶ï¼Œä¼šè§¦å‘æ•°æ®ä¸­çš„ set å±æ€§æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šä¿®æ”¹æ•°æ®çš„å€¼å¹¶ notify åˆ°ä¾èµ–åˆ°å®ƒçš„è§‚å¯Ÿè€…ï¼Œä»è€Œè§¦å‘è§†å›¾çš„é‡æ–°æ¸²æŸ“ã€‚ç»¿è‰²éƒ¨åˆ†æ˜¯æ¸²æŸ“è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ Virtual DOM Treeï¼Œè¿™æ£µæ ‘ä¸ä»…å…³ç³»åˆ°è§†å›¾æ¸²æŸ“ï¼Œæ›´æ˜¯ Vue ä¼˜åŒ–è§†å›¾æ›´æ–°è¿‡ç¨‹çš„åŸºç¡€ã€‚ è®©æ•°æ®å˜æˆå“åº”å¼åŸºæœ¬ä¸Šå¤§å®¶éƒ½äº†è§£ Vue çš„æ•°æ®å“åº”å¼åŸç†æ˜¯ç”± JSæ ‡å‡†å†…ç½®å¯¹è±¡æ–¹æ³• Object.defineProperty æ¥å®ç°çš„ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸å…¼å®¹IE8å’ŒFF22åŠä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨çš„ï¼Œæ‰€ä»¥ Vue ä¹Ÿåªèƒ½åœ¨è¿™äº›ç‰ˆæœ¬ä¹‹ä¸Šçš„æµè§ˆå™¨ä¸­æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆæ•°æ®å“åº”å¼ç”¨è¿™ä¸ªæ–¹æ³•ä¸ºä»€ä¹ˆå¯¹è±¡æ·»åŠ æˆ–ä¿®æ”¹äº†ä»€ä¹ˆå±æ€§å‘¢ï¼Ÿæˆ‘ä»¬ä» Vue çš„åˆå§‹åŒ–è®²èµ·ã€‚ Vue çš„åˆå§‹åŒ–12345678function Vue (options) &#123; // ... this._init(options)&#125;initMixin(Vue) stateMixin(Vue) // ...export default Vue åœ¨ src/core/index.js ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª Vue è¢«å¯¼å‡ºï¼Œè¿™ä¸ªVueæ˜¯åœ¨ src/core/instance/index ä¸­å®šä¹‰çš„ï¼ŒVue æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå‚æ•°æ˜¯optionsï¼Œæˆ‘ä»¬å¤§èƒ†çŒœæƒ³è¿™ä¸ª Vue å°±æ˜¯è¿›è¡Œ vue å®ä¾‹åŒ–çš„æ–¹æ³•ï¼Œè€Œ options å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„ dataã€computedã€methods ç­‰å±æ€§ã€‚è¿™ä¸ª Vue æ–¹æ³•ä¸­ä¸»è¦è°ƒç”¨äº† _init æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ initMixin æ–¹æ³•è°ƒç”¨æ—¶å®šä¹‰åœ¨ Vue åŸå‹ä¸Šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œ_init æ–¹æ³•ä¸­å¯¹å½“å‰ä¼ å…¥çš„ options è¿›è¡Œäº†ä¸€äº›å¤„ç†ï¼ˆä¸»è¦æ˜¯åˆ¤æ–­å½“å‰å®ä¾‹åŒ–çš„æ˜¯å¦ä¸ºç»„ä»¶ï¼Œä½¿ç”¨ mergeOptions æ–¹æ³•å¯¹ options è¿›è¡ŒåŠ å·¥ï¼Œæ­¤å¤„ä¸åšèµ˜è¿°ï¼‰ï¼Œç„¶ååˆè°ƒç”¨äº†ä¸€ç³»åˆ—æ–¹æ³•è¿›è¡Œäº†ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ã€æ¸²æŸ“å™¨çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬ä¸»è¦æ¥å…³æ³¨ initState è¿™ä¸ªæ–¹æ³•ï¼ˆsrc/core/instance/state.jsï¼‰:12345678910111213141516export function initState (vm: Component) &#123; vm._watchers = [] const opts = vm.$options if (opts.props) initProps(vm, opts.props) if (opts.methods) initMethods(vm, opts.methods) // a* if (opts.data) &#123; initData(vm) &#125; else &#123; observe(vm._data = &#123;&#125;, true /* asRootData */) &#125; if (opts.computed) initComputed(vm, opts.computed) if (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123; initWatch(vm, opts.watch) &#125;&#125; å°† Vue å®ä¾‹ä¸Šçš„ data å“åº”å¼åŒ–ä¸Šé¢çš„æ–¹æ³•ä¸­å¯¹propsã€methodsã€dataã€computedå’Œwatchè¿›è¡Œäº†åˆå§‹åŒ–ï¼Œè¿™äº›éƒ½æ˜¯Vueå®ä¾‹åŒ–æ–¹æ³•ä¸­ä¼ å…¥å‚æ•°optionså¯¹è±¡çš„ä¸€äº›å±æ€§ï¼Œè¿™äº›å±æ€§éƒ½éœ€è¦è¢«å“åº”å¼åŒ–ã€‚è€Œé’ˆå¯¹äºdataçš„åˆå§‹åŒ–åˆ†äº†ä¸¤ç§æƒ…å†µ[a]ï¼Œä¸€ç§æ˜¯optionsä¸­æ²¡æœ‰dataå±æ€§çš„ï¼Œè¯¥æ–¹æ³•ä¼šç»™dataèµ‹å€¼ä¸€ä¸ªç©ºå¯¹è±¡å¹¶è¿›è¡Œobserveï¼ˆè¯¥æ–¹æ³•ä¹‹åæˆ‘ä»¬ä¼šè¯¦ç»†è®²è¿°ï¼‰ï¼Œå¦‚æœæœ‰dataå±æ€§ï¼Œåˆ™è°ƒç”¨[*initData](https://github.com/DQFE/vue/blob/dev/src/core/instance/state.js#L112)æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚æˆ‘ä»¬ä¸»è¦é€šè¿‡å¯¹dataå±æ€§çš„åˆå§‹åŒ–æ¥åˆ†æVueä¸­çš„æ•°æ®å“åº”å¼åŸç†ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243function initData (vm: Component) &#123; let data = vm.$options.data // a* data = vm._data = typeof data === 'function' ? getData(data, vm) : data || &#123;&#125; if (!isPlainObject(data)) &#123; data = &#123;&#125; process.env.NODE_ENV !== 'production' &amp;&amp; warn( 'data functions should return an object:\\n' + 'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function', vm ) &#125; // b* const keys = Object.keys(data) const props = vm.$options.props const methods = vm.$options.methods let i = keys.length while (i--) &#123; // c* const key = keys[i] if (process.env.NODE_ENV !== 'production') &#123; if (methods &amp;&amp; hasOwn(methods, key)) &#123; warn( `Method \"$&#123;key&#125;\" has already been defined as a data property.`, vm ) &#125; &#125; if (props &amp;&amp; hasOwn(props, key)) &#123; process.env.NODE_ENV !== 'production' &amp;&amp; warn( `The data property \"$&#123;key&#125;\" is already declared as a prop. ` + `Use prop default value instead.`, vm ) &#125; else if (!isReserved(key)) &#123; proxy(vm, `_data`, key) &#125; &#125; // d* observe(data, true)&#125; initData æ–¹æ³•å¯¹ options ä¸­çš„ data è¿›è¡Œå¤„ç†ï¼Œä¸»è¦æ˜¯æœ‰ä¸¤ä¸ªç›®çš„: ä¸€æ–¹é¢å°† data ä»£ç†åˆ° Vue å®ä¾‹ä¸Šï¼ŒåŒæ—¶æ£€æŸ¥ data ä¸­æ˜¯å¦ä½¿ç”¨äº† Vue ä¸­çš„ä¿ç•™å­—ã€æ˜¯å¦ä¸ propsã€methods å±æ€§ä¸­çš„æ•°æ®åŒå ä½¿ç”¨ observe æ–¹æ³•å°†dataä¸­çš„å±æ€§å˜æˆå“åº”å¼çš„ ä¹‹å‰æˆ‘ä»¬æåˆ°åœ¨è°ƒç”¨ initState æ–¹æ³•ä¹‹å‰ä¼šæœ‰å¯¹ Vue å®ä¾‹åŒ–ä¼ å…¥çš„ options å‚æ•°è¿›è¡Œå¤„ç†çš„ç¯èŠ‚ï¼ˆmergeOptionsï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå°† data å¤„ç†æˆä¸€ä¸ªå‡½æ•°ï¼ˆä¾‹å¦‚æˆ‘ä»¬åœ¨ vue ç»„ä»¶ä¸­çš„ data å±æ€§ï¼‰ï¼Œä¹‹åä¼šè°ƒç”¨ callHook(vm, &#39;beforeCreate&#39;) æ–¹æ³•æ¥è§¦å‘ beforeCreate çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å¯èƒ½ä¼šå¯¹ data å±æ€§è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œæ‰€ä»¥æ–¹æ³•ä¸€å¼€å§‹ä¼šå¯¹ data ç»Ÿä¸€åšå¤„ç†ä½¿å…¶æˆä¸ºä¸€ä¸ªfunction[a*]ã€‚ æ¥ä¸‹æ¥ä¼šå¯¹ data ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®è¿›è¡Œéå†[b]ï¼Œéå†è¿‡ç¨‹å°†ä¼šä½¿ç”¨ hasOwn(methods, key)ã€hasOwn(props, key)ã€!isReserved(key) æ–¹æ³•å¯¹è¯¥æ•°æ®æ˜¯å¦å ç”¨ä¿ç•™å­—ã€æ˜¯å¦ä¸ props å’Œ methods ä¸­çš„å±æ€§é‡åè¿›è¡Œåˆ¤æ–­ï¼Œç„¶åè°ƒç”¨ proxy æ–¹æ³•å°†å…¶ä»£ç†åˆ° Vue å®ä¾‹ä¸Šã€‚æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼š*å¦‚æœ data ä¸­çš„å±æ€§ä¸ propsã€methods ä¸­çš„å±æ€§é‡åï¼Œé‚£ä¹ˆåœ¨ Vue å®ä¾‹ä¸Šè°ƒç”¨è¿™ä¸ªå±æ€§æ—¶çš„ä¼˜å…ˆçº§é¡ºåºæ˜¯ props &gt; methods &gt; dataã€‚ æœ€åå¯¹æ¯ä¸€ä¸ª data ä¸­çš„å±æ€§è°ƒç”¨ observe æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„åŠŸèƒ½æ˜¯èµ‹äºˆ data ä¸­çš„å±æ€§å¯è¢«ç›‘æµ‹çš„ç‰¹æ€§ã€‚è¿™ä¸ªæ–¹æ³•å’Œå…¶ä¸­ä½¿ç”¨åˆ°çš„ Observe ç±»æ˜¯åœ¨src/core/observer/index.jsæ–‡ä»¶ä¸­ï¼Œobserve æ–¹æ³•ä¸»è¦æ˜¯è°ƒç”¨Observerç±»æ„é€ æ–¹æ³•ï¼Œå°†æ¯ä¸€ä¸ª dataä¸­çš„ value å˜æˆå¯è§‚å¯Ÿã€å“åº”å¼çš„ï¼š1234567891011121314constructor (value: any) &#123; this.value = value this.dep = new Dep() this.vmCount = 0 def(value, '__ob__', this) if (Array.isArray(value)) &#123; //... this.observeArray(value) &#125; else &#123; this.walk(value) &#125; &#125; å¯ä»¥çœ‹åˆ°è¯¥æ„é€ å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªç›®çš„ï¼š é’ˆå¯¹å½“å‰çš„æ•°æ®å¯¹è±¡æ–°å»ºä¸€ä¸ªè®¢é˜…å™¨ï¼› ä¸ºæ¯ä¸ªæ•°æ®çš„valueéƒ½æ·»åŠ ä¸€ä¸ªobå±æ€§ï¼Œè¯¥å±æ€§ä¸å¯æšä¸¾å¹¶æŒ‡å‘è‡ªèº«ï¼› é’ˆå¯¹æ•°ç»„ç±»å‹çš„æ•°æ®è¿›è¡Œå•ç‹¬å¤„ç†ï¼ˆåŒ…æ‹¬èµ‹äºˆå…¶æ•°ç»„çš„å±æ€§å’Œæ–¹æ³•ï¼Œä»¥åŠ observeArray è¿›è¡Œçš„æ•°ç»„ç±»å‹æ•°æ®çš„å“åº”å¼ï¼‰ï¼› this.walk(value)ï¼Œéå†å¯¹è±¡çš„ key è°ƒç”¨ defineReactive æ–¹æ³•ï¼› defineReactiveæ˜¯çœŸæ­£ä¸ºæ•°æ®æ·»åŠ  get å’Œ set å±æ€§æ–¹æ³•çš„æ–¹æ³•ï¼Œå®ƒå°† data ä¸­çš„æ•°æ®å®šä¹‰ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå¹¶ç»™è¯¥å¯¹è±¡è®¾ç½® get å’Œ set å±æ€§æ–¹æ³•ï¼Œå…¶ä¸­ get æ–¹æ³•æ˜¯å¯¹ä¾èµ–è¿›è¡Œæ”¶é›†ï¼Œ set æ–¹æ³•æ˜¯å½“æ•°æ®æ”¹å˜æ—¶é€šçŸ¥ Watcher æ´¾å‘æ›´æ–°ã€‚ ä¾èµ–æ”¶é›†ä¾èµ–æ”¶é›†çš„åŸç†æ˜¯ï¼šå½“è§†å›¾è¢«æ¸²æŸ“æ—¶ï¼Œä¼šè§¦å‘æ¸²æŸ“ä¸­æ‰€ä½¿ç”¨åˆ°çš„æ•°æ®çš„ get å±æ€§æ–¹æ³•ï¼Œé€šè¿‡ get æ–¹æ³•è¿›è¡Œä¾èµ–æ”¶é›†ã€‚ å…¶çœŸå®çš„é€»è¾‘æˆ‘ä»¬ä¸¾ä¾‹æ¥è¯´æ˜ï¼šå½“å‰æ­£åœ¨æ¸²æŸ“ç»„ä»¶ ComponentAï¼Œä¼šå°†å½“å‰å…¨å±€å”¯ä¸€çš„ç›‘å¬å™¨ç½®ä¸ºè¿™ä¸ª Watcherï¼Œè¿™ä¸ªç»„ä»¶ä¸­ä½¿ç”¨åˆ°äº†æ•°æ® data () { return { a: b + 1} }ï¼Œæ­¤æ—¶è§¦å‘bçš„ getter ä¼šå°†å½“å‰çš„ watcher æ·»åŠ åˆ°bçš„è®¢é˜…è€…åˆ—è¡¨ subs ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœ ComponentA ä¾èµ– bï¼Œåˆ™å°†è¯¥ç»„ä»¶çš„æ¸²æŸ“ Watcher ä½œä¸ºè®¢é˜…è€…åŠ å…¥bçš„è®¢é˜…è€…åˆ—è¡¨ä¸­ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸‹ get å±æ€§æ–¹æ³•ï¼š12345678910111213get: function reactiveGetter () &#123; const value = getter ? getter.call(obj) : val if (Dep.target) &#123; dep.depend() if (childOb) &#123; childOb.dep.depend() if (Array.isArray(value)) &#123; dependArray(value) &#125; &#125; &#125; return value&#125; Dep - è®¢é˜…å™¨æ•°æ®å¯¹è±¡ä¸­çš„ get æ–¹æ³•ä¸»è¦ä½¿ç”¨ depend æ–¹æ³•è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œè¯¥æ–¹æ³•æ˜¯ Dep ç±»ä¸­çš„å±æ€§æ–¹æ³•ï¼Œç»§ç»­æ¥çœ‹ Dep ç±»æ˜¯æ€æ ·å®ç°çš„ï¼š123456789101112131415161718192021222324252627282930313233export default class Dep &#123; // a* static target: ?Watcher; id: number; subs: Array&lt;Watcher&gt;; constructor () &#123; this.id = uid++ this.subs = [] &#125; addSub (sub: Watcher) &#123; this.subs.push(sub) &#125; depend () &#123; if (Dep.target) &#123; Dep.target.addDep(this) &#125; &#125;&#125;Dep.target = nullconst targetStack = []export function pushTarget (target: ?Watcher) &#123; targetStack.push(target) Dep.target = target&#125;export function popTarget () &#123; targetStack.pop() Dep.target = targetStack[targetStack.length - 1]&#125; Dep ç±»ä¸­æœ‰ä¸‰ä¸ªå±æ€§ï¼štargetã€id å’Œ subsï¼Œåˆ†åˆ«è¡¨ç¤ºå½“å‰å…¨å±€å”¯ä¸€çš„é™æ€æ•°æ®ä¾èµ–çš„ç›‘å¬å™¨ Watcherã€è¯¥å±æ€§çš„ id ä»¥åŠè®¢é˜…è¿™ä¸ªå±æ€§æ•°æ®çš„è®¢é˜…è€…åˆ—è¡¨[a*]ã€‚å¦å¤–è¿˜æä¾›äº†å°†è®¢é˜…è€…æ·»åŠ åˆ°è®¢é˜…è€…åˆ—è¡¨çš„ addSubæ–¹æ³•ã€ä»è®¢é˜…è€…åˆ—è¡¨åˆ é™¤è®¢é˜…è€…çš„ removeSub æ–¹æ³•ã€‚ Dep.target æ˜¯å½“å‰å…¨å±€å”¯ä¸€çš„è®¢é˜…è€…ï¼Œè¿™æ˜¯å› ä¸ºåŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªè®¢é˜…è€…è¢«å¤„ç†ã€‚target çš„æ„æ€å°±æ˜¯æŒ‡å½“å‰æ­£åœ¨å¤„ç†çš„ç›®æ ‡è®¢é˜…è€…ï¼Œè€Œè¿™ä¸ªè®¢é˜…è€…æ˜¯æœ‰ä¸€ä¸ªè®¢é˜…è€…æ ˆ targetStackï¼Œå½“æŸä¸€ä¸ªç»„ä»¶æ‰§è¡Œåˆ°æŸä¸ªç”Ÿå‘½å‘¨æœŸçš„ hook æ—¶ï¼ˆä¾‹å¦‚ mountComponentï¼‰ï¼Œä¼šå°†å½“å‰ç›®æ ‡è®¢é˜…è€… target ç½®ä¸ºè¿™ä¸ª watcherï¼Œå¹¶å°†å…¶å‹å…¥ targetStack æ ˆé¡¶ã€‚ æ¥ä¸‹æ¥æ˜¯æ·»åŠ å½“å‰æ•°æ®ä¾èµ–çš„ dependæ–¹æ³•ï¼ŒDep.target å¯¹è±¡æ˜¯ä¸€ä¸ª Watcher ç±»çš„å®ä¾‹ï¼Œè°ƒç”¨ Watcher ç±»çš„ addDep æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹ä¸‹ addDep æ–¹æ³•å°†å½“å‰çš„ä¾èµ– Dep å®ä¾‹æ”¾åœ¨äº†å“ªé‡Œï¼š12345678910addDep (dep: Dep) &#123; const id = dep.id if (!this.newDepIds.has(id)) &#123; this.newDepIds.add(id) this.newDeps.push(dep) if (!this.depIds.has(id)) &#123; dep.addSub(this) &#125; &#125;&#125; æˆ‘ä»¬ç¨åä¼šå¯¹ Watcher ç±»è¿›è¡Œåˆ†æï¼Œç›®å‰å…ˆæ¥ç®€å•çœ‹ä¸‹ addDep è¿™ä¸ªå±æ€§æ–¹æ³•åšäº†ä»€ä¹ˆã€‚å¯ä»¥çœ‹åˆ°å…¥å‚æ˜¯ä¸€ä¸ª Dep ç±»å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å®é™…ä¸Šæ˜¯å½“å‰å…¨å±€å”¯ä¸€çš„è®¢é˜…è€…ï¼ŒnewDepIds æ˜¯å½“å‰æ•°æ®ä¾èµ– dep çš„ id åˆ—è¡¨ï¼ŒnewDeps æ˜¯å½“å‰æ•°æ®ä¾èµ– dep åˆ—è¡¨ï¼ŒdepsId åˆ™æ˜¯ä¸Šä¸€ä¸ª tick çš„æ•°æ®ä¾èµ–çš„ id åˆ—è¡¨ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦çš„é€»è¾‘å°±æ˜¯è°ƒç”¨å½“å‰æ•°æ®ä¾èµ– dep çš„ç±»æ–¹æ³• addSubï¼Œè€Œè¿™ä¸ªæ–¹æ³•åœ¨ä¸Šé¢Dep ç±»æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå°±æ˜¯å°†å½“å‰å…¨å±€å”¯ä¸€çš„ watcher å®ä¾‹æ”¾å…¥è¿™ä¸ªæ•°æ®ä¾èµ–çš„è®¢é˜…è€…åˆ—è¡¨ä¸­ã€‚ target Watcherçš„äº§ç”Ÿæˆ‘ä»¬ä»¥ç”Ÿå‘½å‘¨æœŸä¸­çš„ mountComponent è¿™ä¸€ä¸ªé˜¶æ®µä¸ºä¾‹æ¥åˆ†æä¸Šé¢æåˆ°çš„Dep.target è¿™ä¸ªå…¨å±€å”¯ä¸€çš„å½“å‰è®¢é˜…è€… Watcher æ˜¯æ€æ ·äº§ç”Ÿçš„ã€‚ 1234567891011121314151617181920212223export function mountComponent ( vm: Component, el: ?Element, hydrating?: boolean): Component &#123; // ... let updateComponent if (process.env.NODE_ENV !== 'production' &amp;&amp; config.performance &amp;&amp; mark) &#123; updateComponent = () =&gt; &#123; // é¦–æ¬¡æ¸²æŸ“è§†å›¾ä¼šè¿›å…¥ï¼Œç”Ÿæˆè™šæ‹ŸNodeï¼Œæ›´æ–°DOM&#125; &#125; else &#123; updateComponent = () =&gt; &#123; // æ•°æ®æ›´æ–°æ—¶ä¼šè¿›å…¥ï¼Œè°ƒç”¨æ¸²æŸ“å‡½æ•°å¯¹è§†å›¾è¿›è¡Œæ›´æ–° vm._update(vm._render(), hydrating) &#125; &#125; new Watcher(vm, updateComponent, noop, &#123; before () &#123; if (vm._isMounted &amp;&amp; !vm._isDestroyed) &#123; callHook(vm, 'beforeUpdate') &#125; &#125; &#125;, true /* isRenderWatcher */) // ... return vm&#125; é€šè¿‡mountComponentçš„ä»£ç å¯ä»¥çœ‹åˆ°åœ¨è§¦å‘äº†beforeMountç”Ÿå‘½å‘¨æœŸé’©å­åï¼Œç´§æ¥ç€åˆ›å»ºäº†ä¸€ä¸ªç”¨äºæ¸²æŸ“Watcherå®ä¾‹ã€‚æˆ‘ä»¬é€šè¿‡Watcherç±»çš„æ„é€ å‡½æ•°æ¥çœ‹åˆ›å»ºWatcherå®ä¾‹æ—¶åšäº†å“ªäº›å·¥ä½œï¼š1234567891011121314151617181920212223242526constructor ( vm: Component, // å½“å‰æ¸²æŸ“çš„ç»„ä»¶ expOrFn: string | Function, // å½“å‰Watcherå®ä¾‹çš„getterå±æ€§æ–¹æ³• cb: Function, // å›è°ƒå‡½æ•° options?: ?Object, // æ‰‹åŠ¨ä¼ å…¥watchæ—¶çš„option isRenderWatcher?: boolean // æ˜¯å¦ä¸ºæ¸²æŸ“watcherçš„æ ‡è¯† ) &#123; this.vm = vm if (isRenderWatcher) &#123; vm._watcher = this &#125; vm._watchers.push(this) // æ­¤å¤„å¤„ç†æˆ‘ä»¬ä¼ å…¥çš„watcherå‚æ•°ï¼ˆåœ¨ç»„ä»¶å†…æ‰‹åŠ¨æ–°å»ºwatchå±æ€§ï¼‰ if (options) &#123;&#125; else &#123;&#125; // ... // parse expression for getter if (typeof expOrFn === 'function') &#123; this.getter = expOrFn &#125; else &#123; this.getter = parsePath(expOrFn) if (!this.getter) &#123; this.getter = noop &#125; &#125; this.value = this.lazy ? undefined : this.get()&#125; é€šè¿‡ Watcher ç±»çš„æ„é€ å‡½æ•°ä¼ å‚å¯ä»¥çœ‹åˆ° mountComponent ç”Ÿå‘½å‘¨æœŸä¸­åˆ›å»ºçš„ Watcher æ˜¯ä¸€ä¸ªæ¸²æŸ“ Watcherï¼Œå°†å½“å‰çš„ getter è®¾ç½®ä¸ºäº† updateComponent æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯é‡æ–°æ¸²æŸ“è§†å›¾çš„æ–¹æ³•ï¼‰ï¼Œæœ€åè°ƒç”¨äº† get å±æ€§æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ get æ–¹æ³•åšäº†ä»€ä¹ˆï¼š12345678910111213141516171819get () &#123; pushTarget(this) let value const vm = this.vm try &#123; value = this.getter.call(vm, vm) &#125; catch (e) &#123; if (this.user) &#123; handleError(e, vm, `getter for watcher \"$&#123;this.expression&#125;\"`) &#125; else &#123; throw e &#125; &#125; finally &#123; if (this.deep) &#123; traverse(value) &#125; popTarget() this.cleanupDeps() &#125; return value&#125; get æ–¹æ³•é¦–å…ˆè°ƒç”¨äº†åœ¨ Depç±»æ–‡ä»¶ä¸­å®šä¹‰çš„å…¨å±€æ–¹æ³• pushTargetï¼Œå°† Dep.target ç½®ä¸ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„æ¸²æŸ“ Watcherï¼Œå¹¶å°†è¿™ä¸ª watcher å‹åˆ°äº† targetStackã€‚æ¥ä¸‹æ¥è°ƒç”¨ wathcer çš„ getter æ–¹æ³•ï¼šç”±äºæ­¤æ—¶çš„ getter å°±æ˜¯ updateComponent æ–¹æ³•ï¼Œæ‰§è¡Œ updateComponent æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ vm._update(vm._render(), hydrating) è¿›è¡Œæ¸²æŸ“ï¼Œæ¸²æŸ“è¿‡ç¨‹ä¸­å¿…ç„¶ä¼š touch åˆ° data ä¸­ç›¸å…³ä¾èµ–çš„å±æ€§ï¼Œæ­¤æ—¶å°±ä¼šè§¦å‘å„ä¸ªå±æ€§ä¸­çš„ get æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å°†å½“å‰çš„æ¸²æŸ“ Watcher æ·»åŠ åˆ°æ‰€æœ‰æ¸²æŸ“ä¸­ä½¿ç”¨åˆ°çš„æ•°æ®çš„ä¾èµ–åˆ—è¡¨ subs ä¸­ï¼‰ã€‚ æ¸²æŸ“å®Œä¹‹åä¼šå°†å½“å‰çš„æ¸²æŸ“ Watcher ä» targetStack æ¨å‡ºï¼Œè¿›è¡Œä¸‹ä¸€ä¸ª watcher çš„ä»»åŠ¡ã€‚æœ€åä¼šè¿›è¡Œä¾èµ–çš„æ¸…ç©ºï¼Œæ¯æ¬¡æ•°æ®çš„å˜åŒ–éƒ½ä¼šå¼•èµ·è§†å›¾é‡æ–°æ¸²æŸ“ï¼Œæ¯ä¸€æ¬¡æ¸²æŸ“åˆä¼šè¿›è¡Œä¾èµ–æ”¶é›†ï¼Œåˆä¼šè§¦å‘ data ä¸­æ¯ä¸ªå±æ€§çš„ get æ–¹æ³•ï¼Œè¿™æ—¶ä¼šæœ‰ä¸€ç§æƒ…å†µå‘ç”Ÿï¼š&lt;div v-if=&quot;someBool&quot;&gt;&lt;/div&gt;&lt;div v-else&gt;&lt;/div&gt; ç¬¬ä¸€æ¬¡å½“ someBool ä¸ºçœŸæ—¶ï¼Œè¿›è¡Œæ¸²æŸ“ï¼Œå½“æˆ‘ä»¬æŠŠ someBool çš„å€¼ update ä¸º false æ—¶ï¼Œè¿™æ—¶å€™å±æ€§ a ä¸ä¼šè¢«ä½¿ç”¨ï¼Œæ‰€ä»¥å¦‚æœä¸è¿›è¡Œä¾èµ–æ¸…ç©ºï¼Œä¼šå¯¼è‡´ä¸å¿…è¦çš„ä¾èµ–é€šçŸ¥ã€‚ä¾èµ–æ¸…ç©ºä¸»è¦æ˜¯å¯¹ newDeps è¿›è¡Œæ›´æ–°ï¼Œé€šè¿‡å¯¹æ¯”æœ¬æ¬¡æ”¶é›†çš„ä¾èµ–å’Œä¹‹å‰çš„ä¾èµ–è¿›è¡Œå¯¹æ¯”ï¼ŒæŠŠä¸éœ€è¦çš„ä¾èµ–æ¸…é™¤ã€‚ æ´¾å‘æ›´æ–° å½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªå­˜åœ¨ data å±æ€§ä¸Šçš„å€¼æ—¶ï¼Œä¼šè§¦å‘æ•°æ®ä¸­çš„ set å±æ€§æ–¹æ³•ï¼Œé¦–å…ˆä¼šåˆ¤æ–­å¹¶ä¿®æ”¹è¯¥å±æ€§æ•°æ®çš„å€¼ï¼Œå¹¶è§¦å‘è‡ªèº«çš„ dep.notify æ–¹æ³•å¼€å§‹æ›´æ–°æ´¾å‘ï¼š 123456789set: function reactiveSetter (newVal) &#123; const value = getter ? getter.call(obj) : val if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123; return &#125; // ... childOb = !shallow &amp;&amp; observe(newVal) dep.notify()&#125; æ¥ä¸‹æ¥è®©æˆ‘ä»¬è¿›å…¥dep.notifyè¿™ä¸ªæ–¹æ³•ï¼š123456789notify () &#123; const subs = this.subs.slice() if (process.env.NODE_ENV !== 'production' &amp;&amp; !config.async) &#123; subs.sort((a, b) =&gt; a.id - b.id) &#125; for (let i = 0, l = subs.length; i &lt; l; i++) &#123; subs[i].update() &#125; &#125; notify è¿™ä¸ªæ–¹æ³•æ˜¯æ¯ä¸€ä¸ªæ•°æ®åœ¨å“åº”å¼åŒ–ä¹‹åè‡ªå·±å†…éƒ¨é—­åŒ…çš„ dep å®ä¾‹çš„æ–¹æ³•ï¼Œè¿˜è®°å¾—ä¹‹å‰è®²è¿‡çš„ subs ä¿å­˜ç€æ‰€æœ‰è®¢é˜…è¯¥æ•°æ®çš„è®¢é˜…è€…ï¼Œæ‰€ä»¥åœ¨ notify æ–¹æ³•ä¸­é¦–å…ˆå¯¹ subs è¿™ä¸ªè®¢é˜…è€…åºåˆ—æŒ‰ç…§å…¶ id è¿›è¡Œäº†æ’åºã€‚æ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨æ¯ä¸€ä¸ªè®¢é˜…è€… watcher å®ä¾‹çš„ update æ–¹æ³•è¿›è¡Œæ›´æ–°çš„æ´¾å‘ã€‚update æ–¹æ³•æ˜¯åœ¨ Watcher ç±»æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨äº†é˜Ÿåˆ—çš„æ–¹å¼æ¥ç®¡ç†è®¢é˜…è€…çš„æ›´æ–°æ´¾å‘ï¼Œå…¶ä¸­ä¸»è¦è°ƒç”¨äº† queueWatcher è¿™ä¸ªæ–¹æ³•æ¥å®ç°è¯¥é€»è¾‘ï¼š1234567891011121314151617181920export function queueWatcher (watcher: Watcher) &#123; const id = watcher.id if (has[id] == null) &#123; // a* has[id] = true if (!flushing) &#123; // b* queue.push(watcher) &#125; else &#123; let i = queue.length - 1 while (i &gt; index &amp;&amp; queue[i].id &gt; watcher.id) &#123; i-- &#125; queue.splice(i + 1, 0, watcher) &#125; if (!waiting) &#123; // c* waiting = true // ... nextTick(flushSchedulerQueue) &#125; &#125;&#125; è¿›å…¥è¯¥æ–¹æ³•åï¼Œé¦–å…ˆä½¿ç”¨ä¸€ä¸ªåä¸º has çš„ Map æ¥ä¿è¯æ¯ä¸€ä¸ª watcher ä»…æ¨å…¥é˜Ÿåˆ—ä¸€æ¬¡[a]ã€‚flushing è¿™ä¸ªæ ‡è¯†ç¬¦è¡¨ç¤ºç›®å‰è¿™ä¸ªé˜Ÿåˆ—æ˜¯å¦æ­£åœ¨è¿›è¡Œæ›´æ–°æ´¾å‘ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°†è¿™ä¸ª id å¯¹åº”çš„è®¢é˜…è€…è¿›è¡Œæ›¿æ¢ï¼Œå¦‚æœå·²ç»è·¯è¿‡è¿™ä¸ª idï¼Œé‚£ä¹ˆå°±ç«‹åˆ»å°†è¿™ä¸ª id å¯¹åº”çš„ watcher æ”¾åœ¨ä¸‹ä¸€ä¸ªæ’å…¥é˜Ÿåˆ—[b]ã€‚æ¥ä¸‹æ¥æ ¹æ®waiting è¿™ä¸ªæ ‡è¯†ç¬¦æ¥è¡¨ç¤ºå½“å‰æ˜¯å¦æ­£åœ¨å¯¹è¿™ä¸ªé˜Ÿåˆ—è¿›è¡Œæ›´æ–°æ´¾å‘[c*]ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±å¯ä»¥è°ƒç”¨ nextTick(flushSchedulerQueue) æ–¹æ³•è¿›è¡ŒçœŸæ­£çš„æ›´æ–°æ´¾å‘äº†ã€‚ 12345678910111213141516function flushSchedulerQueue () &#123; flushing = true let watcher, id queue.sort((a, b) =&gt; a.id - b.id) for (index = 0; index &lt; queue.length; index++) &#123; watcher = queue[index] if (watcher.before) &#123; watcher.before() &#125; id = watcher.id has[id] = null watcher.run() // ... &#125; è¿™ä¸ªæ–¹æ³•é¦–å…ˆå¯¹é˜Ÿåˆ—ä¸­çš„ watcher æŒ‰ç…§å…¶ id è¿›è¡Œäº†æ’åºï¼Œæ’åºçš„ä¸»è¦ç›®çš„æœ‰ä¸‰ï¼š ç»„ä»¶çš„æ›´æ–°ç”±çˆ¶åˆ°å­ï¼›å› ä¸ºçˆ¶ç»„ä»¶çš„åˆ›å»ºè¿‡ç¨‹æ˜¯å…ˆäºå­çš„ï¼Œæ‰€ä»¥ watcher çš„åˆ›å»ºä¹Ÿæ˜¯å…ˆçˆ¶åå­ï¼Œæ‰§è¡Œé¡ºåºä¹Ÿåº”è¯¥ä¿æŒå…ˆçˆ¶åå­ã€‚ ç”¨æˆ·çš„è‡ªå®šä¹‰ watcher è¦ä¼˜å…ˆäºæ¸²æŸ“ watcher æ‰§è¡Œï¼›å› ä¸ºç”¨æˆ·è‡ªå®šä¹‰ watcher æ˜¯åœ¨æ¸²æŸ“ watcher ä¹‹å‰åˆ›å»ºçš„ã€‚ å¦‚æœä¸€ä¸ªç»„ä»¶åœ¨çˆ¶ç»„ä»¶çš„ watcher æ‰§è¡ŒæœŸé—´è¢«é”€æ¯ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„ watcher æ‰§è¡Œéƒ½å¯ä»¥è¢«è·³è¿‡ï¼Œæ‰€ä»¥çˆ¶ç»„ä»¶çš„ watcher åº”è¯¥å…ˆæ‰§è¡Œã€‚æ’åºç»“æŸä¹‹åï¼Œä¾¿å¯¹è¿™ä¸ªé˜Ÿåˆ—è¿›è¡Œéå†ï¼Œå¹¶æ‰§è¡Œwatcher.run()æ–¹æ³•å»å®ç°æ•°æ®æ›´æ–°çš„é€šçŸ¥ï¼Œrunæ–¹æ³•çš„é€»è¾‘æ˜¯ï¼š æ–°çš„å€¼ä¸è€çš„å€¼ä¸åŒæ—¶ä¼šè§¦å‘é€šçŸ¥ï¼› ä½†æ˜¯å½“å€¼æ˜¯å¯¹è±¡æˆ–è€…deepä¸ºtrueæ—¶æ— è®ºå¦‚ä½•éƒ½ä¼šè¿›è¡Œé€šçŸ¥ æ‰€ä»¥ watcher æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯å°†å±æ€§çš„å€¼è¿›è¡Œæ›´æ–°ï¼Œå¦ä¸€ä¸ªå°±æ˜¯å¯ä»¥æ‰§è¡Œ watch ä¸­çš„å›è°ƒå‡½æ•° handler(newVal, oldVal)ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½•æˆ‘ä»¬å¯ä»¥åœ¨ watcher ä¸­æ‹¿åˆ°æ–°æ—§ä¸¤ä¸ªå€¼çš„åŸå› ã€‚ è‡³æ­¤ï¼Œæ•°æ®çš„æ›´æ–°æ´¾å‘ä¹Ÿé€šçŸ¥åˆ°äº†å„ä¸ªç»„ä»¶ï¼Œä¾¿åˆå¯ä»¥è¿›è¡Œè§†å›¾çš„æ›´æ–°æ¸²æŸ“ï¼Œæ”¶é›†ä¾èµ–ï¼Œæ´¾å‘æ›´æ–°â€¦â€¦","categories":[{"name":"SourceCodeReading","slug":"SourceCodeReading","permalink":"http://keefe.wang/categories/SourceCodeReading/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"æºç å­¦ä¹ ","slug":"æºç å­¦ä¹ ","permalink":"http://keefe.wang/tags/æºç å­¦ä¹ /"},{"name":"VUE","slug":"VUE","permalink":"http://keefe.wang/tags/VUE/"},{"name":"æ•°æ®å“åº”","slug":"æ•°æ®å“åº”","permalink":"http://keefe.wang/tags/æ•°æ®å“åº”/"}]},{"title":"ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å‘ç”Ÿäº†ä»€ä¹ˆä¹‹è¿›é˜¶ç¯‡","slug":"2018-03-22-what-happend-during-opening-url","date":"2018-03-22T04:00:00.000Z","updated":"2020-10-20T09:29:19.202Z","comments":true,"path":"2018/03/22/2018-03-22-what-happend-during-opening-url.html","link":"","permalink":"http://keefe.wang/2018/03/22/2018-03-22-what-happend-during-opening-url.html","excerpt":"","text":"æ–‡ç« æ¥æºï¼šhttps://segmentfault.com/a/1190000006879700æ–‡ç« ä¼˜ç‚¹ï¼šé‡‡ç”¨æ€»åˆ†æ€»çš„å½¢å¼è¿›è¡Œæ’°å†™ï¼Œç»“æ„å’Œç« èŠ‚æ˜ç¡®ï¼Œå‘æ•£è¾ƒå¹¿ã€‚ æ–‡ç« é¦–å…ˆæŒ‡å‡ºæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºå…­å¤§æ­¥éª¤ï¼š DNSè§£æ TCPè¿æ¥ å‘é€HTTPè¯·æ±‚ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›HTTPæŠ¥æ–‡ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ è¿æ¥ç»“æŸ DNSè§£æï¼šå°†ç½‘ç«™çš„ã€å§“åã€‘ç¿»è¯‘æˆã€èº«ä»½è¯å·ã€‘ï¼Œæ˜¯ä¸€ä¸ªç¿»è¯‘çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å°†ç½‘å€ä»å³åˆ°å·¦è¿›è¡Œè§£æå’ŒæŸ¥è¯¢çš„è¿‡ç¨‹ã€‚.=&gt;com=&gt;google.comä¸ºäº†æŸ¥è¯¢æ•ˆç‡ï¼ŒDNSè§£æç®€å†èµ·å¤šçº§ç¼“å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ï¼Œç³»ç»Ÿç¼“å­˜ï¼Œè·¯ç”±å™¨ç¼“å­˜ï¼ŒIPSæœåŠ¡å™¨ç¼“å­˜ï¼Œæ ¹åŸŸåæœåŠ¡å™¨ç¼“å­˜ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ç¼“å­˜ï¼Œä¸»åŸŸåæœåŠ¡å™¨ç¼“å­˜ï¼‰ä¸ºäº†å‡è¡¡åœ°å‘é€å’Œå¤„ç†è¯·æ±‚ï¼ŒDNSè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼ˆDNSé‡å®šå‘ï¼‰ï¼ŒCDNä¹Ÿæ˜¯åˆ©ç”¨äº†è¯¥æŠ€æœ¯ï¼Œæ ¹æ®æ¯å°æœºå™¨è´Ÿè½½é‡ã€åœ°ç†ä½ç½®è·ç¦»ç­‰è¿”å›ç»™ç”¨æˆ·æœ€ä¼˜çš„ä¸€ä¸ªIPåœ°å€æ²¡æœ‰ä½¿ç”¨CDNæ—¶è¯·æ±‚æœåŠ¡å™¨èµ„æºï¼šlocalDNS-rootDNS-é€çº§æŸ¥è¯¢åˆ°åŸŸåæˆæƒçš„DNSè®°å½•-ä½¿ç”¨æŸ¥è¯¢åˆ°çš„ipå»è¯·æ±‚å†…å®¹ä½¿ç”¨äº†CDNä¹‹åï¼šlocalDNS-rootDNS-é€çº§æŸ¥è¯¢åˆ°åŸŸåæˆæƒçš„DNSè®°å½•-å‘DNSæœåŠ¡å™¨è¯·æ±‚æœ€ä¼˜ipåœ°å€-ä½¿ç”¨è¯¥ipå»CDNèŠ‚ç‚¹æœåŠ¡å™¨è¿”å›å¯¹åº”çš„èµ„æº TCPè¿æ¥ç½‘ç«™è¯·æ±‚å¤§éƒ¨åˆ†ä½¿ç”¨httpè¯·æ±‚ï¼Œhttpåè®®æ˜¯ä½¿ç”¨tcpä½œä¸ºå…¶ä¼ è¾“å±‚åè®®ï¼Œï¼ˆåº”ç”¨httpã€ä¼ è¾“tcpã€ç½‘ç»œipã€æ•°æ®ã€ç‰©ç†ï¼‰ï¼Œhttpç”±tcpæŠ¥æ–‡ä¸­æå–ã€‚ç”±äºhttpæŠ¥æ–‡ä¸ºæ˜æ–‡å­˜åœ¨ä¸€å®šé£é™©ï¼Œæ‰€ä»¥åœ¨httpæŠ¥æ–‡åŒ…è£¹å…¥tcpæŠ¥æ–‡ä¹‹å‰ä½¿ç”¨sslå¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚httpsåœ¨åŸæœ‰tcpæ¡æ‰‹çš„åŸºç¡€ä¸Šéœ€è¦æå‰è¿›è¡Œä¸€ä¸ªè§£å¯†æ¡æ‰‹ã€‚httpsä¼šæœ‰æ—¶é—´æŸè€—ï¼Œéœ€è¦åœ¨å®‰å…¨å’Œæ€§èƒ½ä¸¤è€…åšå‡ºæƒè¡¡ã€‚ï¼ˆå…¬é’¥åŠ å¯†æŠ¥æ–‡ï¼Œç§é’¥åŠ å¯†å…¬é’¥ï¼‰ å‘é€HTTPè¯·æ±‚è¯·æ±‚æŠ¥æ–‡ï¼šè¯·æ±‚è¡Œï¼ˆè¯·æ±‚æ–¹æ³•ã€å†…å®¹ã€åè®®ï¼‰ï¼Œè¯·æ±‚æŠ¥å¤´ï¼ˆAcceptã€Content-Typeã€Cookieã€User-Agentï¼‰ã€è¯·æ±‚æ­£æ–‡ï¼ˆPOST/PUTæ—¶ä¼šæœ‰ï¼‰å“åº”æŠ¥æ–‡ï¼šçŠ¶æ€ç ã€å“åº”æŠ¥å¤´ã€ç›¸åº”æŠ¥æ–‡çŠ¶æ€ç ï¼š1xxï¼šæŒ‡ç¤ºä¿¡æ¯â€“è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚2xxï¼šæˆåŠŸâ€“è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—ã€‚3xxï¼šé‡å®šå‘â€“è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚4xxï¼šå®¢æˆ·ç«¯é”™è¯¯â€“è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ã€‚5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯â€“æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢æ–‡æ¡£æ¥æºï¼šhttps://www.html5rocks.com/en/tutorials/internals/howbrowsersworkä¸»è¦æ–‡ç« ï¼šhttps://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#The_rendering_engineæ€»æµç¨‹ï¼š æ²¡æœ‰è„šæœ¬çš„æµç¨‹ï¼š HTML Parsing: è¾“å‡ºDOM treeHTMLä¸æ˜¯ä¸€ç§context free grammarï¼Œæ˜¯å› ä¸ºå®ƒä¸åŒäºXMLï¼Œå®ƒå…è®¸ä¸€äº›ç±»ä¼¼æ ‡ç­¾ç¼ºå¤±ç­‰çš„å®¹é”™åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼štokenizeå’Œtree constructionTokenizeï¼šçŠ¶æ€æœºå®ç°ï¼Œåˆå§‹çŠ¶æ€ä¸ºDATAï¼Œé‡åˆ°&lt;çŠ¶æ€æ”¹ä¸ºTAGOPENï¼Œä¹‹åé‡åˆ°ç¬¬ä¸€ä¸ªa-zçš„å­—ç¬¦çŠ¶æ€æ”¹ä¸ºTAGNAMEï¼Œä¹‹åé‡åˆ°&gt;çŠ¶æ€æ”¹ä¸ºDATAï¼Œç›´åˆ°&lt;/&gt;ï¼Œtokenizeå°±commitä¸€ä¸ªtokenï¼ŒTree Constructionï¼šçŠ¶æ€æœºå®ç°ã€‚Document Objectåœ¨tokençš„parseråˆ›å»ºæ—¶åŒæ—¶åˆ›å»ºï¼Œæ¯å½“ä¸€ä¸ªtokenè¢«commitedï¼Œconstroctorä¼šåˆ¤æ–­è¯¥tokenè·Ÿå“ªä¸ªdomå…ƒç´ ç›¸å…³ï¼Œæ–°å»ºè¯¥tokençš„å…ƒç´ ï¼Œå¹¶æ·»åŠ åˆ°å¼€æ”¾å…ƒç´ æ ˆï¼ˆè¿™ä¸ªæ ˆç”¨äºæ£€æŸ¥æ ‡ç­¾é—­åˆä»¥åŠæœªæ­£å¸¸é—­åˆæ ‡ç­¾ï¼‰ä¸­ï¼š csså’Œjsçš„parseè¿‡ç¨‹ï¼šFirefox blocks all scripts when there is a style sheet that is still being loaded and parsed.WebKit blocks scripts only when they try to access certain style properties that may be affected by unloaded style sheets.æ–‡ç« çš„ä¼˜ç‚¹ï¼šä»dom treeçš„æ„å»ºçš„è¯æ³•åˆ†æå±‚é¢æŒ‡å‡ºä¸€äº›æ ‡ç­¾é”™è¯¯ä»¥åŠå…¼å®¹æ–¹å¼ï¼Œä»è¯­æ³•åˆ†æå±‚é¢æŒ‡å‡ºäº†ç±»ä¼¼è¿™ç§æƒ…å†µåº”å½“æ€æ ·å¤„ç†ã€‚render treeæ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ„å»ºæ–¹æ³•å¯¹headæ ‡ç­¾ä»¥åŠdisplay:noneçš„æ ‡ç­¾ä¸äºˆæ’å…¥æ ‘ç»“æ„ä¸­ï¼Œè€Œhiddenåˆ™ä¼šå­˜åœ¨åœ¨ç»“æ„å½“ä¸­ã€‚ Webä¼˜åŒ–é›…è™35æ¡å†›è§„ï¼šhttps://juejin.im/post/5b73ef38f265da281e048e51","categories":[{"name":"Reading","slug":"Reading","permalink":"http://keefe.wang/categories/Reading/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"HTTP","slug":"HTTP","permalink":"http://keefe.wang/tags/HTTP/"}]},{"title":"JSè¯­è¨€ç²¾ç²¹ä¸­çš„ç²¾ç²¹","slug":"2017-10-10-The-Good-Part-of-JavaScripts-The-Good-Part","date":"2017-10-10T04:00:00.000Z","updated":"2020-10-20T08:55:20.270Z","comments":true,"path":"2017/10/10/2017-10-10-The-Good-Part-of-JavaScripts-The-Good-Part.html","link":"","permalink":"http://keefe.wang/2017/10/10/2017-10-10-The-Good-Part-of-JavaScripts-The-Good-Part.html","excerpt":"ã€ŠJavaScriptè¯­è¨€ç²¾ç²¹ã€‹è¿™æœ¬ä¹¦å¯è°“æ˜¯JavaScriptè¿™é—¨è¯­è¨€çš„å‡ ä¹æ‰€æœ‰çŸ¥è¯†ç‚¹çš„æ€»ç»“ï¼Œç›¸å½“äºè€ƒè¯•ä¹‹å‰è¦ç”»çš„é‡ç‚¹ã€‚å°½ç®¡ä¹¦ä¸­å¯¹äºå„ä¸ªçŸ¥è¯†ç‚¹çš„ä»‹ç»æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯çŸ¥è¯†ç‚¹è¦†ç›–å¾ˆå…¨ï¼Œå¯ä»¥è¿›è¡Œåå¤é˜…è¯»å’Œç§¯ç´¯ã€‚ä¸‹é¢å°±å¯¹è¿™æœ¬ä¹¦ä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œä¸€ä¸ªæ•´ç†å’Œæ€»ç»“ã€‚","text":"ã€ŠJavaScriptè¯­è¨€ç²¾ç²¹ã€‹è¿™æœ¬ä¹¦å¯è°“æ˜¯JavaScriptè¿™é—¨è¯­è¨€çš„å‡ ä¹æ‰€æœ‰çŸ¥è¯†ç‚¹çš„æ€»ç»“ï¼Œç›¸å½“äºè€ƒè¯•ä¹‹å‰è¦ç”»çš„é‡ç‚¹ã€‚å°½ç®¡ä¹¦ä¸­å¯¹äºå„ä¸ªçŸ¥è¯†ç‚¹çš„ä»‹ç»æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯çŸ¥è¯†ç‚¹è¦†ç›–å¾ˆå…¨ï¼Œå¯ä»¥è¿›è¡Œåå¤é˜…è¯»å’Œç§¯ç´¯ã€‚ä¸‹é¢å°±å¯¹è¿™æœ¬ä¹¦ä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œä¸€ä¸ªæ•´ç†å’Œæ€»ç»“ã€‚ è¯­æ³•è¿™ä¸€éƒ¨åˆ†ä¸»è¦æ€»ç»“JavaScriptä¸­çš„è¯­è¨€ç»“æ„å’Œç›¸å…³è¯­æ³•çŸ¥è¯†ç‚¹ã€‚ ç©ºç™½ï¼šç©ºæ ¼ä¸€èˆ¬æ˜¯å¯ä»¥çœç•¥ï¼Œä½†æ˜¯å¯¹äºvar that = this;è¿™ç§è¯­å¥varå’Œthatä¹‹é—´çš„ç©ºæ ¼æ˜¯å¿…é¡»ä¿ç•™çš„ï¼Œè€Œä¸”ä¸ºäº†ä»£ç ç¾è§‚ï¼Œä¹Ÿè¦é€‚å½“ä½¿ç”¨ç©ºæ ¼ã€‚ æ³¨é‡Šï¼šä½¿ç”¨/* */è¿™ç§é£æ ¼çš„æ³¨é‡Šåœ¨é‡åˆ°æ­£åˆ™è¡¨è¾¾å¼ä¸­å‡ºç°/æ—¶å¾ˆå®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥*å»ºè®®ä½¿ç”¨//çš„æ³¨é‡Šæ–¹å¼ã€‚ æ ‡è¯†ç¬¦ï¼šåªèƒ½ä½¿ç”¨å­—æ¯ã€$ã€_å¼€å¤´ï¼Œå…¶ä¸­ä¹Ÿåªèƒ½ä½¿ç”¨å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ã€‚é¿å…ä½¿ç”¨ä¿ç•™å­—ä½œä¸ºæ ‡è¯†ç¬¦ã€‚ æ•°å­—ï¼šJSä¸­åªæœ‰ä¸€ä¸ªæ•°å­—ç±»å‹ï¼Œå†…éƒ¨è¡¨ç¤ºä¸º64ä½æµ®ç‚¹æ•°ï¼Œä¸€å®šç¨‹åº¦å¯ä»¥é¿å…æº¢å‡ºé—®é¢˜ï¼›NaNæ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¸ç­‰äºä»»ä½•å€¼ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰ï¼Œæœ‰isNaN(number)æ–¹æ³•ï¼›Infinityè¡¨ç¤ºæ— é™å¤§ï¼›æ•°å­—æ‹¥æœ‰æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Mathå¯¹è±¡çš„æ–¹æ³•å¯¹æ•°å­—è¿›è¡Œæ“ä½œã€‚ å­—ç¬¦ä¸²ï¼šç”±å•å¼•å·/åŒå¼•å·åŒ…æ‹¬ï¼Œ\\å¼€å¤´æ˜¯è½¬ä¹‰å­—ç¬¦ã€‚åœ¨ES5ä¸­ï¼ŒJSä¸­æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯16ä½Unicodeï¼›å­—ç¬¦ä¸²æœ‰.lengthå±æ€§ï¼Œä¸å¯å˜ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•å¯¹å…¶è¿›è¡Œæ“ä½œã€‚ è¯­å¥ï¼šswitchã€whileã€forã€doå¯æœ‰å‰ç½®æ ‡ç­¾labelï¼Œé…åˆbreakè¯­å¥ä½¿ç”¨ ifè¯­å¥ä¸­å¯ä»¥ä½œä¸ºå‡å€¼çš„æ¡ä»¶æœ‰ï¼šfalseã€nullã€undefinedã€â€™â€™ã€0ã€NaNï¼Œå…¶ä»–éƒ½ä½œä¸ºçœŸå€¼æ¡ä»¶ï¼› forè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨for inè¯­å¥å¯¹å¯¹è±¡æˆ–è€…ç±»å¯¹è±¡çš„å±æ€§/é”®åè¿›è¡Œæšä¸¾ï¼Œä½†æ˜¯è¦ç¡®ä¿è¯¥å±æ€§æ˜¯å¦æ¥è‡ªè¯¥å¯¹è±¡è¿˜æ˜¯åŸå‹é“¾ï¼Œä½¿ç”¨if(object.hasOwnProperty(variable))è¿›è¡Œç¡®å®šï¼› è¡¨è¾¾å¼ï¼šæ³¨æ„è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼›typeofè¿ç®—ç¬¦å¯äº§ç”Ÿå…­ä¸ªå€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰numberã€stringã€booleanã€undefinedã€functionå’Œobjectï¼› å­—é¢é‡ï¼š å‡½æ•°ï¼š å¯¹è±¡JavaScriptä¸­çš„ç®€å•æ•°æ®ç±»å‹æœ‰Numberã€Stringã€Boolã€Nullã€undefinedï¼Œè¿™äº›ç±»å‹éƒ½ä¸å¯å˜ï¼ˆä½†æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼æœ‰ä¸€äº›æ–¹æ³•ï¼‰ï¼Œå…¶ä»–çš„æ•°æ®ç±»å‹éƒ½å±äºå¯¹è±¡Objectã€‚ å¯¹è±¡å­—é¢é‡ï¼š 1234var stooge = &#123; \"first-name\": \"Jerome\", //ä¸åˆæ³•çš„å±æ€§åè¦ç”¨\"\"åŒ…æ‹¬ last_name: \"Howard\" &#125; æ£€ç´¢ï¼šå¯¹è±¡çš„å±æ€§æ£€ç´¢æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"å½¢çŠ¶æ–‡æ³•ç®€ä»‹","slug":"2017-10-08-shape-grammar-learning-notes","date":"2017-10-08T04:00:00.000Z","updated":"2020-10-20T08:55:17.801Z","comments":true,"path":"2017/10/08/2017-10-08-shape-grammar-learning-notes.html","link":"","permalink":"http://keefe.wang/2017/10/08/2017-10-08-shape-grammar-learning-notes.html","excerpt":"å½¢çŠ¶æ–‡æ³•ï¼ˆshape grammarï¼‰æœ€æ—©ç”±George Stinyå’ŒJames Gipsåœ¨1972å¹´æå‡ºï¼Œæ˜¯ä¸€ç§ç”¨å¸¦ç¬¦å·çš„å½¢çŠ¶ä½œä¸ºåŸºæœ¬è¦ç´ ï¼Œç”¨è¯­æ³•ç»“æ„åˆ†æå’Œäº§ç”Ÿæ–°çš„å½¢çŠ¶çš„è®¾è®¡æ¨ç†æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ä»¥è¿ç®—è§„å¾‹ä¸ºä¸»çš„è®¾è®¡æ–¹æ³•ã€‚æœ€æ—©è¿ç”¨äºç»˜ç”»ã€é›•å¡‘å’Œå»ºç­‘è®¾è®¡é¢†åŸŸï¼Œåè¢«æ¨å¹¿åˆ°å·¥ä¸šè®¾è®¡é¢†åŸŸã€‚æˆ‘çš„æ¯•è®¾å¼€é¢˜ä¹‹åï¼Œæ˜¯å®éªŒå®¤å’Œé˜¿é‡Œä¸€èµ·åˆä½œçš„é¡¹ç›®ä¸­çš„ä¸€ä¸ªç³»ç»Ÿå®ç°ï¼Œå…¶ä¸­å¤§é‡åœ°ä½¿ç”¨åˆ°äº†å½¢çŠ¶æ–‡æ³•çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ‰å¿…è¦å¯¹è¯¥ç ”ç©¶è¿›è¡Œä¸€äº›äº†è§£å’ŒçŸ¥è¯†ç‚¹çš„æ•´ç†ã€‚","text":"å½¢çŠ¶æ–‡æ³•ï¼ˆshape grammarï¼‰æœ€æ—©ç”±George Stinyå’ŒJames Gipsåœ¨1972å¹´æå‡ºï¼Œæ˜¯ä¸€ç§ç”¨å¸¦ç¬¦å·çš„å½¢çŠ¶ä½œä¸ºåŸºæœ¬è¦ç´ ï¼Œç”¨è¯­æ³•ç»“æ„åˆ†æå’Œäº§ç”Ÿæ–°çš„å½¢çŠ¶çš„è®¾è®¡æ¨ç†æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ä»¥è¿ç®—è§„å¾‹ä¸ºä¸»çš„è®¾è®¡æ–¹æ³•ã€‚æœ€æ—©è¿ç”¨äºç»˜ç”»ã€é›•å¡‘å’Œå»ºç­‘è®¾è®¡é¢†åŸŸï¼Œåè¢«æ¨å¹¿åˆ°å·¥ä¸šè®¾è®¡é¢†åŸŸã€‚æˆ‘çš„æ¯•è®¾å¼€é¢˜ä¹‹åï¼Œæ˜¯å®éªŒå®¤å’Œé˜¿é‡Œä¸€èµ·åˆä½œçš„é¡¹ç›®ä¸­çš„ä¸€ä¸ªç³»ç»Ÿå®ç°ï¼Œå…¶ä¸­å¤§é‡åœ°ä½¿ç”¨åˆ°äº†å½¢çŠ¶æ–‡æ³•çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ‰å¿…è¦å¯¹è¯¥ç ”ç©¶è¿›è¡Œä¸€äº›äº†è§£å’ŒçŸ¥è¯†ç‚¹çš„æ•´ç†ã€‚ æ¦‚å¿µæ›´åŠ ç®€æ´çš„æ¦‚å¿µï¼šå½¢çŠ¶æ–‡æ³•æ˜¯ä¸€ç§è®¡ç®—æœºè¾…åŠ©è®¾è®¡æ–¹æ³•ï¼Œå®ƒå¯ä»¥æŒ‰ç…§äººä»¬çš„è®¾è®¡æ€æƒ³å’Œè¦æ±‚ï¼Œä¾æ®ä¸€å®šçš„è§„åˆ™äº§ç”Ÿæ–°çš„å½¢çŠ¶ã€‚å½¢çŠ¶æ˜¯æŒ‡æœ‰é™ç›´çº¿æ®µçš„ç»„åˆï¼Œå¹¶ä¸”å¸¦æœ‰ç¬¦å·æ ‡è®°ï¼Œä»¥æŒ‡ç¤ºå½¢çŠ¶ç”Ÿæˆçš„æ–¹å‘ï¼›è§„åˆ™æ˜¯æŒ‡å¯¹å½¢çŠ¶è¿›è¡Œæ”¹å˜çš„è§„å®šã€‚å¹¿ä¹‰åœ°æ¥è®²ï¼Œå½¢çŠ¶æ–‡æ³•æ˜¯å¯¹å·²æœ‰äº§å“ç‰¹å¾çš„åˆ†æã€æè¿°å’Œå½’çº³ï¼›å†ç°å’Œå‘å±•åŸæœ‰äº§å“ç‰¹å¾ï¼Œå½¢æˆæ–°çš„é£æ ¼ å½¢çŠ¶æ–‡æ³•çš„å®šä¹‰ï¼š å½¢çŠ¶æ–‡æ³•å®šä¹‰ä¸ºå››å…ƒç»„ï¼Œå³SGï¼(S, L, R, I)ã€‚å…¶ä¸­ï¼Œï¼³ä¸ºå½¢çŠ¶çš„æœ‰é™é›†åˆï¼›ï¼¬ä¸ºç¬¦å·çš„æœ‰é™é›†åˆï¼›ï¼²ä¸ºè§„åˆ™çš„æœ‰é™é›†åˆï¼Œè§„åˆ™çš„åŸºæœ¬å½¢å¼ä¸ºÎ± â†’ Î²ï¼ŒÎ±æ˜¯ä¸€ä¸ªå¸¦ç¬¦å·å½¢çŠ¶ï¼ŒÎ±âˆˆ(S, L)+ï¼ŒÎ²ä¹Ÿæ˜¯ä¸€ä¸ªå¸¦ç¬¦å·å½¢çŠ¶ï¼ŒÎ²âˆˆ(S, L)ï¼Œ(S, L)ï¼‹æ˜¯ä¸€ä¸ªå½¢çŠ¶å’Œç¬¦å·æ‰€ç»„æˆçš„é›†åˆï¼Œï¼ˆS, Lï¼‰î€’åˆ™æ˜¯ï¼ˆS, Lï¼‰+âˆªï¼ˆSÎ¦, Lï¼‰ï¼›ï¼©ä¸ºåˆå§‹å½¢çŠ¶ï¼ŒIâˆˆ(S, L)+ï¼ä¸€ä¸ªå½¢çŠ¶æ–‡æ³•å®šä¹‰çš„å½¢çŠ¶é›†åˆç§°ä¸ºè¯­è¨€ï¼Œè¿™ä¸ªè¯­è¨€åŒ…å«æ‰€æœ‰çš„ç”±å½¢çŠ¶æ–‡æ³•ç”Ÿæˆçš„æ— ç¬¦å·å½¢çŠ¶æˆ–å¸¦ç¬¦å·å½¢çŠ¶ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå½¢çŠ¶éƒ½æ˜¯é€šè¿‡åº”ç”¨å½¢çŠ¶è§„åˆ™ä»åˆå§‹å½¢çŠ¶æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åŸºç¡€çš„å½¢çŠ¶æ–‡æ³•è§„åˆ™æœ‰ç”Ÿæˆæ€§è§„åˆ™å’Œè¡ç”Ÿæ€§ï¼ˆä¿®æ”¹æ€§ï¼‰è§„åˆ™ï¼Œè¡ç”Ÿæ€§è§„åˆ™æ˜¯åœ¨ç”Ÿæˆæ€§è§„åˆ™çš„åŸºç¡€ä¸Šè¿›è¡Œæ›´å¤šå‚æ•°å’Œæ›´å¤šæ­¥éª¤çš„è§„åˆ™å˜åŒ–ï¼Œèƒ½å¤Ÿç”Ÿæˆæ›´åŠ å¤æ‚çš„çº¹æ ·å’Œå›¾æ¡ˆã€‚ å½¢çŠ¶æ–‡æ³•åº”ç”¨æµç¨‹ï¼š ä»¥çº¹æ ·çš„å½¢çŠ¶æ–‡æ³•ç”Ÿæˆä¸ºä¾‹æ¥è¯´ï¼Œæœ€åŸºæœ¬çš„æ­¥éª¤åˆ†ä¸ºä¸‰æ­¥ï¼š çº¹æ ·ç ”ç©¶ï¼Œå¯¹ä¼ ç»Ÿçº¹æ ·åŠç›¸å…³æ–‡åŒ–èƒŒæ™¯è¿›è¡Œç ”ç©¶ä»¥é”å®šç›®æ ‡çº¹æ ·ã€‚ç›®æ ‡çº¹æ ·åº”ä¸ºä¼ ç»Ÿçº¹æ ·çš„ä»£è¡¨ï¼Œèƒ½å¤Ÿåæ˜ ç‰¹å®šçš„æ–‡åŒ–ç‰¹è‰²ã€‚å†é’ˆå¯¹ç›®æ ‡çº¹æ ·è¿›è¡Œç‰¹å¾åˆ†æï¼ŒåŒ…æ‹¬çº¹æ ·ä¸»é¢˜çº¹æ ·æ„å›¾è§„å¾‹ã€éª¨éª¼å½¢å¼ã€çº¹æ ·å…ƒç´ ç»„ç»‡æ–¹å¼ç­‰ä¿¡æ¯ã€‚ å½¢çŠ¶æ¼”å˜ï¼Œå¯¹ç¬¬ä¸€éƒ¨åˆ†å¾—åˆ°çš„å…¸å‹å›¾å½¢è¿ç”¨å½¢çŠ¶æ–‡æ³•çš„è§„åˆ™è¿›è¡Œæ¼”å˜ï¼Œç”ŸæˆåŸºæœ¬å›¾å½¢å•å…ƒã€‚å†å¯¹åŸºæœ¬å›¾å½¢å•å…ƒè¿›è¡Œæ´¾ç”Ÿï¼Œä»¥å¾—åˆ°å¤šç§åˆ›æ–°çº¹æ ·å…ƒç´ ã€‚ æ–¹æ¡ˆç”Ÿæˆï¼Œè®¾è®¡å¸ˆå¯¹æ´¾ç”Ÿå‡ºæ¥çš„å¤šç§çº¹æ ·å…ƒç´ è¿›è¡Œç­›é€‰ï¼Œå†ä»¥çº¹æ ·è®¾è®¡æ–‡æ³•ä¸ºçº¦æŸå¯¹çº¹æ ·å…ƒç´ è¿›è¡Œåˆç†ç»„ç»‡ã€é‡æ„ï¼Œä»¥ç”Ÿæˆæ–°çš„çº¹æ ·è®¾è®¡æ–¹æ¡ˆã€‚ å½¢çŠ¶æ–‡æ³•å®æ–½è¿‡ç¨‹ é—®é¢˜å®šä¹‰ï¼šå³å¯¹å³å°†è¦ä½¿ç”¨å½¢çŠ¶æ–‡æ³•çš„å®¢ä½“è¿›è¡Œç ”ç©¶é—®é¢˜çš„ç¡®å®šï¼Œä¸€èˆ¬ä»é€»è¾‘æ¨ç†çš„æ–¹æ³•å¾—å‡ºå¯¹é—®é¢˜çš„å®šä¹‰ï¼› åˆå§‹å½¢çŠ¶ç¡®å®šï¼š æ”¶é›†æ ·æœ¬ï¼šé€‰å®šæŸä¸ªé¢†åŸŸçš„å®¢ä½“å®ä¾‹ä½œä¸ºç ”ç©¶å¯¹è±¡ï¼Œå¹¿æ³›æ”¶é›†è¯¥é¢†åŸŸå„ä¸ªå‘å±•é˜¶æ®µçš„å›¾ç‰‡ï¼Œå°†è¿™äº›å›¾ç‰‡è¿›è¡Œæ•´ç†ã€åˆ†ç±»ï¼Œå»é™¤ç±»å‹æ¥è¿‘çš„å›¾ç‰‡ï¼Œæ‰¾å‡ºä»£è¡¨æ€§çš„å›¾ç‰‡ï¼Œå°†å…¶åˆ¶ä½œæˆå¯ä¾›è°ƒæŸ¥çš„æ ·æœ¬ï¼Œå¹¶ä»¥ä¸€å®šçš„æ–¹å¼ç¼–å·ï¼ˆlabelingï¼‰ã€‚ ä¸“å®¶è®¿è°ˆï¼šé‚€é›†ç›¸å…³çš„ä¸“å®¶è¿›è¡Œè®¿è°ˆï¼Œä¸€èˆ¬åº”åŒ…æ‹¬èµ„æ·±è®¾è®¡å¸ˆå’Œæ·±åº¦ä½¿ç”¨è€…ã€‚è®¿è°ˆçš„ä¸»è¦ç›®çš„é¦–å…ˆåœ¨äºå¯¹å½±å“è¯¥çº¹ç†ç‰¹å¾è¿›è¡Œåˆ†ç±»ï¼Œç„¶åå¯¹å„ç±»ç‰¹å¾çš„é‡è¦ç¨‹åº¦åšå‡ºä¸»è§‚è¯„ä»·ï¼Œä»¥ç¡®å®šå„ä¸ªå› å­çš„æƒé‡ï¼å†æ ¹æ®çº¹ç†åˆ†ç±»å’Œä¸“å®¶çš„ç›´è§‚ç»éªŒï¼Œåˆ—ä¸¾å‡ºè¯¥é¢†åŸŸå®ä¾‹ä¸»è¦çš„å¯è¯†åˆ«ç‰¹å¾ï¼Œä¸ºè¿›è¡Œä¸‹ä¸€æ­¥è®¾è®¡å½¢æ€åˆ†æåšå‡†å¤‡ã€‚ è®¾è®¡å½¢æ€åˆ†æï¼šè®¾è®¡å½¢æ€åˆ†ææ³•æ˜¯ç”±è·å…°å­¦è€…Wareï¼Œå…·ä½“è¿‡ç¨‹æ˜¯ï¼š å°†é€‰å–çš„äº§å“æ ·æœ¬å›¾ç‰‡å’Œä¸“å®¶åˆ—ä¸¾çš„äº§å“æ˜¾æ€§ç‰¹å¾åˆ¶æˆè°ƒæŸ¥è¡¨ï¼Œçš„å—è¯•è€…é€‰æ‹©é¢è¦å¹¿ï¼ŒåŒ…æ‹¬ä¸“å®¶ã€è®¾è®¡å¸ˆã€ä¸€èˆ¬ç”¨æˆ·ç­‰ï¼Œå¹´é¾„ã€æ€§åˆ«å’ŒèŒä¸šè¦åˆ†å¸ƒåˆç†ã€‚ ç”±å—è¯•è€…å°†äº§å“æ ·æœ¬ä¸€ä¸€å¯¹ç…§å„ä¸ªå½¢æ€ç‰¹å¾è¿›è¡Œåˆ¤æ–­ï¼Œä»¥â€œå¼ºâ€ã€â€œå¼±â€ã€â€œæ— â€ä½œä¸ºæ ‡å‡†ï¼Œå¹¶å¯¹åº”ä»¥ä¸åŒåˆ†æ•°ã€‚ å¯¹è°ƒæŸ¥ç»“æœè¿›è¡Œç»Ÿè®¡åˆ†æï¼Œåˆ¤æ–­å¹¶æå–äº§å“çš„é£æ ¼ç‰¹å¾ã€‚ å½¢çŠ¶è§„åˆ™çš„ç¡®å®šï¼š ç”Ÿæˆæ€§è§„åˆ™ï¼šç”Ÿæˆæ€§è§„åˆ™çš„å½¢å¼å¯åˆ†ä¸¤ç§ï¼šæ·»åŠ ï¼Œå³ä»æ— åˆ°æœ‰ï¼›ç½®æ¢ï¼Œä»¥ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å…¨æ–°å½¢æ€ä»£æ›¿åŸå½¢æ€ï¼ ä¿®æ”¹æ€§è§„åˆ™ï¼šâ€œä¿®æ”¹â€å°±æ˜¯æŒ‡å¯¹åŸæœ‰å½¢æ€çš„æ”¹å˜ã€å˜å½¢ã€è°ƒæ•´ï¼ç”±äºç”Ÿæˆæ€§è§„åˆ™æ˜¯å¯¹çº¹ç†æœ¬è´¨çš„â€œå˜å¼‚â€ï¼Œå› è€Œä¿®æ”¹æ€§è§„åˆ™åº”ä¾§é‡äºâ€œé—ä¼ â€ï¼Œå¦åˆ™çº¹ç†çš„æ˜¾æ€§ç‰¹å¾å˜å¾—é¢ç›®å…¨éï¼Œå“ç‰Œçš„å»¶ç»­å°†æ— ä»è°ˆèµ·ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¿å°„å˜æ¢ï¼ˆaffine transformï¼‰è¿›è¡Œå˜å½¢ï¼Œæˆ–è€…å¯¹æ•´ä½“è½®å»“æ›²çº¿é‡‡ç”¨è´å¡å°”æ›²çº¿ï¼ˆBezier curveï¼‰è¿›è¡Œæè¿°å¹¶è¿›è¡Œéç²¾ç¡®æ€§å˜å½¢ã€‚ è®¾è®¡è¦æ±‚ä¸çº¦æŸè§„åˆ™ï¼š åœ¨å®Œæˆä»¥ä¸Šä¸¤é¡¹åˆå§‹å½¢çŠ¶å’Œæ–‡æ³•è§„åˆ™çš„ç¡®ç«‹ä¹‹åï¼Œè¿˜è¦å¯¹äºå·²ç¡®å®šé—®é¢˜çš„è¾¹ç•Œå’Œçº¦æŸè¿›è¡Œè§„å®šã€‚ ç›®å‰å½¢çŠ¶æ–‡æ³•è½å®è¿›å±•ï¼š å½¢çŠ¶ç”Ÿæˆï¼šTranglifyç®—æ³•ç”ŸæˆéšæœºèƒŒæ™¯ å½¢çŠ¶å¸ƒå±€ï¼šé€šè¿‡å¸ƒå±€é£æ ¼ï¼ˆå¹³é“º/éšæœºï¼‰ã€å¸ƒå±€åŒºåŸŸï¼ˆå…¨å±€/ç¯ç»•ï¼‰ã€å½¢çŠ¶æ—‹è½¬å’Œå½¢çŠ¶ç¼©æ”¾çš„pythonä»£ç å®ç° é¢œè‰²æ¸²æŸ“ï¼šå›¾ç‰‡é¢œè‰²æ•´ä¸ªè‰²ç›˜é€‰æ‹©æ›¿æ¢","categories":[{"name":"Research","slug":"Research","permalink":"http://keefe.wang/categories/Research/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"å½¢çŠ¶æ–‡æ³•","slug":"å½¢çŠ¶æ–‡æ³•","permalink":"http://keefe.wang/tags/å½¢çŠ¶æ–‡æ³•/"}]},{"title":"å‰ç«¯è¦å­¦ä¹ çš„httpåŸºç¡€çŸ¥è¯†","slug":"2017-10-05-http-primary-knowledge-in-Frontend","date":"2017-09-21T04:00:00.000Z","updated":"2020-10-20T09:48:27.891Z","comments":true,"path":"2017/09/21/2017-10-05-http-primary-knowledge-in-Frontend.html","link":"","permalink":"http://keefe.wang/2017/09/21/2017-10-05-http-primary-knowledge-in-Frontend.html","excerpt":"HTTPåè®®åŸºç¡€HTTPHyper Text Transfer Protocol(è¶…æ–‡æœ¬ä¼ è¾“åè®®)ï¼ŒåŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼Œé»˜è®¤ç«¯å£å·80ã€‚HTTPåè®®æ˜¯å‰ç«¯æŠ€æœ¯åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œæ‰€ä»¥æŒæ¡å…¶ç›¸å…³çŸ¥è¯†ä¹Ÿæ˜¯å¿…è¦æŠ€èƒ½ä¹‹ä¸€ã€‚","text":"HTTPåè®®åŸºç¡€HTTPHyper Text Transfer Protocol(è¶…æ–‡æœ¬ä¼ è¾“åè®®)ï¼ŒåŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼Œé»˜è®¤ç«¯å£å·80ã€‚HTTPåè®®æ˜¯å‰ç«¯æŠ€æœ¯åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œæ‰€ä»¥æŒæ¡å…¶ç›¸å…³çŸ¥è¯†ä¹Ÿæ˜¯å¿…è¦æŠ€èƒ½ä¹‹ä¸€ã€‚ HTTPå·¥ä½œåŸç†å·¥ä½œäºC/Sæ¶æ„ä¸Šï¼Œæµè§ˆå™¨ä½œä¸ºhttpå®¢æˆ·ç«¯é€šè¿‡URLå‘WEBæœåŠ¡å™¨ï¼ˆApacheã€IISï¼‰å‘é€æ‰€æœ‰è¯·æ±‚ HTTPçš„ç‰¹ç‚¹ æ— è¿æ¥ï¼šæ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ˆèŠ‚çœä¼ è¾“æ—¶é—´ï¼‰ åª’ä½“ç‹¬ç«‹ï¼šä»»ä½•ç±»å‹å†…å®¹æ•°æ®éƒ½å¯é€šè¿‡HTTPå‘é€ï¼ˆåˆ¶å®šMIME-typeå†…å®¹ç±»å‹ï¼‰ æ— çŠ¶æ€ï¼šå¯¹äº‹åŠ¡æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼Œè‹¥è¦åœ¨å½“å‰çŠ¶æ€è¿›è¡Œåç»­å¤„ç†ï¼Œåˆ™å¿…é¡»é‡ä¼ ï¼ˆå¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ï¼Œä½†æ˜¯åº”ç­”æ¯”è¾ƒå¿«ï¼‰ HTTPè¯·æ±‚ä¸è¿”å› HTTPè¯·æ±‚ï¼š 123GET / HTTP/1.0User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)Accept: */* å…¶ä¸­ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚å‘½ä»¤ï¼Œå‘½ä»¤æœ‰POST/GET/PUT/DELETEç­‰ç­‰ï¼Œä¸”è¯·æ±‚çš„èµ„æºåé¢è¦æ·»åŠ æ‰€ä½¿ç”¨çš„åè®®ç‰ˆæœ¬ï¼Œè¯¦è§é™„å½•ï¼›ç¬¬ä¸‰è¡Œä¸­çš„AcceptæŒ‡å®šçš„æ˜¯å¯ä»¥æ¥å—çš„MIME typeï¼Œä¸å›åº”å¤´ä¸­çš„Content-Typeå­—æ®µç›¸å¯¹åº”ã€‚ HTTPå›åº”ï¼š 12345678910HTTP/1.0 200 OK Content-Type: text/plainContent-Length: 137582Expires: Thu, 05 Dec 1997 16:00:00 GMTLast-Modified: Wed, 5 August 1996 15:55:28 GMTServer: Apache 0.84&lt;html&gt; &lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt; å›åº”ä¿¡æ¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å›åº”å¤´ä¿¡æ¯ï¼Œä¸€éƒ¨åˆ†æ˜¯å›åº”çš„æ•°æ®å’Œå†…å®¹ã€‚å…¶ä¸­ç¬¬ä¸€è¡Œæ˜¯&quot;åè®®ç‰ˆæœ¬ + çŠ¶æ€ç ï¼ˆstatus codeï¼‰ + çŠ¶æ€æè¿°&quot;ï¼›ç¬¬äºŒè¡Œæ˜¯ç”¨æ¥æŒ‡å®šæ•°æ®æ ¼å¼çš„&quot;Content-Typeå­—æ®µ&quot;ã€‚ å„ç‰ˆæœ¬HTTPåè®®çš„åŒºåˆ« HTTP/0.9 åªæœ‰GETä¸€ä¸ªè¯·æ±‚å‘½ä»¤ï¼Œè€Œä¸”æœåŠ¡å™¨åªèƒ½å›åº”HTMLæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡å™¨å‘é€å®Œæ¯•ï¼ŒTCPè¿æ¥å°±å…³é—­ã€‚ HTTP/1.0 å®Œå–„äº†POSTå’ŒHEADå‘½ä»¤ï¼ŒæœåŠ¡å™¨å¯ä»¥å›åº”æ›´å¤šç§æ ¼å¼çš„ï¼ˆMIME type/å¤šç§å‹ç¼©æ–¹æ³•ï¼‰æ•°æ®ï¼Œä½†æ˜¯éœ€è¦åœ¨å›åº”ä¸­æœ‰ä¸€ä¸ªheaderæ¥æè¿°å…ƒæ•°æ®ã€‚å¦å¤–æ·»åŠ äº†çŠ¶æ€å—ã€æƒé™ã€ç¼“å­˜ç­‰ç­‰ã€‚ ä½†æ˜¯ä¸0.9ç‰ˆæœ¬ç›¸åŒçš„æ˜¯ï¼Œæ¯ä¸ªTCPè¿æ¥åªèƒ½å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå‘é€å®Œæˆå°±å…³é—­è¿æ¥ã€‚æ‰€ä»¥æœ‰ä¸€ä¸ªhackæ–¹æ³•ï¼šConnectionå­—æ®µè®¾ç½®ä¸ºkeep-aliveæ¥å®ç°ä¿æŒè¿æ¥å’Œè¯·æ±‚å¤ç”¨ã€‚ HTTP/1.1 æ·»åŠ äº†PUT/PATCH/HEAD/OPTIONS/DELETEè¯·æ±‚å‘½ä»¤ï¼Œä»¥åŠHOSTå­—æ®µæŒ‡å®šæœåŠ¡å™¨çš„åŸŸåï¼ˆè¯¥å­—æ®µå¯ä»¥å°†è¯·æ±‚å‘å¾€åŒä¸€å°æœåŠ¡å™¨çš„ä¸åŒç½‘ç«™ï¼Œæ˜¯è™šæ‹Ÿä¸»æœºå®ç°çš„åŸºç¡€ï¼‰ï¼› æœ€å¤§çš„æ”¹åŠ¨æ˜¯é»˜è®¤æœåŠ¡å™¨è¿æ¥ä¸ºkeep-aliveï¼Œä¸éœ€è¦å£°æ˜Connectionå­—æ®µï¼Œä½†æ˜¯å¦‚æœä¸»åŠ¨å…³é—­è¿æ¥éœ€è¦æ·»åŠ Connection: closeçš„å­—æ®µï¼›æ·»åŠ ç®¡é“æœºåˆ¶ï¼Œå³åœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼›åœ¨ç®¡é“æœºåˆ¶ä¹‹ä¸Šéœ€è¦æœ‰åŒºåˆ†æ•°æ®åŒ…çš„æœºåˆ¶ï¼Œè¯¥ç‰ˆæœ¬æä¾›äº†Content-Lengthå­—æ®µï¼›æœ‰äº†ç®¡é“æœºåˆ¶ï¼Œå°±å¯ä»¥å®ç°åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆä¸ä½¿ç”¨Content-Lengthå­—æ®µçš„æ–¹æ³•ï¼‰ï¼Œåªéœ€è¦è®¾ç½®Transfer-Encodingå­—æ®µä¸ºchunkedå³å¯ï¼Œæ¯ä¸€ä¸ªè¿”å›çš„å†…å®¹æ•°æ®å—ä¹‹å‰è‹å§šæ·»åŠ è¯¥æ•°æ®å—çš„é•¿åº¦ï¼Œæœ€åä¸€ä¸ªé•¿åº¦éœ€è¦è¡¨ç¤ºä¸º0æ¥æ ‡è¯†å›åº”æ•°æ®ç»“æŸã€‚ 1.1ç‰ˆæœ¬ä¸­å”¯ä¸€çš„ç¼ºç‚¹æ˜¯æ•°æ®é€šä¿¡å•çº¿ç¨‹æŒ‰æ¬¡åºè¿›è¡Œï¼Œéå¸¸å®¹æ˜“å µå¡ï¼Œæ‰€ä»¥è¦æ±‚ç½‘é¡µè®¾è®¡æ—¶å‡å°‘è¯·æ±‚ä¹¦å¹¶å¤šå¼€æŒä¹…è¿æ¥ï¼› HTTP/2.0 è¯¥ç‰ˆæœ¬ä¸»è¦æœ‰å››ä¸ªäº®ç‚¹ï¼š äºŒè¿›åˆ¶åè®®ï¼šå¤´ä¿¡æ¯å’Œæ•°æ®å—éƒ½å¯ä»¥æ˜¯äºŒè¿›åˆ¶ï¼ˆè¢«ç§°ä¸ºå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ï¼‰ï¼Œæ›´åŠ å®¹æ˜“è§£æï¼› å¤šå·¥é€šä¿¡ï¼šåœ¨åŒä¸€ä¸ªè¿æ¥é‡Œï¼ŒS/Cä¸¤ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚å’Œå›åº”ï¼Œé¿å…å•çº¿ç¨‹å µå¡ï¼›è¿™ä¸ªæŠ€æœ¯ä¹Ÿä¸ºæœåŠ¡å™¨æ¨é€å¥ å®šäº†åŸºç¡€ï¼› æ•°æ®æµï¼š åœ¨å¤šå·¥é€šä¿¡çš„å‰æä¸‹ï¼Œè¯·æ±‚å’Œå›åº”æ•°æ®å¿…é¡»è¿›è¡Œæ ‡è®°ï¼ˆIDï¼‰ï¼Œæ‰€ä»¥æå‡ºäº†æ•°æ®æµæ¦‚å¿µï¼Œå¥‡æ•°è¡¨æ˜å®¢æˆ·ç«¯å‘å‡ºæ•°æ®æµï¼Œå¶æ•°åˆ™ä¸ºæœåŠ¡å™¨å‘å‡ºï¼›å¦å¤–å®¢æˆ·ç«¯è¿˜å¯ä»¥æŒ‡å®šè¯·æ±‚æ•°æ®æµçš„ä¼˜å…ˆçº§ï¼› å¤´ä¿¡æ¯å‹ç¼©ï¼šé’ˆå¯¹Cookieã€User Agentå­—æ®µçš„é‡å¤å’Œå†—ä½™ï¼Œå¼•å…¥å¤´ä¿¡æ¯å‹ç¼©æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨gzipå’Œcompresså‹ç¼©åå†å‘é€ï¼Œæé«˜é€Ÿåº¦ã€‚ é™„å½•HTTP headerå­—æ®µï¼ˆé€šç”¨å¤´ï¼Œè¯·æ±‚å¤´ï¼Œå“åº”å¤´ï¼Œå®ä½“å¤´ï¼‰ é€šç”¨å¤´ï¼šCache-Control/Connection/Date/Pragma/Transfer-Encoding/Upgrade/Via è¯·æ±‚å¤´ï¼š å­—æ®µå å«ä¹‰ ç¤ºä¾‹ Accept æŒ‡å®šå®¢æˆ·ç«¯èƒ½å¤Ÿæ¥æ”¶çš„å†…å®¹ç±»å‹ Accept-Charset æµè§ˆå™¨å¯ä»¥æ¥å—çš„å­—ç¬¦ç¼–ç é›† Accept-Encoding æŒ‡å®šæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„webæœåŠ¡å™¨è¿”å›å†…å®¹å‹ç¼©ç¼–ç ç±»å‹ Accept-Language æµè§ˆå™¨å¯æ¥å—çš„è¯­è¨€ Accept-Ranges å¯ä»¥è¯·æ±‚ç½‘é¡µå®ä½“çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­èŒƒå›´å­—æ®µ Authorization HTTPæˆæƒçš„æˆæƒè¯ä¹¦ Cookie HTTPè¯·æ±‚å‘é€æ—¶ï¼Œä¼šæŠŠä¿å­˜è¯¥è¯·æ±‚åŸŸåä¸‹æ‰€æœ‰cookieå‘ç»™æœåŠ¡å™¨ Content-Length è¯·æ±‚çš„å†…å®¹é•¿åº¦ Content-Length: 348 Content-Type è¯·æ±‚çš„ä¸å®ä½“å¯¹åº”çš„MIMEä¿¡æ¯ Expect è¯·æ±‚çš„ç‰¹å®šçš„æœåŠ¡å™¨è¡Œä¸º Expect: 100-continue From å‘å‡ºè¯·æ±‚çš„ç”¨æˆ·çš„Email From: user@email.com Host æŒ‡å®šè¯·æ±‚çš„æœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£å· Host: www.zcmhi.com If-Match åªæœ‰è¯·æ±‚å†…å®¹ä¸å®ä½“ç›¸åŒ¹é…æ‰æœ‰æ•ˆ If-Modified-Since è‹¥è¯·æ±‚éƒ¨åˆ†åœ¨æŒ‡å®šæ—¶é—´åè¢«ä¿®æ”¹åˆ™è¯·æ±‚æˆåŠŸï¼Œæœªè¢«ä¿®æ”¹åˆ™è¿”å›304ä»£ç  If-None-Match å¦‚æœå†…å®¹æœªæ”¹å˜è¿”å›304ä»£ç  If-Range å¦‚æœå®ä½“æœªæ”¹å˜ï¼ŒæœåŠ¡å™¨å‘é€å®¢æˆ·ç«¯ä¸¢å¤±éƒ¨åˆ†ï¼Œå¦åˆ™å‘é€æ•´ä¸ªå®ä½“ If-Unmodified-Since åªåœ¨å®ä½“åœ¨æŒ‡å®šæ—¶é—´ä¹‹åæœªè¢«ä¿®æ”¹æ‰è¯·æ±‚æˆåŠŸ Max-Forwards é™åˆ¶ä¿¡æ¯é€šè¿‡ä»£ç†å’Œç½‘å…³ä¼ é€çš„æ—¶é—´ Max-Forwards: 10 Proxy-Authorization è¿æ¥åˆ°ä»£ç†çš„æˆæƒè¯ä¹¦ Range åªè¯·æ±‚å®ä½“çš„ä¸€éƒ¨åˆ†ï¼ŒæŒ‡å®šèŒƒå›´ Range: bytes=500-999 Referer å…ˆå‰ç½‘é¡µçš„åœ°å€ï¼Œå½“å‰è¯·æ±‚ç½‘é¡µç´§éšå…¶å,å³æ¥è·¯ User-Agent åŒ…å«å‘å‡ºè¯·æ±‚çš„ç”¨æˆ·ä¿¡æ¯ User-Agent: Mozilla/5.0 (Linux; X11) Warning å…³äºæ¶ˆæ¯å®ä½“çš„è­¦å‘Šä¿¡æ¯ å“åº”å¤´ï¼š å­—æ®µå å«ä¹‰ ç¤ºä¾‹ Accept-Ranges è¡¨æ˜æœåŠ¡å™¨æ˜¯å¦æ”¯æŒæŒ‡å®šèŒƒå›´è¯·æ±‚åŠå“ªç§ç±»å‹çš„åˆ†æ®µè¯·æ±‚ Age ä»åŸå§‹æœåŠ¡å™¨åˆ°ä»£ç†ç¼“å­˜å½¢æˆçš„ä¼°ç®—æ—¶é—´ï¼ˆä»¥ç§’è®¡ï¼Œéè´Ÿï¼‰ Age: 12 Allow å¯¹æŸç½‘ç»œèµ„æºçš„æœ‰æ•ˆçš„è¯·æ±‚è¡Œä¸ºPOST/GETç­‰ï¼Œä¸å…è®¸åˆ™è¿”å›405 Content-Encoding webæœåŠ¡å™¨æ”¯æŒçš„è¿”å›å†…å®¹å‹ç¼©ç¼–ç ç±»å‹ Content-Encoding: gzip Content-Language å“åº”ä½“çš„è¯­è¨€ Content-Language: en,zh Content-Length å“åº”ä½“çš„é•¿åº¦ Content-Length: 348 Content-Location è¯·æ±‚èµ„æºå¯æ›¿ä»£çš„å¤‡ç”¨çš„å¦ä¸€åœ°å€ Content-Location: /index.htm Content-MD5 è¿”å›èµ„æºçš„MD5æ ¡éªŒå€¼ Content-Range åœ¨æ•´ä¸ªè¿”å›ä½“ä¸­æœ¬éƒ¨åˆ†çš„å­—èŠ‚ä½ç½® Content-Type è¿”å›å†…å®¹çš„MIMEç±»å‹ Content-Type: text/html; charset=utf-8 ETag è¯·æ±‚å˜é‡çš„å®ä½“æ ‡ç­¾çš„å½“å‰å€¼ Expires å“åº”è¿‡æœŸçš„æ—¥æœŸå’Œæ—¶é—´ Expires: Thu, 01 Dec 2010 16:00:00 GMT Last-Modified è¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ Location ç”¨æ¥é‡å®šå‘æ¥æ”¶æ–¹åˆ°éè¯·æ±‚URLçš„ä½ç½®æ¥å®Œæˆè¯·æ±‚æˆ–æ ‡è¯†æ–°çš„èµ„æº Proxy-Authenticate å®ƒæŒ‡å‡ºè®¤è¯æ–¹æ¡ˆå’Œå¯åº”ç”¨åˆ°ä»£ç†çš„è¯¥URLä¸Šçš„å‚æ•° Refresh åº”ç”¨äºé‡å®šå‘æˆ–ä¸€ä¸ªæ–°çš„èµ„æºè¢«åˆ›é€ ï¼Œåœ¨5ç§’ä¹‹åé‡å®šå‘ Retry-After å¦‚æœå®ä½“æš‚æ—¶ä¸å¯å–ï¼Œé€šçŸ¥å®¢æˆ·ç«¯åœ¨æŒ‡å®šæ—¶é—´ä¹‹åå†æ¬¡å°è¯• Retry-After: 120 Server webæœåŠ¡å™¨è½¯ä»¶åç§° Server: Apache/1.3.27 (Unix) (Red-Hat/Linux) Set-Cookie è®¾ç½®Http Cookie Trailer æŒ‡å‡ºå¤´åŸŸåœ¨åˆ†å—ä¼ è¾“ç¼–ç çš„å°¾éƒ¨å­˜åœ¨ Trailer: Max-Forwards Vary å‘Šè¯‰ä¸‹æ¸¸ä»£ç†æ˜¯ä½¿ç”¨ç¼“å­˜å“åº”è¿˜æ˜¯ä»åŸå§‹æœåŠ¡å™¨è¯·æ±‚ Vary: * Warning è­¦å‘Šå®ä½“å¯èƒ½å­˜åœ¨çš„é—®é¢˜ Warning: 199 Miscellaneous warning WWW-Authenticate è¡¨æ˜å®¢æˆ·ç«¯è¯·æ±‚å®ä½“åº”è¯¥ä½¿ç”¨çš„æˆæƒæ–¹æ¡ˆ HTTPè¯·æ±‚æ–¹æ³•GETï¼ˆè¯·æ±‚åˆ¶å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ï¼‰HEADï¼ˆä¸GETç›¸ä¼¼ï¼Œåªç”¨äºè·å–æŠ¥å¤´ï¼‰POSTï¼ˆå‘åˆ¶å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œè¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ç­‰ï¼Œä¼šå¯¼è‡´æ–°èµ„æºå»ºç«‹æˆ–èµ„æºä¿®æ”¹ï¼‰PUTï¼ˆä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£åˆ¶å®šçš„æ–‡æ¡£å†…å®¹ï¼‰CONNECTï¼ˆHTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ï¼‰OPTIONSï¼ˆå…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ï¼‰TRACEï¼ˆå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•è¯Šæ–­ï¼‰DELETEï¼ˆåˆ é™¤åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æŸèµ„æºï¼‰ å¸¸è§çš„MIME typetext/plaintext/htmltext/cssimage/jpegimage/pngimage/svg+xmlaudio/mp4video/mp4application/javascriptapplication/pdfapplication/zipapplication/atom+xml","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Http","slug":"Http","permalink":"http://keefe.wang/tags/Http/"}]},{"title":"Babelçš„ä½¿ç”¨æ–¹æ³•","slug":"2017-09-21-babel-document-study","date":"2017-09-21T04:00:00.000Z","updated":"2020-10-20T09:48:27.903Z","comments":true,"path":"2017/09/21/2017-09-21-babel-document-study.html","link":"","permalink":"http://keefe.wang/2017/09/21/2017-09-21-babel-document-study.html","excerpt":"Babelæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è½¬ç å™¨ï¼Œå¯ä»¥å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç ï¼Œä»è€Œåœ¨ç°æœ‰ç¯å¢ƒæ‰§è¡Œã€‚","text":"Babelæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è½¬ç å™¨ï¼Œå¯ä»¥å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç ï¼Œä»è€Œåœ¨ç°æœ‰ç¯å¢ƒæ‰§è¡Œã€‚ ä½¿ç”¨å‘½ä»¤è¡Œè½¬ç  å®‰è£…babel-cliï¼šnpm install --global babel-cli ä½¿ç”¨ï¼š è½¬ç ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼šbabel compiled.js è½¬ç ç»“æœå†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼šbabel source.js -o compiled.js æ•´ä¸ªç›®å½•è½¬ç ï¼šbabel src -d lib ç”Ÿæˆsource mapæ–‡ä»¶ï¼šbabel src -d lib -s åœ¨package.jsonä¸­ä½¿ç”¨babel-cli åœ¨é¡¹ç›®ä¸­å®‰è£…babel-cliï¼šnpm install --save-dev babel-cli åœ¨package.jsonä¸­è¿›è¡Œé…ç½®ï¼ˆä½¿ç”¨npm run buildå°±å¯ä»¥è¿›è¡Œbabelè½¬ç ï¼‰ï¼š 123456789&#123; // ... \"devDependencies\": &#123; \"babel-cli\": \"^6.0.0\" &#125;, \"scripts\": &#123; \"build\": \"babel src -d lib\" &#125;,&#125; å®‰è£…å’Œæ³¨å†Œ å®‰è£… ES2015è½¬ç è§„åˆ™ npm install â€“save-dev babel-preset-es2015 reactè½¬ç è§„åˆ™ npm install â€“save-dev babel-preset-react ES7ä¸åŒé˜¶æ®µè¯­æ³•ææ¡ˆçš„è½¬ç è§„åˆ™ï¼ˆå…±æœ‰4ä¸ªé˜¶æ®µï¼‰ï¼Œé€‰è£…ä¸€ä¸ª npm install â€“save-dev babel-preset-stage-0 npm install â€“save-dev babel-preset-stage-1 npm install â€“save-dev babel-preset-stage-2 npm install â€“save-dev babel-preset-stage-3 å¦‚æœæ˜¯æƒ³ä½¿ç”¨æ¯”è¾ƒæ–°çš„è¯­æ³•æ—¶ï¼Œæ¯”å¦‚ES7ä¸­çš„async/awaitè¯­æ³•ï¼Œé€‰æ‹©å®‰è£…stage-3æ˜¯æ¯”è¾ƒç¨³å¦¥çš„ã€‚åœ¨å®‰è£…å¥½ä¹‹åï¼Œéœ€è¦åœ¨Babelçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»º.babelrcæ–‡ä»¶å¹¶è¿›è¡Œé…ç½®ï¼š 12345678&#123; \"presets\": [ \"es2015\", \"react\", \"stage-2\" ], \"plugins\": []&#125; webpacké…ç½®babel å®‰è£…ï¼šå®‰è£…æ–¹å¼ä»å¦‚ä¸Šä¸€æ­¥npmå®‰è£…æ–¹å¼ é…ç½®ï¼š 123456789101112131415161718192021222324//webpack1.0module: &#123; loaders: [ &#123; test: /\\.js$/, exclude: /(node_modules|bower_components)/, loader: \"babel\", query: &#123; presets: ['es2015', 'stage-3'] &#125; &#125;, ]&#125;//webpack3.0ï¼Œpresetå¦‚æœå·²ç»åœ¨package.jsonä¸­æŒ‡å®šï¼ˆ`babel:&#123;\"presets\": [\"lastest\"]&#125;`ï¼‰ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨é…ç½®module: &#123; rules: &#123; &#123; test: /\\.js$/, use: 'babel-loader', exclude: /(node_modules|bower_components)/, &#125; &#125;&#125; å¼€å‘ç¯å¢ƒä½¿ç”¨babel-registerbabel-registerçš„ä½œç”¨æ˜¯åœ¨æ¨¡å—ä½¿ç”¨requireå‘½ä»¤è¿›è¡Œå¼•å…¥æ—¶ï¼Œå¯¹è¯¥å‘½ä»¤å¼•å…¥çš„æ¨¡å—è¿›è¡Œbabelçš„è½¬ç ï¼ˆåªè¦æ˜¯js/jsx/es/es6ç±»å‹æ–‡ä»¶ï¼‰ï¼š å®‰è£…babel-registerï¼šnpm install --save-dev babel-register åŠ è½½babel-registerï¼šrequire(&quot;babel-register&quot;);require(&quot;./index.js&quot;);ï¼Œå³å¯å¯¹index.jsè¿›è¡Œè½¬ç ï¼ˆæ³¨æ„ï¼šregisterä¸ä¼šå¯¹å½“å‰jsæ–‡ä»¶è¿›è¡Œè½¬ç ï¼‰ ä½¿ç”¨babel-coreçš„APIè¿›è¡Œè½¬ç  å®‰è£…ï¼šnpm install babel-core --save ä½¿ç”¨ï¼š 123var babel = require('babel-core');// å­—ç¬¦ä¸²è½¬ç babel.transform('code();', options); babel-polyfillBabelé»˜è®¤åªè½¬æ¢æ–°çš„JavaScriptå¥æ³•ï¼ˆsyntaxï¼‰ï¼Œè€Œä¸è½¬æ¢æ–°çš„APIï¼Œæ¯”å¦‚Iteratorã€Generatorã€Setã€Mapsã€Proxyã€Reflectã€Symbolã€Promiseç­‰å…¨å±€å¯¹è±¡ï¼Œä»¥åŠä¸€äº›å®šä¹‰åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.assignï¼‰éƒ½ä¸ä¼šè½¬ç ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒES6åœ¨Arrayå¯¹è±¡ä¸Šæ–°å¢äº†Array.fromæ–¹æ³•ã€‚Babelå°±ä¸ä¼šè½¬ç è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœæƒ³è®©è¿™ä¸ªæ–¹æ³•è¿è¡Œï¼Œå¿…é¡»ä½¿ç”¨babel-polyfillï¼Œä¸ºå½“å‰ç¯å¢ƒæä¾›ä¸€ä¸ªå«ç‰‡ã€‚[^1] ä¾‹å¦‚ä¹‹å‰åœ¨å­¦ä¹ koa2çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†async/awaitçš„æƒ…å†µï¼Œå°±å¿…é¡»å®‰è£…polyfillæ‰èƒ½å¤Ÿæ­£å¸¸åŠ è½½ã€‚","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Babel","slug":"Babel","permalink":"http://keefe.wang/tags/Babel/"}]},{"title":"LESSå®˜æ–¹æ–‡æ¡£å­¦ä¹ ç¬”è®°","slug":"2017-05-10-LESS-document-note","date":"2017-08-02T04:00:00.000Z","updated":"2020-10-20T08:55:07.530Z","comments":true,"path":"2017/08/02/2017-05-10-LESS-document-note.html","link":"","permalink":"http://keefe.wang/2017/08/02/2017-05-10-LESS-document-note.html","excerpt":"LESSæ˜¯ä¸€ç§åŠ¨æ€æ ·å¼è¯­è¨€ã€‚LESSå°†CSSèµ‹äºˆäº†åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚å˜é‡ï¼Œç»§æ‰¿ï¼Œè¿ç®—ï¼Œå‡½æ•°ã€‚LESSæ—¢å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œ (æ”¯æŒIE 6+ï¼ŒWebkitï¼Œ Firefox)ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Node.jsæˆ–è€…Rhinoåœ¨æœåŠ¡ç«¯è¿è¡Œã€‚","text":"LESSæ˜¯ä¸€ç§åŠ¨æ€æ ·å¼è¯­è¨€ã€‚LESSå°†CSSèµ‹äºˆäº†åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚å˜é‡ï¼Œç»§æ‰¿ï¼Œè¿ç®—ï¼Œå‡½æ•°ã€‚LESSæ—¢å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸Šè¿è¡Œ (æ”¯æŒIE 6+ï¼ŒWebkitï¼Œ Firefox)ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Node.jsæˆ–è€…Rhinoåœ¨æœåŠ¡ç«¯è¿è¡Œã€‚ ä½¿ç”¨æ–¹å¼ å®¢æˆ·ç«¯ä½¿ç”¨ åœ¨é¡µé¢é¡¶ç«¯åŠ å…¥ä¸‹é¢ä»£ç ï¼Œåœ¨æœåŠ¡å™¨ç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨lessæ–‡ä»¶ï¼š 12&lt;link rel=\"stylesheet/less\" type=\"text/css\" href=\"styles.less\"&gt;&lt;script src=\"less.js\" type=\"text/javascript\"&gt;&lt;/script&gt; æ³¨æ„ï¼ŒLESSæ–‡ä»¶å¼•å…¥æ—¶relçš„å€¼ä¸ºstylesheet/lessï¼›less.jsä¸€å®šè¦åœ¨LESSæ–‡ä»¶å¼•ç”¨ä¹‹åçš„ä½ç½®ã€‚ åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨ ä½¿ç”¨npmå·¥å…·ç®¡ç†å™¨åœ¨æœåŠ¡å™¨ç«¯å®‰è£…LESSï¼Œä¹‹åå¯ä»¥åœ¨Nodeä¸­è°ƒç”¨ç¼–è¯‘å™¨ï¼Œç±»ä¼¼äºï¼š 1234var less = require('less');less.render('.class &#123; width: 1 + 1 &#125;', function (e, css) &#123; console.log(css);&#125;); å¯ä»¥é€šè¿‡å‘è§£æå™¨ä¼ é€’å‚æ•°å¯¹LESSè¿›è¡Œé…ç½®ï¼š 1234567var parser = new(less.Parser)(&#123; paths: ['.', './lib'], // Specify search paths for @import directives filename: 'style.less' // Specify a filename, for better error messages&#125;);parser.parse('.class &#123; width: 1 + 1 &#125;', function (e, tree) &#123; tree.toCSS(&#123; compress: true &#125;); // Minify CSS output&#125;); ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼è°ƒç”¨LESSè§£æå™¨å¯¹LESSæ–‡ä»¶è¿›è¡Œè§£ææˆ–ç¼–è¯‘ï¼š 12$ lessc styles.less$ lessc styles.less &gt; styles.css è¯­æ³•æ³¨é‡Šå®Œå…¨æ”¯æŒCSSä¸­çš„æ³¨é‡Šæ–¹æ³•ã€‚ å˜é‡LESSä¸­çš„å˜é‡æ˜¯å®Œå…¨çš„â€œå¸¸é‡â€ï¼Œç”±@ç¬¦å·å¼•å¯¼ï¼Œä¸”åªèƒ½å¤Ÿå®šä¹‰ä¸€æ¬¡ï¼š 123456789@nice-blue: #5B83AD;@light-blue: @nice-blue + #111; @fnord: \"I am fnord.\";@var: 'fnord';.text&#123; color: light-blue; content: @@var;&#125; æ··åˆLESSä¸­å®šä¹‰å¥½é€šç”¨çš„classå±æ€§é›†ä¹‹åï¼Œå¯ä»¥åœ¨å¦ä¸€ä¸ªå±æ€§é›†ä¸­è°ƒç”¨ï¼š 12345678.bordered &#123; border-top: dotted 1px black; border-bottom: solid 2px black;&#125;.post a &#123; color: red; .bordered;&#125; å¸¦å‚æ•°æ··åˆ å¯ä»¥åƒå‡½æ•°çš„å‚æ•°ä¸€æ ·ä¸ºæ ·å¼å±æ€§é›†åˆåç§°ä¸­æ·»åŠ å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼ˆå‚æ•°å¯è®¾ç½®å¤šä¸ªï¼Œä½¿ç”¨é€—å·è¿›è¡Œåˆ†å‰²ï¼Œå¯ä»¥ä½¿ç”¨@argumentsä»£æ›¿æ‰€æœ‰å‚æ•°å‡ºç°åœ¨æ ·å¼å±æ€§é›†åˆä½“ä¹‹ä¸­ï¼‰ï¼Œè¯¥æ··åˆæ–¹æ³•æœ€é€‚åˆéšè—æŸå±æ€§é›†åˆä½†éœ€è¦å¼•ç”¨è¯¥å±æ€§é›†åˆæ—¶ä½¿ç”¨ã€‚ 12345678910111213141516171819202122/*å¸¦æœ‰å‚æ•°çš„æ··åˆæ–¹æ³•*/.border-radius (@radius: 5px) &#123; border-radius: @radius; -moz-border-radius: @radius; -webkit-border-radius: @radius;&#125;#header &#123; .border-radius(4px);&#125;/* ä½¿ç”¨@argumentsä»£æ›¿æ‰€æœ‰å‚æ•°è¿›è¡Œè¡¨è¾¾ å…¶ä¸­ä¼ å‚ä¸ªæ•°å¯ä»¥å°‘äºå‚æ•°æ•°é‡ï¼Œä½†æ˜¯å‚ æ•°çš„ä½ç½®å¿…é¡»å¯¹åº”ï¼Œä¸­é—´å‚æ•°ä½ç½®ä¸å¯ç©º*/.box-shadow (@x: 0, @y: 0, @blur: 1px, @color: #000) &#123; box-shadow: @arguments; -moz-box-shadow: @arguments; -webkit-box-shadow: @arguments;&#125;.special-box-shadow &#123; .box-shadow(2px, 5px);&#125; æ¨¡å¼åŒ¹é…å’Œå¯¼å¼•è¡¨è¾¾æ˜¯ æ¨¡å¼åŒ¹é… å¦‚æœæƒ³æ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥æ”¹å˜æ··åˆçš„é»˜è®¤å‘ˆç°ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ–¹å¼ï¼ˆç›¸å½“äºå°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºå¯å˜å‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥è®¾ç½®switchçš„é€‰é¡¹æ¥å¯åŠ¨ç›¸åº”çš„æ¨¡å¼ï¼‰ï¼š 123456789101112131415.mixin (dark, @color) &#123; color: darken(@color, 10%);&#125;.mixin (light, @color) &#123; color: lighten(@color, 10%);&#125;/*æ¥å—ä»»æ„å€¼ï¼Œç›¸å½“äºé»˜è®¤å€¼*/.mixin (@_, @color) &#123; display: block;&#125;@switch: light; .someClass &#123; .mixin(@switch, #888);&#125; å¼•å¯¼ å½“æˆ‘ä»¬æƒ³æ ¹æ®è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼Œè€Œéæ ¹æ®å€¼å’Œå‚æ•°åŒ¹é…æ—¶ï¼Œå¯¼å¼•å°±æ˜¾å¾—éå¸¸æœ‰ç”¨ã€‚å¦‚æœä½ å¯¹å‡½æ•°å¼ç¼–ç¨‹éå¸¸ç†Ÿæ‚‰ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½å·²ç»ä½¿ç”¨è¿‡å¯¼å¼•ã€‚ å¯¼å¼•ä¸­å¯ä»¥ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦æœ‰ï¼š&gt;ã€&gt;=ã€=ï¼ˆè¿™é‡Œç›¸å½“äº==ï¼‰ã€=&lt;ã€&lt; 12345678910111213/* ä½¿ç”¨whenè¯­å¥åˆ¤æ–­æ¡ä»¶ï¼Œlightness()æ˜¯ä¸€ä¸ª åˆ¤æ–­é¢œè‰²äº®åº¦çš„å‡½æ•°ã€‚*/.mixin (@a) when (lightness(@a) &gt;= 50%) &#123; background-color: black;&#125;.mixin (@a) when (lightness(@a) &lt; 50%) &#123; background-color: white;&#125;.mixin (@a) &#123; color: @a;&#125; whenåé¢æ‰€è·Ÿçš„æ¡ä»¶ï¼Œå€¼ä¸ºå¸ƒå°”trueæ—¶æ‰ä¼šæ‰§è¡Œè§£æï¼Œè€ŒLESSä¸­çš„é™¤å»ä¸Šé¢çš„**æ¯”è¾ƒç»“æœè¿”å›å€¼**ä»¥åŠ**å…³é”®è¯true**ä»¥å¤–çš„å€¼éƒ½è§†ä¸ºå¸ƒå°”falseï¼š 12345/*ä¸‹é¢ä¸¤ä¸ªè¯­å¥å«ä¹‰ç›¸åŒ*/.truth (@a) when (@a) &#123; color: black; &#125;.truth (@a) when (@a = true) &#123; color: black; &#125;/*ä¸‹é¢ä¸€å¥æ˜¯ä¸ä¼šåŒ¹é…ä»»ä½•æ¡ä»¶ï¼Œä¹Ÿä¸æ‰§è¡Œ*/.someClass &#123; .truth(255); &#125; å¯¼å¼•ä¹‹åå¯ä»¥æœ‰**å¤šä¸ªæ¡ä»¶**ï¼Œä¸€èˆ¬ä½¿ç”¨`(condition1),(condition2),...`çš„å½¢å¼æ¥è¡¨ç¤ºã€‚ç¬¦åˆå…¶ä¸­çš„ä»»æ„ä¸€ä¸ªæ¡ä»¶ï¼ŒåŒ¹é…å°±å¯ä»¥æˆåŠŸï¼Œå±æ€§é›†æ‰ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸ªå½¢å¼ç›¸å½“äºä½¿ç”¨å…³é”®è¯*or*æ¥è¿æ¥æ¡ä»¶å®ç°æˆ–é—¨ã€‚å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®è¯*and*å®ç°ä¸é—¨ï¼Œä½¿ç”¨*when not*å…³é”®è¯å®ç°éé—¨ã€‚ å¯¼å¼•è¯­å¥whenä¹‹åçš„åˆ¤æ–­æ¡ä»¶ä¸­å¯ä»¥æ˜¯**ä¸å«å‚æ•°**çš„åˆ¤æ–­æ¡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹å¤šä¸ªå‚æ•°çš„æ¯”è¾ƒç­‰ï¼š 1234.mixin (@a) when (@media = mobile) &#123; ... &#125;.mixin (@a) when (@media = desktop) &#123; ... &#125;.max (@a, @b) when (@a &gt; @b) &#123; width: @a &#125;.max (@a, @b) when (@a &lt; @b) &#123; width: @b &#125; å…¶ä¸­åˆ¤æ–­è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ä¸€äº›åˆ¤æ–­å‡½æ•°ï¼Œå¦‚å¸¸è§çš„ç±»å‹åˆ¤æ–­ï¼š`iscolor()`ï¼Œ`isnumber()`ï¼Œ`isstring()`ï¼Œ`iskeyword()`ï¼Œ`isurl()`ï¼›å¸¸è§çš„å•ä½é‡åˆ¤æ–­ï¼š`ispixel()`ï¼Œ`ispercentage()`ï¼Œ`isem()`ã€‚ åµŒå¥—è§„åˆ™æ­¤å¤„çš„åµŒå¥—ï¼ŒæŒ‡çš„æ˜¯å¯¹ä¸Šçº§é‡å¤çš„æ´¾ç”Ÿé€‰æ‹©å™¨è¿›è¡ŒåµŒå¥—æ–¹å¼çš„ç®€å†™ï¼Œä¾‹å¦‚ï¼š 12345678910#header &#123; color: black; &#125;#header .navigation &#123; font-size: 12px;&#125;#header .logo &#123; width: 300px; &#125;#header .logo:hover &#123; text-decoration: none;&#125; å¯ä»¥ç®€å†™ä¸ºï¼š 12345678910#header &#123; color: black; .navigation &#123; font-size: 12px; &#125; .logo &#123; width: 300px; &amp;:hover: text-decoration: none; &#125;&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº:hoverå’Œ:focusè¿™æ ·çš„ä¼ªç±»ç­‰ï¼Œéœ€è¦ä½¿ç”¨ä¸²è”é€‰æ‹©å™¨è€Œéåä»£é€‰æ‹©å™¨æ—¶ï¼ˆä¸²è”é€‰æ‹©å™¨ä¹‹é—´æ— ç©ºæ ¼ï¼Œåä»£é€‰æ‹©å™¨æœ‰ï¼‰åº”è¯¥ä½¿ç”¨&amp;ç¬¦å·ç½®äºå‰é¢ï¼š 12345678.bordered &#123; &amp;.float &#123; float: left; &#125; /*è¾“å‡ºçš„æ˜¯.bordered.floaté€‰æ‹©å™¨*/ .top &#123; margin: 5px; &#125; /*è¾“å‡ºçš„æ˜¯.bordered .topé€‰æ‹©å™¨*/&#125; è¿ç®—æ•°å­—ã€é¢œè‰²æˆ–è€…å˜é‡éƒ½å¯ä»¥å‚ä¸è¿ç®—ï¼Œä¸”æ”¯æŒå¹¶å‘ä¸‹å…¼å®¹å¸¦æœ‰å•ä½çš„æ•°å€¼ï¼š 12345678@base: 5%;@filler: @base * 2; /*è¿”å›10%*/@other: @base + @filler; /*è¿”å›15%*/color: #888 / 4;background-color: @base-color + #111;height: 100% / 2 + @filler;@var: 1px + 5; /*è¾“å‡ºç»“æœæ˜¯6px*/width: (@var + 5) * 2; å‡½æ•°LESSä¸­æä¾›äº†éå¸¸ä¸°å¯Œä¸”æ–¹ä¾¿ä½¿ç”¨çš„å‡½æ•°ï¼ŒåŒ…æ‹¬æœ‰colorå‡½æ•°ã€å­—ç¬¦ä¸²å‡½æ•°ã€æ•°å­¦å‡½æ•°ç­‰ç­‰ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸€ä¸‹colorå‡½æ•°ï¼Œå…¶ä½™çš„å‡½æ•°å¯ä»¥åœ¨å®˜æ–¹çš„APIä¸­æŸ¥è¯¢ä½¿ç”¨^1 Colorå‡½æ•°LESSæä¾›çš„é¢œè‰²è¿ç®—å‡½æ•°ï¼Œæœ¬è´¨æ˜¯å…ˆæŠŠRGBæ ¼å¼è½¬åŒ–æˆHSLï¼ˆå°±æ˜¯è‰²è°ƒã€é¥±å’Œåº¦å’Œäº®åº¦ä¸‰ç»´ç©ºé—´ï¼‰è‰²å½©ç©ºé—´ï¼Œç„¶åå†é€šé“çº§åˆ«è¿›è¡Œæ“ä½œï¼š 123456789101112131415161718hue(@color); /* è¿”å›è¯¥é¢œè‰²çš„hueé€šé“å€¼ */saturation(@color); /* è¿”å›è¯¥é¢œè‰²çš„é¥±å’Œåº¦å€¼ */lightness(@color); /* è¿”å›é¢œè‰²çš„äº®åº¦å€¼ */lighten(@color, 10%); /* é¢œè‰²äº®åº¦æé«˜10% */darken(@color, 10%); /* é¢œè‰²äº®åº¦é™ä½10% */saturate(@color, 10%); /* é¢œè‰²é¥±å’Œåº¦æé«˜10% */desaturate(@color, 10%); /* é¢œè‰²é¥±å’Œåº¦é™ä½10% */fadein(@color, 10%); /* é¢œè‰²é€æ˜åº¦é™ä½10% */fadeout(@color, 10%); /* é¢œè‰²é€æ˜åº¦æé«˜10% */fade(@color, 50%); /* é¢œè‰²é€æ˜åº¦å˜ä¸º50% */spin(@color, 10); /* åœ¨è‰²è½®ä¸Šé¡ºæ—¶é’ˆæ—‹è½¬10Â°spin(@color, -10); /* åœ¨è‰²è½®ä¸Šé€†æ—¶é’ˆæ—‹è½¬10Â°mix(@color1, @color2); /* ä¸¤ç§é¢œè‰²çš„æ··è‰² å‘½åç©ºé—´ä¸ºäº†å¯¹CSSè¿›è¡Œæ›´å¥½çš„å°è£…ï¼Œå¯ä»¥å°†ä¸€äº›å˜é‡æˆ–æ··åˆæ¨¡å¼æ‰“åŒ…èµ·æ¥ï¼Œå¦‚ï¼š 123456789101112131415#bundle &#123; .button () &#123; display: block; border: 1px solid black; background-color: grey; &amp;:hover &#123; background-color: white &#125; &#125; .tab &#123; ... &#125; .citation &#123; ... &#125;&#125;/* ä½¿ç”¨&gt;ç¬¦å·æ¥è¿›è¡Œå¼•å…¥ */#header a &#123; color: orange; #bundle &gt; .button;&#125; ä½œç”¨åŸŸLESSä¸­çš„ä½œç”¨åŸŸç±»ä¼¼äºJSä¸­åŸå‹é“¾ï¼Œé¦–å…ˆä¼šä»æœ¬åœ°æŸ¥æ‰¾å˜é‡æˆ–è€…æ··åˆæ¨¡å—ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯ä¼šå»çˆ¶çº§ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢. importingå¯ä»¥é€šè¿‡@import â€œless-file-name.lessâ€ï¼Œå…¶ä¸­.lessçš„åç¼€æ˜¯å¯é€‰çš„ã€‚ å­—ç¬¦ä¸²æ’å€¼å˜é‡å¯ä»¥é€šè¿‡ä½¿ç”¨@{someName}çš„æ–¹å¼æ¥å°†å˜é‡æ”¾å…¥å­—ç¬¦ä¸²ä¸­ï¼Œä¾‹å¦‚ï¼š 12@base-url: \"http://assets.fnord.com\";background-image: url(\"@&#123;base-url&#125;/images/bg.png\"); é¿å…ç¼–è¯‘å½“æˆ‘ä»¬éœ€è¦è®©ä¸€äº›è¯­å¥å¤±å»ä½œç”¨ï¼Œé¿å…ç¼–è¯‘è¿™äº›è¯­å¥æ—¶ï¼Œå¯ä»¥åœ¨è¯­å¥å­—ç¬¦ä¸²å‰é¢åŠ ä¸Š~ï¼Œä¾‹å¦‚ï¼š 123.class &#123; filter: ~\"ms:alwaysHasItsOwnSyntax.For.Stuff()\";&#125; åœ¨LESSä¸­ä½¿ç”¨JavaScripté€šè¿‡åå•å¼•å·``çš„å½¢å¼åŒ…å›´ï¼š 12@str: \"hello\";@var: ~`\"@&#123;str&#125;\".toUpperCase() + '!'`;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"ES6å…¥é—¨å¿…é¡»äº†è§£çš„çŸ¥è¯†ï¼ˆä¸Šï¼‰","slug":"2017-08-02-ES6-Must-Know-Keypoint-Note","date":"2017-08-02T04:00:00.000Z","updated":"2020-10-20T08:55:12.173Z","comments":true,"path":"2017/08/02/2017-08-02-ES6-Must-Know-Keypoint-Note.html","link":"","permalink":"http://keefe.wang/2017/08/02/2017-08-02-ES6-Must-Know-Keypoint-Note.html","excerpt":"æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å®ä¹ æœŸé—´ï¼Œå›¢é˜Ÿè¿›è¡Œäº†ä¸€æ¬¡ESLintè§„èŒƒçš„è°ƒæ•´å’Œæ–‡æ¡£æ”¹è¿›ï¼Œé‡Œé¢æ¶‰åŠåˆ°äº†éå¸¸å¤šES6çš„å†…å®¹ï¼Œè€Œåœ¨ä¹‹å‰çƒ­åŠ›å›¾é¡¹ç›®ä¸­ä¹Ÿç”¨åˆ°äº†åƒPromiseå¯¹è±¡ã€asyncå‡½æ•°ç­‰çš„çŸ¥è¯†ï¼Œæ‰€ä»¥ä¸“é—¨å‚è€ƒé˜®ä¸€å³°å†™çš„ã€ŠECMAScript6å…¥é—¨ã€‹ä¸€ä¹¦å¯¹ES6çš„ä¸€äº›é‡è¦çŸ¥è¯†ç‚¹è¿›è¡Œä¸€æ¬¡æ•´ç†ã€‚","text":"æœ€è¿‘ä¸€æ®µæ—¶é—´çš„å®ä¹ æœŸé—´ï¼Œå›¢é˜Ÿè¿›è¡Œäº†ä¸€æ¬¡ESLintè§„èŒƒçš„è°ƒæ•´å’Œæ–‡æ¡£æ”¹è¿›ï¼Œé‡Œé¢æ¶‰åŠåˆ°äº†éå¸¸å¤šES6çš„å†…å®¹ï¼Œè€Œåœ¨ä¹‹å‰çƒ­åŠ›å›¾é¡¹ç›®ä¸­ä¹Ÿç”¨åˆ°äº†åƒPromiseå¯¹è±¡ã€asyncå‡½æ•°ç­‰çš„çŸ¥è¯†ï¼Œæ‰€ä»¥ä¸“é—¨å‚è€ƒé˜®ä¸€å³°å†™çš„ã€ŠECMAScript6å…¥é—¨ã€‹ä¸€ä¹¦å¯¹ES6çš„ä¸€äº›é‡è¦çŸ¥è¯†ç‚¹è¿›è¡Œä¸€æ¬¡æ•´ç†ã€‚ Babelè½¬ç å™¨Babelæ˜¯å¯ä»¥å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç çš„è½¬ç å™¨ã€‚ é…ç½®æ–‡ä»¶ .babelrc è¯¥é…ç½®æ–‡ä»¶æ˜¯ä½¿ç”¨Babelå·¥å…·å’Œæ¨¡å—å¿…é¡»çš„ï¼Œå­˜æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œç”¨æ¥è®¾ç½®è½¬ç è§„åˆ™å’Œæ’ä»¶ï¼ŒåŸºæœ¬æ ¼å¼å¦‚ä¸‹ 1234&#123; \"presets\": [], \"plugins\": []&#125; å…¶ä¸­presetså­—æ®µè®¾å®šè½¬ç è§„åˆ™ï¼Œå®˜æ–¹æä¾›ä»¥ä¸‹çš„è§„åˆ™é›†ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…ã€‚ä¸€èˆ¬å®‰è£…æœ€æ–°çš„çš„è§„åˆ™é›† npm install --save-dev babel-preset-latest ï¼Œç„¶åï¼Œé…ç½®æ–‡ä»¶åº”è¯¥å¦‚ä¸‹ 12345678&#123; \"presets\": [ \"latest\", \"react\", \"stage-2\" ], \"plugins\": []&#125; å‘½ä»¤è¡Œè½¬ç babel-cli å®‰è£…å‘½ä»¤ï¼š npm install --global babel-cli åŸºæœ¬ç”¨æ³•ï¼ˆå…¨å±€ç¯å¢ƒä¸‹ï¼‰ï¼š è½¬ç ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼š babel example.js è½¬ç ç»“æœå†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼š babel example.js --out-file compiled.js æ•´ä¸ªç›®å½•è½¬ç ï¼š babel src --out-dir lib å»ºè®®å°†babel-cliå®‰è£…åœ¨é¡¹ç›®ç›®å½•ä¸‹ å®‰è£…å‘½ä»¤ï¼š npm install --save-dev babel-cli; æ”¹å†™package.json 12345678&#123; \"devDependencies\": &#123; \"babel-cli\": \"^6.0.0\" &#125;, \"scripts\": &#123; \"build\": \"babel src -d lib\" &#125;&#125; è½¬ç å‘½ä»¤ï¼ˆåœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼‰ï¼š npm run build; ES6çš„REPLç¯å¢ƒbabel-nodeï¼š babel-nodeéšbabel-cliå·¥å…·å®‰è£…ï¼Œæ‰§è¡Œ babel-node è¿›å…¥REPLç¯å¢ƒå¯ä»¥ç›´æ¥è¿è¡Œå‘½ä»¤äº† babel-register babel-registeræœ¨å—æ”¹å†™requireå‘½ä»¤ï¼Œå¯ä»¥ä½¿æ–‡æ¡£ä¸­ä½¿ç”¨requireåŠ è½½çš„.js/.jsx/.es/.es6åç¼€çš„æ–‡ä»¶å…ˆè¿›è¡Œbabelè½¬ç ï¼š å±€éƒ¨å®‰è£…ï¼š npm install --save-dev babel-register ä½¿ç”¨ï¼ˆå‰å¿…é¡»å…ˆåŠ è½½babel-registerï¼‰ï¼š 12require(\"babel-register\");require(\"./index.js\"); babel-coreï¼šå½“ä»£ç éœ€è¦è°ƒç”¨Babelçš„APIè¿›è¡Œè½¬ç æ—¶ å®‰è£…ï¼š npm install babel-core --save é¡¹ç›®ä¸­è°ƒç”¨ï¼š 123456789101112131415161718var babel = require('babel-core'); // å­—ç¬¦ä¸²è½¬ç babel.transform('code();', options);// =&gt; &#123; code, map, ast &#125; // æ–‡ä»¶è½¬ç ï¼ˆå¼‚æ­¥ï¼‰babel.transformFile('filename.js', options, function(err, result) &#123; result; // =&gt; &#123; code, map, ast &#125;&#125;); // æ–‡ä»¶è½¬ç ï¼ˆåŒæ­¥ï¼‰babel.transformFileSync('filename.js', options);// =&gt; &#123; code, map, ast &#125; // Babel ASTè½¬ç babel.transformFromAst(ast, code, options);// =&gt; &#123; code, map, ast &#125; babel-polyfill Babel é»˜è®¤åªè½¬æ¢æ–°çš„ JavaScript å¥æ³•ï¼ˆsyntaxï¼‰ï¼Œè€Œä¸è½¬æ¢æ–°çš„APIï¼Œæ¯”å¦‚Iteratorã€Generatorã€Setã€Mapsã€Proxyã€Reflectã€Symbolã€Promiseç­‰å…¨å±€å¯¹è±¡ï¼Œä»¥åŠä¸€äº›å®šä¹‰åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.assignï¼‰éƒ½ä¸ä¼šè½¬ç ã€‚å¦‚æœæƒ³è®©è¿™ä¸ªæ–¹æ³•è¿è¡Œï¼Œå¿…é¡»ä½¿ç”¨babel-polyfill Traceusè½¬ç å™¨ ç›´æ¥æ’å…¥ç½‘é¡µ åœ¨çº¿è½¬æ¢ å‘½ä»¤è¡Œè½¬æ¢ å¸¸é‡å’Œå˜é‡é™¤äº†ES5æå‡ºçš„varå’Œfunctionä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼ŒES6æå‡ºäº†letå’Œconstå‘½ä»¤ï¼Œä»¥åŠimportå‘½ä»¤å’Œclasså‘½ä»¤ã€‚æ‰€ä»¥ES6ä¸­ä¸€å…±æœ‰å…­ç§å£°æ˜å˜é‡çš„æ–¹æ³•ã€‚ letå’Œconstå‘½ä»¤ letå‘½ä»¤ ES6æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äºvarï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚ åŸºæœ¬ç”¨æ³•ï¼šç‰¹åˆ«é€‚åˆåœ¨forå¾ªç¯è®¡æ•°å™¨ä¸­ä½¿ç”¨ï¼Œè€Œä¸”å¾ªç¯ä½“æ˜¯å¾ªç¯è¯­å¥çš„è‡ªä½œç”¨åŸŸï¼š 123456789101112var a = [];for (let i = 0; i &lt; 10; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[6](); // å¯ä»¥é¿å…é—­åŒ…ä¸­åªèƒ½è¯»å–æœ€åä¸€ä¸ªå€¼ for (let i = 0; i &lt; 3; i++) &#123; let i = 'abc'; console.log(i);&#125; // abc ç‰¹ç‚¹ ä¸å­˜åœ¨å˜é‡æå‡ï¼ˆå˜é‡æå‡æ˜¯æŒ‡å˜é‡åœ¨å£°æ˜ä¹‹å‰å¯ä»¥ä½¿ç”¨ä½†æ˜¯å€¼ä¸ºundefinedï¼‰ æš‚æ—¶æ€§æ­»åŒºï¼šåªè¦å—ä¸­æœ‰letå£°æ˜å˜é‡è¯­å¥ï¼Œè¯¥å˜é‡åœ¨è¯¥å—ä¸­å°±å¿…é¡»æœä»letè¯­å¥çš„è§„åˆ™ï¼ˆconstä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ï¼Œæ‰€ä»¥typeofä¹Ÿæ˜¯ä¸å®‰å…¨çš„ ä¸å…è®¸é‡å¤å£°æ˜ï¼šåŒ…æ‹¬åœ¨ç›¸åŒä½œç”¨åŸŸå†…ç¦æ­¢é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ï¼ˆåªè¦å‡ºç°letå°±ä¸å…è®¸ï¼ŒåŒ…æ‹¬varï¼‰ï¼Œä»¥åŠå‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•° å—çº§ä½œç”¨åŸŸ ç”±äºå†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ï¼Œç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²æˆä¸ºå…¨å±€å˜é‡ã€‚ letå®é™…ä¸Šä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸï¼š 1234567function f1() &#123; let n = 5; if (true) &#123; let n = 10; &#125; console.log(n); // 5&#125; ç‰¹ç‚¹ å—çº§ä½œç”¨åŸŸå¯ä»¥ä»»æ„åµŒå¥—ï¼Œä½†æ˜¯å¤–å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ å®é™…ä¸Šè®©ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ä¸å†å¿…è¦ï¼ˆç›´æ¥å°†éœ€è¦ç«‹å³æ‰§è¡Œçš„å‡½æ•°å†…éƒ¨ä»£ç å†™åœ¨{}å—çº§ä½œç”¨åŸŸä¸­å³å¯ï¼‰ å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜ ES6æ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¸­å£°æ˜å‡½æ•°ï¼ˆåœ¨ES5ä¸­å‡½æ•°å£°æ˜åªèƒ½åœ¨å‡½æ•°ä½œç”¨åŸŸæˆ–å…¨å±€ä½œç”¨åŸŸä¸­è¿›è¡Œï¼‰ï¼Œä¸”å—çº§ä½œç”¨åŸŸä¸­çš„å‡½æ•°å£°æ˜è¡Œä¸ºç±»ä¼¼äºletï¼Œï¼Œä½†å¿…é¡»åœ¨æœ‰å¤§æ‹¬å·çš„æƒ…å†µä¸‹æˆç«‹ï¼Œä¸”åœ¨å—çº§ä½œç”¨åŸŸå¤–ä¸å¯å¼•ç”¨ã€‚ ä½†æ˜¯æµè§ˆå™¨ä¸éµå®ˆä¸Šè¿°è§„å®šï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ–¹å¼ï¼š å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•° å‡½æ•°å£°æ˜ç±»ä¼¼äºvarï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ æ‰€ä»¥å°½é‡ä¸è¦åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ï¼Œè‹¥éè¦å£°æ˜ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼è€Œéå‡½æ•°å£°æ˜è¯­å¥ã€‚ doè¡¨è¾¾å¼ å—çº§ä½œç”¨åŸŸå†…çš„letå£°æ˜çš„å˜é‡æ— æ³•åœ¨ä½œç”¨åŸŸå¤–è¢«è®¿é—®ï¼Œæ‰€ä»¥æå‡ºäº†doè¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿å—çº§ä½œç”¨åŸŸè¡¨ç°ä¸ºè¡¨è¾¾å¼å¹¶æœ‰è¿”å›å€¼ï¼š 1234let x = do &#123; let t = f(); t * t + 1;&#125;; constå‘½ä»¤ å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œå£°æ˜ä¹‹åè¯¥å€¼ä¸èƒ½æ”¹å˜ã€‚æ‰€ä»¥ä¸€æ—¦å£°æ˜å¿…é¡»èµ‹å€¼ï¼ ç‰¹ç‚¹ï¼š ä¸ä¼šè¢«æå‡ï¼› å­˜åœ¨æš‚æ—¶æ€§æ­»åŒº å°†ä¸€ä¸ªå¼•ç”¨å˜é‡å£°æ˜ä¸ºå¸¸é‡éœ€è¦å°å¿ƒï¼ˆè¯¥å¸¸é‡æŒ‡å‘å¼•ç”¨å˜é‡çš„åœ°å€ï¼Œä½†æ˜¯é‡Œé¢çš„å†…å®¹æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ‰€ä»¥å¯¹è±¡å¸¸é‡ä¸å¯ä»¥è¢«é‡æ–°èµ‹å€¼ä¸ºæ–°çš„å¼•ç”¨å˜é‡ï¼‰ å¦‚æœæƒ³è®©å¯¹è±¡ä»¥åŠå¯¹è±¡é‡Œçš„å†…å®¹åªè¯»ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ const foo = Object.freeze({}); é¡¶å±‚å¯¹è±¡çš„å±æ€§ é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯windowå¯¹è±¡ï¼Œåœ¨NodeæŒ‡çš„æ˜¯globalå¯¹è±¡ã€‚ES5ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯è¿™æ ·å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼š æ²¡æ³•åœ¨ç¼–è¯‘æ—¶æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼ˆåªèƒ½è¿è¡Œæ—¶æŠ¥é”™ï¼‰ å®¹æ˜“è«åå…¶å¦™åˆ›å»ºå…¨å±€å˜é‡ é¡¶å±‚å¯¹è±¡å¯ä»¥éšå¤„è¯»å†™ï¼Œä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ æ‰€ä»¥ES6æå‡ºäº†ï¼š varå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ letå‘½ä»¤ã€constå‘½ä»¤å’Œclasså‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼š 12let b = 1;window.b // undefined globalå¯¹è±¡ ES5ä¸­çš„é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­æ˜¯windowï¼Œæµè§ˆå™¨å’ŒWebWorkeré‡Œé¢selfä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œåœ¨Nodeé‡Œé¢æ˜¯global å¯¹äºthiså˜é‡æ¥è¯´ï¼ŒES5å…¨å±€ç¯å¢ƒthisè¿”å›é¡¶å±‚å¯¹è±¡ï¼›Nodeå’ŒES6æ¨¡å—è¿”å›å½“å‰æ¨¡å—ï¼›å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡ŒæŒ‡å‘å¯¹è±¡ï¼Œå¦åˆ™æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹è¿”å›undefinedï¼› å˜é‡çš„è§£æ„èµ‹å€¼ æ•°ç»„çš„è§£æ„èµ‹å€¼ ç”¨æ³•ï¼š let[a, b, c] = [1, 2, 3]; åªè¦ä¸¤è¾¹çš„æ•°ç»„ç»“æ„æ¨¡å¼ç›¸åŒï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ•°ç»„è§£æ„èµ‹å€¼ã€‚ ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼š å·¦è¾¹æ¨¡å¼å˜é‡å¤šäºå³è¾¹æ•°ç»„å…ƒç´ å˜é‡ï¼Œè§£æ„ä¸æˆåŠŸï¼Œè¿”å›undefined å·¦è¾¹æ¨¡å¼å˜é‡å°‘äºå³è¾¹æ•°ç»„å…ƒç´ å˜é‡ï¼Œè§£æ„æˆåŠŸ ç­‰å·å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆä¸¥æ ¼è®²ï¼Œå¯éå†çš„æ•°æ®ç»“æ„ï¼‰ï¼ŒæŠ¥é”™ äº‹å®ä¸Šï¼Œåªè¦å…·æœ‰Iteratorè§£æ„çš„æ•°æ®ç»“æ„ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„çš„å½¢å¼è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œä¾‹å¦‚ let [x, y, z] = Set([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]); , é»˜è®¤å€¼ï¼šè§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ï¼Œä½¿ç”¨è¡¨è¾¾å¼æ¥èµ‹å€¼ï¼Œä½†æ˜¯é»˜è®¤å€¼å¯¹åº”çš„æ•°ç»„ä¸­çš„ä½ç½®å¦‚æœä¸æ˜¯ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼ä¸ä¼šç”Ÿæ•ˆï¼š 12let [x, y = 'b'] = ['a']; // x='a', y='b'let [x, y = 'b'] = ['a', undefined]; // x='a', y='b' é»˜è®¤å€¼æ˜¯ä¸€ä¸ªæƒ°æ€§æ±‚å€¼çš„è¡¨è¾¾å¼ï¼Œåªæœ‰å³è¾¹æ•°ç»„ä¸­æ²¡æœ‰æˆ–è€…undefinedæ—¶æ‰ä¼šæ±‚å€¼ 123456789function f() &#123; console.log('aaa');&#125;let [x = f()] = [1]; //æ­¤å¤„f()ä¸ä¼šæ±‚å€¼ï¼Œå› ä¸ºå³è¾¹å·²ç»èµ‹å€¼æˆåŠŸ let [x = 1, y = x] = []; // x=1; y=1let [x = 1, y = x] = [2]; // x=2; y=2let [x = 1, y = x] = [1, 2]; // x=1; y=2let [x = y, y = 1] = []; // ReferenceError å¯¹è±¡çš„è§£æ„èµ‹å€¼ æŒ‰ç…§å¯¹è±¡çš„åŒåå±æ€§å¯ä»¥è¿›è¡Œæ­£ç¡®å¾—è§£æ„èµ‹å€¼ 123456let &#123; bar, foo &#125; = &#123; foo: \"aaa\", bar: \"bbb\" &#125;;foo // \"aaa\"bar // \"bbb\" let &#123; baz &#125; = &#123; foo: \"aaa\", bar: \"bbb\" &#125;;baz // undefined å…¶çœŸæ­£çš„æœºåˆ¶ä¸ºï¼š let { foo: foo, bar: bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; æ³¨æ„å†’å·åé¢çš„æ‰æ˜¯çœŸæ­£çš„å˜é‡ æ‰€ä»¥ let { foo: baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; ä¸­bazæ‰è¢«èµ‹å€¼ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ç”±letè¿›è¡Œå£°æ˜ï¼Œä¸å¯ä»¥é‡æ–°å£°æ˜ï¼Œå¯ä»¥ä½¿ç”¨varæ›¿æ¢ï¼Œä¹Ÿå¯ä»¥è¯•ç”¨ä¸€ä¸‹çš„æ–¹å¼ï¼š 1234567891011let foo;(&#123;foo&#125; = &#123;foo: 1&#125;); // æˆåŠŸï¼Œåœ†æ‹¬å·å¿…é¡»æœ‰ï¼Œå¦åˆ™ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªä»£ç å—è€Œéèµ‹å€¼è¯­å¥let baz;(&#123;bar: baz&#125; = &#123;bar: 1&#125;); // æˆåŠŸ// é”™è¯¯çš„å†™æ³•let x;&#123;x&#125; = &#123;x: 1&#125;;// SyntaxError: syntax error, &#123;&#125;ä¼šè¢«ç†è§£æˆä¸€ä¸ªä»£ç å— // æ­£ç¡®çš„å†™æ³•(&#123;x&#125; = &#123;x: 1&#125;); è§£æ„èµ‹å€¼å¤±è´¥ä¼šè¿”å›undefinedï¼Œä¸æ•°ç»„ç›¸åŒï¼Œå¯¹è±¡ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„ï¼Œç‰¢è®°å†’å·å‰çš„ä¸€èˆ¬ä¸ºæ¨¡å¼ï¼Œè¦åˆ†æ¸…æ¨¡å¼å’ŒçœŸæ­£çš„å˜é‡ï¼›å¯¹è±¡ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼çš„è¡¨è¾¾å¼ä¹Ÿæ˜¯æƒ°æ€§æ±‚å€¼ï¼ˆä»»ä½•éundefinedçš„å€¼éƒ½ä¼šå¯¹é»˜è®¤å€¼è¿›è¡Œè¦†ç›–ï¼‰ï¼Œå¸¸ç”¨ä¾‹å­ï¼š let { log, sin, cos } = Math; æ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡è§£æ„èµ‹å€¼ç­‰å·å³è¾¹å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼ å­—ç¬¦ä¸²åˆ†è§£ä¸ºæ•°ç»„ï¼š const [a, b, c, d, e] = &#39;hello&#39;; å­—ç¬¦ä¸²ï¼ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰å±æ€§è§£æ„èµ‹å€¼ï¼šlet {length : len} = &#39;hello&#39;; æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼ ç”±äºNumberå’ŒBoolå€¼éƒ½æ˜¯å€¼ç±»å‹ï¼Œæ‰€ä»¥è§£æ„èµ‹å€¼å‰éœ€è¦è½¬æ¢ä¸ºå¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨toStringæ–¹æ³•ï¼š 12let &#123;toString: s&#125; = 123;s === Number.prototype.toString // true ç”±äºundefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œè§£æ„èµ‹å€¼ å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼ å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼å°±æ˜¯åœ¨å‡½æ•°çš„å‚æ•°ä½ç½®è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ•°ç»„è§£æ„èµ‹å€¼ã€å¯¹è±¡è§£æ„èµ‹å€¼ã€å­—ç¬¦ä¸²è§£æ„èµ‹å€¼ç­‰ï¼Œæ”¯æŒé»˜è®¤å€¼ï¼ˆé»˜è®¤å€¼æ˜¯å½“è§£æ„å¤±è´¥ä¼šè¿”å›çš„å€¼ï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥æ•°ç»„ã€å¯¹è±¡ 1234567891011121314151617function move(&#123;x = 0, y = 0&#125; = &#123;&#125;) &#123; return [x, y];&#125; //è¯¥å¤„ä¸ºx,yæŒ‡å®šé»˜è®¤å€¼ move(&#123;x: 3, y: 8&#125;); // [3, 8]move(&#123;x: 3&#125;); // [3, 0]move(&#123;&#125;); // [0, 0]move(); // [0, 0] function move(&#123;x, y&#125; = &#123; x: 0, y: 0 &#125;) &#123; return [x, y];&#125; //è¯¥å¤„ä¸ºå‡½æ•°çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè¿™é‡Œè¦è¿›è¡Œæ·±å…¥ç ”ç©¶ move(&#123;x: 3, y: 8&#125;); // [3, 8]move(&#123;x: 3&#125;); // [3, undefined]move(&#123;&#125;); // [undefined, undefined]move(); // [0, 0] åœ†æ‹¬å·é—®é¢˜ï¼šå°½é‡ä¸è¦å†è§£æ„èµ‹å€¼çš„æ¨¡å¼ï¼ˆç­‰å·å·¦è¾¹çš„ä¸€å †ï¼‰ä¸­æ”¾ç½®åœ†æ‹¬å· ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„ä¸‰ç§æƒ…å†µ å˜é‡å£°æ˜è¯­å¥ä¸­æ¨¡å¼ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å· å‡½æ•°å‚æ•°ä¸­æ¨¡å¼ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å· èµ‹å€¼è¯­å¥ä¸­ï¼Œä¸èƒ½åœ¨æ¨¡å¼å¤–/åµŒå¥—æ¨¡å¼ä¸­çš„ä¸€å±‚å¥—åœ†æ‹¬å· å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ åªæœ‰ä¸€ç§ï¼šèµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†å¯ä»¥ä½¿ç”¨åœ†æ‹¬å· è§£æ„èµ‹å€¼çš„ç”¨é€” äº¤æ¢å˜é‡çš„å€¼ 123let x = 1;let y = 2;[x, y] = [y, x]; ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ 1234567891011121314// è¿”å›ä¸€ä¸ªæ•°ç»„function example() &#123;return [1, 2, 3];&#125;let [a, b, c] = example(); // è¿”å›ä¸€ä¸ªå¯¹è±¡function example() &#123;return &#123; foo: 1, bar: 2&#125;;&#125;let &#123; foo, bar &#125; = example(); å‡½æ•°å‚æ•°çš„å®šä¹‰ 1234567// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼function f([x, y, z]) &#123; /*...*/ &#125;f([1, 2, 3]); // å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼function f(&#123;x, y, z&#125;) &#123; /*...*/ &#125;f(&#123;z: 3, y: 2, x: 1&#125;); æå–JSONæ•°æ®ï¼ˆéƒ½æ”¯æŒåµŒå¥—ç»“æ„ï¼‰ 12345678910let jsonData = &#123; id: 42, status: \"OK\", data: [867, 5309]&#125;; let &#123; id, status, data: number &#125; = jsonData; console.log(id, status, number);// 42, \"OK\", [867, 5309] å‡½æ•°å‚æ•°é»˜è®¤å€¼ 1234567891011jQuery.ajax = function (url, &#123; async = true, beforeSend = function () &#123;&#125;, cache = true, complete = function () &#123;&#125;, crossDomain = false, global = true, // ... more config&#125;) &#123; // ... do stuff&#125;; éå†Mapç»“æ„ 12345678910111213141516171819var map = new Map();map.set('first', 'hello');map.set('second', 'world'); for (let [key, value] of map) &#123; console.log(key + \" is \" + value);&#125;// first is hello// second is world // è·å–é”®åfor (let [key] of map) &#123;// ...&#125; // è·å–é”®å€¼for (let [,value] of map) &#123;// ...&#125; è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•ï¼šconst { SourceMapConsumer, SourceNode } = require(&quot;source-map&quot;); å­—ç¬¦ä¸²çš„æ‰©å±• å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³• ES5åªé™åˆ¶é‡‡ç”¨ç ç‚¹åœ¨\\u0000~\\uFFFFä¹‹é—´çš„å­—ç¬¦ï¼ŒES6è§„å®šåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»ï¼ˆæœ€åJSæœ‰z \\z \\172 \\x7A \\u007A \\u{7A}å…­ç§è¡¨ç¤ºå­—ç¬¦æ–¹æ³•ï¼‰ï¼š 1234567891011\"\\u&#123;20BB7&#125;\"// \"ğ ®·\" \"\\u&#123;41&#125;\\u&#123;42&#125;\\u&#123;43&#125;\"// \"ABC\" let hello = 123;hell\\u&#123;6F&#125; // 123 '\\u&#123;1F680&#125;' === '\\uD83D\\uDE80'// true codePointAt() JSå†…éƒ¨å­—ç¬¦ä»¥UTF-16çš„æ ¼å¼å‚¨å­˜ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®šä¸º2ä¸ªå­—èŠ‚ã€‚å¤§äº2ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼ŒcharAt()å’ŒcharCodeAt()éƒ½ä¸èƒ½è¯»å–æ•´ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å¼•å…¥äº†codePointAt()ï¼Œè¿”å›åè¿›åˆ¶ç ç‚¹ã€‚æƒ³è¿”å›åå…­è¿›åˆ¶ï¼Œå¯ä»¥.toString(16) String.fromCodePoint() å¯è¯†åˆ«å¤§äº0xFFFFçš„å­—ç¬¦ï¼Œä¸ä¸Šé¢çš„codePointAt()æ–¹æ³•æ­£å¥½ç›¸å å­—ç¬¦ä¸²éå†å™¨æ¥å£ ES6å¯ä»¥ä½¿ç”¨for a of bç»“æ„å¯¹å­—ç¬¦ä¸²å¾ªç¯éå†ï¼š 1234567891011var text = String.fromCodePoint(0x20BB7); for (let i = 0; i &lt; text.length; i++) &#123;console.log(text[i]);&#125;// æ— æ³•è¯†åˆ«0xFFFFçš„ç ç‚¹ for (let i of text) &#123;console.log(i);&#125;// \"ğ ®·\" .at() ä½¿ç”¨å«ç‰‡åº“å®ç°&#39;ğ ®·&#39;.at(0)å¯¹0xFFFFå­—ç¬¦è¿›è¡ŒcharAt()æ“ä½œ .normalize() ç”¨æ¥å°†å­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹æ³•ç»Ÿä¸€ä¸ºåŒæ ·çš„å½¢å¼ï¼Œè¿™ç§°ä¸ºUnicodeæ­£è§„åŒ–ã€‚ 1234'\\u01D1'.normalize() === '\\u004F\\u030C'.normalize()// true /*è¯¥å‡½æ•°å¯ä»¥æ¥æ”¶NFC(åˆæˆå½¢å¼)/NFD(åˆ†è§£å½¢å¼)/NFKC/NFKDä½œä¸ºå‚æ•°*/ .includes(), .startsWith(), .endsWith() éƒ½æ˜¯æ‰¾å­—ç¬¦ä¸²ä¸­æ˜¯å¦æ˜¯åŒ…å«ã€ä»¥â€¦å¼€å§‹ã€ä»¥â€¦ç»“æŸçš„ï¼Œå‡è¿”å›boolå€¼ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¯»æ‰¾çš„å­ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¼€å§‹ï¼ˆendæ˜¯ç»“æŸï¼‰å¯»æ‰¾çš„çˆ¶ä¸²çš„ä¸‹æ ‡ï¼š 12345var s = 'Hello world!'; s.startsWith('world', 6) // trueï¼Œè¿™é‡Œè¦æ³¨æ„s.endsWith('Hello', 5) // trues.includes('Hello', 6) // false .repeat() æ¥æ”¶ä¸€ä¸ªå‚æ•°ä½œä¸ºé‡å¤æ¬¡æ•°nï¼ˆn&gt;-1ï¼‰ï¼Œè¿”å›ä¸€ä¸ªé‡å¤næ¬¡çš„æ–°å­—ç¬¦ä¸²ï¼š .padStart(), .padEnd() æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒ‡å®šå­—ç¬¦ä¸²é•¿åº¦ï¼Œç¬¬äºŒä¸ªæ˜¯ç”¨æ¥è¡¥å…¨çš„â€è¡¥ä¸å­—ç¬¦ä¸²â€ï¼ˆè‹¥è¡¥ä¸å­—ç¬¦ä¸²è¶…å‡ºé•¿åº¦åˆ™æˆªå–ï¼Œè‹¥ç¬¬äºŒä¸ªå‚æ•°çœç•¥ç”¨ç©ºæ ¼è¡¥å…¨ï¼Œä¸æƒ³è¦çš„è¯ä½¿ç”¨.trim()ï¼‰ï¼š 12'x'.padStart(5, 'ab') // 'ababx''x'.padEnd(4, 'ab') // 'xaba' æ¨¡æ¿å­—ç¬¦ä¸² ES6å¼•å…¥æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰æ¥æ ‡è¯†ï¼ˆå¯åµŒå¥—ï¼‰ï¼Œå¯ä»¥å½“åšæ™®é€šå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆå¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ï¼‰ï¼š 12345678910111213141516// æ™®é€šå­—ç¬¦ä¸²`In JavaScript '\\n' is a line-feed.` // å¤šè¡Œå­—ç¬¦ä¸²`In JavaScript this isnot legal.` console.log(`string text line 1string text line 2`); // å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ä½¿ç”¨$&#123;è¡¨è¾¾å¼ã€å¯¹è±¡å±æ€§ç”šè‡³è°ƒç”¨å‡½æ•°ç­‰&#125;ï¼Œç‰¢è®°&#123;&#125;ä¸­æœ€åè¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²var name = \"Bob\", time = \"today\";`Hello $&#123;name&#125;, how are you $&#123;time&#125;?` //å­—ç¬¦ä¸²é‡Œå‡ºç°`éœ€è¦è½¬ä¹‰var greeting = `\\`Yo\\` World!`; æ¨¡æ¿ç¼–è¯‘ æ ‡ç­¾æ¨¡æ¿ æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆtagged templateï¼‰ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚ å½“æ¨¡æ¿å­—ç¬¦ä¸²é‡Œæœ‰å˜é‡ï¼Œä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•° å¤„ç†ç»“æœæ˜¯(stringArray, value1, value2)ï¼Œå¤„ç†è¿‡ç¨‹æ˜¯å°†æ‰€æœ‰éå˜é‡çš„éƒ¨åˆ†å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­ï¼Œå‰©ä¸‹çš„å˜é‡ä¾æ¬¡ä¸€ä¸ªä¸ªæ’åœ¨åé¢: 1234567891011121314151617var total = 30;var msg = passthru`The total is $&#123;total&#125; ($&#123;total*1.05&#125; with tax)`; function passthru(literals) &#123;var result = '';var i = 0; while (i &lt; literals.length) &#123; result += literals[i++]; if (i &lt; arguments.length) &#123; result += arguments[i]; &#125;&#125;return result;&#125; msg // \"The total is 30 (31.5 with tax)\" â€œæ ‡ç­¾æ¨¡æ¿â€é‡è¦åº”ç”¨ï¼š è¿‡æ»¤HTMLå­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ åµŒå…¥å…¶ä»–è¯­è¨€ String.raw() ç”¨æ¥å……å½“æ¨¡æ¿å­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–œæ éƒ½è¢«è½¬ä¹‰ï¼ˆæ–œæ å‰é¢å†åŠ ä¸€ä¸ªæ–œæ ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºæ›¿æ¢å˜é‡åçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæºç å¦‚ä¸‹ï¼š 123456789String.raw = function (strings, ...values) &#123; var output = \"\"; for (var index = 0; index &lt; values.length; index++) &#123; output += strings.raw[index] + values[index]; &#125; output += strings.raw[index] return output;&#125; è¯¥å‡½æ•°æ¥å—ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ‰rawæ•°ç»„å±æ€§çš„çš„å¯¹è±¡ æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶ï¼šé»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œæ‰€ä»¥æ— æ³•åµŒå…¥å…¶ä»–è¯­è¨€ï¼ˆä¾‹å¦‚LaTeXï¼‰ï¼Œä½†æ˜¯æ ‡ç­¾æ¨¡æ¿å¯ä»¥ æ­£åˆ™çš„æ‰©å±• RegExpæ„é€ å‡½æ•° ES5ä¸­ï¼ŒRegExpæ„é€ å‡½æ•°å¦‚ä¸‹ï¼š å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼ˆflagï¼‰var regex = new RegExp(&#39;xyz&#39;, &#39;i&#39;); å‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨ç¤ºå¼ï¼Œè¿™æ—¶ä¼šè¿”å›ä¸€ä¸ªåŸæœ‰æ­£åˆ™è¡¨è¾¾å¼çš„æ‹·è´var regex = new RegExp(/xyz/i); ES6å…è®¸æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼ˆflagï¼‰ï¼švar regex = new RegExp(/xyz/ig, &#39;i&#39;);ï¼Œä¸”ç¬¬äºŒä¸ªå‚æ•°ä¼šè¦†ç›–è¡¨è¾¾å¼ä¸­çš„ä¿®é¥°ç¬¦ å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•ï¼š å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰4ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šmatch()ã€replace()ã€search()å’Œsplit()ã€‚ES6å°†è¿™4ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚ String.prototype.match è°ƒç”¨ RegExp.prototype[Symbol.match]ï¼Œä»¥æ­¤ç±»æ¨â€¦ uä¿®é¥°ç¬¦ å«ä¹‰ä¸ºUnicodeæ¨¡å¼ï¼Œå¤„ç†å¤§äº\\uFFFFçš„Unicodeå­—ç¬¦ ç‚¹å­—ç¬¦ï¼šå¯¹äºç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ 1234var s = 'ğ ®·'; /^.$/.test(s) // false/^.$/u.test(s) // true Unicodeå­—ç¬¦è¡¨ç¤ºæ³•ï¼šä½¿ç”¨å¤§æ‹¬å·è¡¨ç¤ºçš„unicodeå­—ç¬¦éœ€è¦åŠ uä¿®é¥°ç¬¦/\\u{20BB7}/u.test(&#39;ğ ®·&#39;) é¢„å®šä¹‰æ¨¡å¼ iä¿®é¥°ç¬¦ï¼šæ·»åŠ uæ‰èƒ½å¤Ÿè¯†åˆ«éè§„èŒƒçš„å­—æ¯ yä¿®é¥°ç¬¦ ç²˜è¿ä¿®é¥°ç¬¦ï¼Œyä¿®é¥°ç¬¦çš„ä½œç”¨ä¸gä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œgä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œyä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰ã€‚ 123456789var s = 'aaa_aa_a';var r1 = /a+/g;var r2 = /a+/y; r1.exec(s) // [\"aaa\"]r2.exec(s) // [\"aaa\"] r1.exec(s) // [\"aa\"]r2.exec(s) // null stickyå±æ€§ flagså±æ€§ RegExp.escape() sä¿®é¥°ç¬¦ï¼šdotAllæ¨¡å¼ åè¡Œæ–­è¨€ Unicodeå±æ€§ç±» æ•°å€¼çš„æ‰©å±• äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶çš„è¡¨ç¤ºæ³• äºŒè¿›åˆ¶0b/0Bï¼Œå…«è¿›åˆ¶0o/0O Number.isFinite(Number), Number.isNaN(Number) åˆ†åˆ«æ£€æŸ¥ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„ã€æ˜¯å¦ä¸ºNaN Number.parseInt(Number), Number.parseFloat(Number) åˆ†åˆ«å°†å‚æ•°ï¼ˆå­—ç¬¦ä¸²ï¼‰è½¬æ¢ä¸ºintå’Œfloatæ•°æ®ç±»å‹ Number.isInteger() ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•´æ•°ï¼ˆ3å’Œ3.0éƒ½å¯ä»¥è¿”å›trueï¼‰ Number.EPSILON() ä¸€ä¸ªæå°çš„å¸¸é‡ï¼Œç”¨æ¥è®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´æ¥ç²¾ç¡®æµ®ç‚¹æ•°è®¡ç®—ï¼š 12345function withinErrorMargin (left, right) &#123; return Math.abs(left - right) &lt; Number.EPSILON;&#125;withinErrorMargin(0.1 + 0.2, 0.3) // truewithinErrorMargin(0.2 + 0.2, 0.3) // false å®‰å…¨è¯ä¹¦å’ŒNumber.isSafeInteger() JavaScriptèƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨-2^53åˆ°2^53ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ã€‚Number.isSafeInteger()åˆ™æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦è½åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…ã€‚éªŒè¯è¿ç®—ç»“æœæ˜¯å¦è½åœ¨å®‰å…¨æ•´æ•°çš„èŒƒå›´å†…ï¼Œä¸è¦åªéªŒè¯è¿ç®—ç»“æœï¼Œè€Œè¦åŒæ—¶éªŒè¯å‚ä¸è¿ç®—çš„æ¯ä¸ªå€¼ã€‚ Mathå¯¹è±¡çš„æ‰©å±• Math.truncæ–¹æ³•ç”¨äºå»é™¤ä¸€ä¸ªæ•°çš„å°æ•°éƒ¨åˆ†ï¼Œè¿”å›æ•´æ•°éƒ¨åˆ†,å¯ä»¥æ¥æ”¶æ•°å­—å’Œæ•°å­—å­—ç¬¦ä¸² Math.signæ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°åˆ°åº•æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€è¿˜æ˜¯é›¶ Math.cbrtæ–¹æ³•ç”¨äºè®¡ç®—ä¸€ä¸ªæ•°çš„ç«‹æ–¹æ ¹ Math.clz32æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„32ä½æ— ç¬¦å·æ•´æ•°å½¢å¼æœ‰å¤šå°‘ä¸ªå‰å¯¼0 Math.imulæ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ä»¥32ä½å¸¦ç¬¦å·æ•´æ•°å½¢å¼ç›¸ä¹˜çš„ç»“æœï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª32ä½çš„å¸¦ç¬¦å·æ•´æ•° Math.froundæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„å•ç²¾åº¦æµ®ç‚¹æ•°å½¢å¼ Math.hypotæ–¹æ³•è¿”å›æ‰€æœ‰å‚æ•°çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ Math.expm1(x)è¿”å›ex - 1ï¼Œå³Math.exp(x) - 1 Math.log1p(x)æ–¹æ³•è¿”å›1 + xçš„è‡ªç„¶å¯¹æ•°ï¼Œå³Math.log(1 + x) Math.log10(x)è¿”å›ä»¥10ä¸ºåº•çš„xçš„å¯¹æ•° Math.log2(x)è¿”å›ä»¥2ä¸ºåº•çš„xçš„å¯¹æ•°ã€‚å¦‚æœxå°äº0ï¼Œåˆ™è¿”å›NaN ES6æ–°å¢äº†6ä¸ªä¸‰è§’å‡½æ•°æ–¹æ³•ï¼š Math.sinh(x) è¿”å›xçš„åŒæ›²æ­£å¼¦ï¼ˆhyperbolic sineï¼‰ Math.cosh(x) è¿”å›xçš„åŒæ›²ä½™å¼¦ï¼ˆhyperbolic cosineï¼‰ Math.tanh(x) è¿”å›xçš„åŒæ›²æ­£åˆ‡ï¼ˆhyperbolic tangentï¼‰ Math.asinh(x) è¿”å›xçš„ååŒæ›²æ­£å¼¦ï¼ˆinverse hyperbolic sineï¼‰ Math.acosh(x) è¿”å›xçš„ååŒæ›²ä½™å¼¦ï¼ˆinverse hyperbolic cosineï¼‰ Math.atanh(x) è¿”å›xçš„ååŒæ›²æ­£åˆ‡ï¼ˆinverse hyperbolic tangentï¼‰ Math.signbit() Math.signbit()æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªæ•°çš„ç¬¦å·ä½æ˜¯å¦è®¾ç½®äº† æŒ‡æ•°è¿ç®—ç¬¦ ä¸¤ä¸ªä¹˜å·ä»£è¡¨æŒ‡æ•°è¿ç®—ç¬¦ æ•°ç»„çš„æ‰©å±• æ‰©å±•è¿ç®—ç¬¦æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆâ€¦ï¼‰ï¼Œå¯å°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚æ‰€ä»¥è¯¥è¿ç®—ç¬¦å¯ä»¥ç”¨æ¥ä»£æ›¿applyè°ƒç”¨å‡½æ•°çš„æ–¹å¼,applyæ–¹æ³•æ˜¯å°†æ•°ç»„å±•å¼€ä¸ºå‡½æ•°çš„å‚æ•°ï¼Œæ‰©å±•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥è¾¾åˆ°æ­¤ç›®çš„ã€‚ æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨ä¸»è¦æœ‰ï¼š åˆå¹¶æ•°ç»„ï¼š[...arr1, ...arr2, ...arr3] ä¸è§£æ„èµ‹å€¼ç»“åˆï¼šconst [first, ...rest] = [1, 2, 3, 4, 5]; å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼› å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°ç»„ï¼šèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«32ä½çš„Unicodeå­—ç¬¦ï¼Œæœ€å¥½ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼› å®ç°äº†Iteratoræ¥å£çš„å¯¹è±¡ï¼š Mapã€Setè§£æ„å’ŒGeneratorå‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ Array.from() Array.fromæ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆDOMæ“ä½œè¿”å›çš„NodeListé›†åˆä»¥åŠå‡½æ•°å†…éƒ¨argumentså¯¹è±¡ï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ES6æ–°å¢çš„æ•°æ®ç»“æ„Setå’ŒMapï¼‰ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ¥å—ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ¥å—ä¸€ä¸ªç±»mapæ–¹æ³•å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ 12345678910111213141516171819// argumentså¯¹è±¡function foo() &#123; var args = Array.from(arguments); // ...&#125;``` ä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œå¯¹æ•°ç»„çš„å¤åˆ¶`arrayCopy = Array.from([1,2,3]);` æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ä¹Ÿå¯ä»¥å°†æŸäº›æ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„ï¼ˆå¿…é¡»æ˜¯éƒ¨ç½²äº†Symbol.iteratoréå†å™¨æ¥å£çš„å¯¹è±¡ï¼‰ï¼š ```javascript// argumentså¯¹è±¡function foo() &#123; var args = [...arguments];&#125; // NodeListå¯¹è±¡[...document.querySelectorAll('div')] Array.of() ES5ä¸­ï¼ŒArrayæ–¹æ³•æ²¡æœ‰å‚æ•°ã€ä¸€ä¸ªå‚æ•°ã€ä¸‰ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›ç»“æœéƒ½ä¸ä¸€æ ·ã€‚åªæœ‰å½“å‚æ•°ä¸ªæ•°ä¸å°‘äº2ä¸ªæ—¶ï¼ŒArray()æ‰ä¼šè¿”å›ç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„ã€‚å‚æ•°ä¸ªæ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚ Array.ofæ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚ 1234Array.of() // []Array.of(undefined) // [undefined]Array.of(1) // [1]Array.of(1, 2) // [1, 2] æ•°ç»„å®ä¾‹çš„copyWithin() å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œstartå’ŒendæŒ‡å®šè¦å¤åˆ¶çš„å­ä¸²ï¼ŒtargetæŒ‡å®šä»å“ªé‡Œå¼€å§‹æ›¿æ¢:[1, 2, 3, 4, 5].copyWithin(0, 3) // [4, 5, 3, 4, 5] targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚ startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ï¼ˆåŠ æ•°ç»„é•¿åº¦å³å¯ï¼‰ã€‚ endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex() æ•°ç»„å®ä¾‹çš„findæ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›undefinedã€‚ 123[1, 5, 10, 15].find(function(value, index, arr) &#123; return value &gt; 9;&#125;) // 10 1findIndex()ä¸find()ç”¨æ³•ç›¸åŒï¼Œè¿”å›å¯»æ‰¾åˆ°çš„æˆå‘˜ä¸‹æ ‡ æ•°ç»„å®ä¾‹çš„fill() fillæ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ï¼š 12['a', 'b', 'c'].fill(7) // [7, 7, 7]['a', 'b', 'c'].fill(7, 1, 2) // ['a', 7, 'c'] æ•°ç»„å®ä¾‹çš„entries(), key()å’Œvalues() ES6æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•â€”â€”entries()ï¼Œkeys()å’Œvalues()â€”â€”ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œå¯ä»¥ç”¨forâ€¦ofå¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯keys()æ˜¯å¯¹é”®åçš„éå†ã€values()æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œentries()æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚ æ•°ç»„å®ä¾‹çš„includes() Array.prototype.includesæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„includesæ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•å±äºES7ï¼Œä½†Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚ æ•°ç»„çš„ç©ºä½ æ•°ç»„çš„ç©ºä½æŒ‡ï¼Œæ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚æ¯”å¦‚ï¼ŒArrayæ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ã€‚ç©ºä½ä¸æ˜¯undefinedï¼Œundefinedæ˜¯å±äºæœ‰å€¼çš„ï¼ å‡½æ•°çš„æ‰©å±• å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ 1234567function Point(x = 0, y = 0) &#123; this.x = x; this.y = y;&#125; var p = new Point();p // &#123; x: 0, y: 0 &#125; å¦‚æœå‚æ•°é»˜è®¤å€¼æ˜¯å˜é‡ï¼Œé‚£ä¹ˆå‚æ•°å°±ä¸æ˜¯ä¼ å€¼çš„ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—é»˜è®¤å€¼è¡¨è¾¾å¼çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚ 123456789let x = 99;function foo(p = x + 1) &#123; console.log(p);&#125; foo() // 100 x = 100;foo() // 101 ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨ 1234function foo(&#123;x, y = 5&#125;) &#123; console.log(x, y); &#125;foo(&#123;x: 1&#125;) // 1, 5 **åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼ å…¥undefinedæ—¶æ‰ä¼šè§¦å‘å‚æ•°é»˜è®¤å€¼** å‡½æ•°çš„lengthå±æ€§ï¼šæŒ‡å‡½æ•°é¢„æœŸä¼ å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œè¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼æ—¶çš„å‚æ•°çš„ä¸ªæ•°ï¼ˆæŒ‡å®šäº†é»˜è®¤å€¼ålengthå±æ€§å¤±çœŸï¼Œä»æŒ‡å®šé»˜è®¤å€¼çš„é‚£ä»¥ä¸ºå¼€å§‹å¤±çœŸï¼Œè€Œä¹‹å‰æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„è¿˜æ˜¯ä¼šè®¡å…¥lengthï¼‰ï¼š(function (a, b = 1, c) {}).length // è¿”å›1 å‚æ•°é»˜è®¤å€¼å’Œä½œç”¨åŸŸ ä¸€æ—¦è®¾ç½®äº†å‚æ•°çš„é»˜è®¤å€¼ï¼Œå‡½æ•°è¿›è¡Œå£°æ˜åˆå§‹åŒ–æ—¶ï¼Œå‚æ•°ä¼šå½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼ˆcontextï¼‰ã€‚ç­‰åˆ°åˆå§‹åŒ–ç»“æŸï¼Œè¿™ä¸ªä½œç”¨åŸŸå°±ä¼šæ¶ˆå¤±ã€‚è¿™ç§è¯­æ³•è¡Œä¸ºï¼Œåœ¨ä¸è®¾ç½®å‚æ•°é»˜è®¤å€¼æ—¶ï¼Œæ˜¯ä¸ä¼šå‡ºç°çš„ã€‚ 1234567891011121314151617181920212223242526272829var x = 1;function f(x, y = x) &#123; console.log(y);&#125;f(2) // ç”±äºå‚æ•°åˆå§‹åŒ–è‡ªå·±å½¢æˆå•ç‹¬ä½œç”¨åŸŸï¼Œæ‰€ä»¥y=x=2ï¼Œä¸è€ƒè™‘å‡½æ•°å¤–çš„å…¨å±€å˜é‡let a = 1;function f(b = a) &#123;let a = 2;console.log(b);&#125;f() // åœ¨è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œå˜é‡xæœ¬èº«æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥æŒ‡å‘å¤–å±‚çš„å…¨å±€å˜é‡x``` è¿™ä¸ªå‚æ•°é»˜è®¤å€¼çš„ä½œç”¨åŸŸæœ‰ä¸€ä¸ªéå¸¸ä¸é”™çš„åº”ç”¨é€”å¾„ï¼šæŒ‡å®šæŸå‚æ•°ä¸å¯å¿½ç•¥ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯æç¤ºï¼š```javascriptfunction throwIfMissing() &#123; throw new Error('Missing parameter');&#125;function foo(mustBeProvided = throwIfMissing()) &#123; return mustBeProvided;&#125;foo() restå‚æ•° restå‚æ•°ä½¿ç”¨â€¦æ‰©å±•è¿ç®—ç¬¦å°†å¤šä½™å‚æ•°æ”¾å…¥æ•°ç»„ä¸­ï¼Œå½¢å¼ä¸º(a, â€¦b),æ‰€ä»¥è¯¥å‡½æ•°å¯ä»¥ä¼ å…¥ä»»æ„æ•°ç›®çš„å‚æ•°ï¼Œè¯¥å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰€æœ‰æ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•ï¼š 123456789const sortNumbers = (...numbers) =&gt; numbers.sort();function push(array, ...items) &#123; items.forEach(function(item) &#123; array.push(item); console.log(item); &#125;);&#125;var a = [];push(a, 1, 2, 3) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrestå‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–çš„å‚æ•°ï¼Œå‡½æ•°çš„lengthå±æ€§ä¹Ÿä¸é€‚ç”¨äºrestå‚æ•°ã€‚ å‡½æ•°å†…éƒ¨ä¸¥æ ¼æ¨¡å¼ åœ¨ES5ä¸­ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ES2016ä¸­åˆ™è§„å®šåªè¦å‡½æ•°å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æ‰©å±•è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°å†…éƒ¨å°±ä¸èƒ½æ˜¾å¼è®¾å®šä¸¥æ ¼æ¨¡å¼ï¼ˆè¿™æ˜¯å› ä¸ºå‡½æ•°å†…éƒ¨ä¸¥æ ¼æ¨¡å¼é€‚ç”¨äºå‡½æ•°ä½“å’Œå‡½æ•°å‚æ•°ï¼Œç”±äºå‡½æ•°æ‰§è¡Œæ˜¯å…ˆæ‰§è¡Œå‡½æ•°å‚æ•°ç»§è€Œæ‰§è¡Œå‡½æ•°ä½“ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å‚æ•°æ‰§è¡Œçš„æ—¶å€™æ— æ³•è·çŸ¥æ˜¯å¦ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¯¼è‡´æŠ¥é”™ï¼‰ã€‚ å¦‚æœéè¦åœ¨æœ‰é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼æˆ–æ‰©å±•è¿ç®—ç¬¦åœ¨å‡½æ•°å‚æ•°ä¸­å‡ºç°å¹¶éœ€è¦å†å‡½æ•°å†…è®¾å®šä¸¥æ ¼æ¨¡å¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ï¼š å…¨å±€æ€§çš„ä¸¥æ ¼æ¨¡å¼ ä½¿ç”¨æ— å‚æ•°çš„ç«‹å³æ‰§è¡Œå‡½æ•°å°†æ‰€éœ€å‡½æ•°åŒ…å«è¿›å»ï¼Œå¹¶åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°ä¸­ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ å‡½æ•°çš„nameå±æ€§ï¼šè¿”å›è¯¥å‡½æ•°çš„å‡½æ•°å 1234var f = function () &#123;&#125;;f.name // \"f\"const bar = function baz() &#123;&#125;;bar.name // \"baz\" ä¸Šé¢ä»£ç ä¸­æ˜¾ç¤ºï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸­å¦‚æœèµ‹å€¼çš„æ˜¯åŒ¿åå‡½æ•°ï¼Œåˆ™å‡½æ•°åè¿”å›è¯¥å˜é‡çš„å˜é‡åï¼Œè‹¥èµ‹å€¼çš„æ˜¯å…·åå‡½æ•°ï¼Œåˆ™è¿”å›è¯¥å…·åå‡½æ•°çš„å‡½æ•°åã€‚ éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š Functionæ„é€ å‡½æ•°è¿”å›çš„å‡½æ•°å®ä¾‹ï¼Œnameå±æ€§çš„å€¼ä¸ºanonymousï¼Œ(new Function).name // &quot;anonymous&quot; bindè¿”å›çš„å‡½æ•°ï¼Œnameå±æ€§å€¼ä¼šåŠ ä¸Šboundå‰ç¼€(function(){}).bind({}).name // &quot;bound &quot; ç®­å¤´å‡½æ•°ï¼švar f = v =&gt; console.log(v); ç®­å¤´å‡½æ•°æ˜¯å®šä¹‰å‡½æ•°çš„ç®€å•æ–¹æ³•ï¼Œç›¸å½“äºåŒ¿åå‡½æ•°ï¼Œâ€˜=&gt;â€™ç¬¦å·å·¦è¾¹æ˜¯å‡½æ•°çš„å‚æ•°ï¼ˆå¦‚æœä¸éœ€è¦å‚æ•°æˆ–è€…éœ€è¦å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨()ä»£æ›¿å‚æ•°ï¼‰ï¼Œå³è¾¹æ˜¯å‡½æ•°ä½“ï¼ˆå¤šä½™ä¸€æ¡è¯­å¥çš„ä»£ç å—éœ€è¦ç”¨{}æ‹¬èµ·æ¥ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡éœ€è¦ä½¿ç”¨()æ‹¬èµ·æ¥ï¼‰ã€‚ 12//å°†ä¸Šé¢sortå‡½æ•°æ”¹è¿›ä¸ºå¯ä»¥æŒ‰ç…§å¤§å°æ’åºçš„æ–¹æ³•var result = values.sort((a, b) =&gt; a - b); éœ€è¦æ³¨æ„çš„æ˜¯ï¼š 1. ç®­å¤´å‡½æ•°ä½“å†…thiså¯¹è±¡æ˜¯å®šä¹‰æ—¶æ‰€åœ¨å¯¹è±¡ï¼Œè€Œéä½¿ç”¨æ—¶æ‰€åœ¨å¯¹è±¡2. ç®­å¤´å‡½æ•°ä¸å¯ä»¥å½“åšæ„é€ å‡½æ•°ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤3. ä¸èƒ½ä½¿ç”¨argumentså¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨restå‚æ•°ä»£æ›¿4. ä¸èƒ½ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•° ç®­å¤´å‡½æ•°è¿˜å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼š 123456const pipeline = (...funcs) =&gt; val =&gt; funcs.reduce((a, b) =&gt; b(a), val);const plus1 = a =&gt; a + 1;const mult2 = a =&gt; a * 2;const addThenMult = pipeline(plus1, mult2);addThenMult(5)// 12 ä¸Šè¿°ä»£ç æ˜¾ç¤ºï¼Œç®­å¤´å‰çš„ï¼ˆè¾“å‡ºï¼‰ä½œä¸ºç®­å¤´åçš„è¾“å…¥ ç»‘å®šthisï¼šè¯¥è¯­æ³•æ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œå‡½æ•°ç»‘å®šè¿ç®—ç¬¦æ˜¯å¹¶æ’çš„ä¸¤ä¸ªå†’å·::ï¼Œå·¦è¾¹ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå³è¾¹ä¸ºä¸€ä¸ªå‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯å°†å‡½æ•°ç»‘å®šåœ¨å·¦è¾¹å¯¹è±¡çš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼ˆå½“å‰thisæŒ‡å‘å·¦è¾¹çš„å¯¹è±¡ï¼‰ï¼›ç”±äºç»‘å®šä¹‹åè¿”å›çš„ä»ç„¶æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥é“¾å¼å†™æ³•ï¼š 12345678910111213141516171819202122232425 foo::bar; // ç›¸å½“äº bar.bind(foo); foo::bar(...arguments); // ç­‰åŒäº bar.apply(foo, arguments); ``` - å°¾è°ƒç”¨ä¼˜åŒ–ï¼šå°¾è°ƒç”¨æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°`function f(x)&#123;return g(x);&#125;`- å°¾é€’å½’ä¼˜åŒ–ï¼šå¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€çš„é”™è¯¯ï¼Œä½†æ˜¯å¿…é¡»åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰å¯ä»¥ç”Ÿæ•ˆï¼š ```javascript //éå°¾é€’å½’ï¼š function Fibonacci (n) &#123; if ( n &lt;= 1 ) &#123;return 1&#125;; return Fibonacci(n - 1) + Fibonacci(n - 2); &#125; //å°¾é€’å½’ï¼š function Fibonacci2 (n , ac1 = 1 , ac2 = 1) &#123; if( n &lt;= 1 ) &#123;return ac2&#125;; return Fibonacci2 (n - 1, ac2, ac1 + ac2); &#125;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"http://keefe.wang/tags/ES6/"}]},{"title":"ä½¿ç”¨Leafletæ’ä»¶åœ¨æµè§ˆå™¨åŠ è½½åœ°å›¾","slug":"2017-06-12-using-leaflet-to-load-map","date":"2017-06-12T04:00:00.000Z","updated":"2020-10-20T08:55:09.844Z","comments":true,"path":"2017/06/12/2017-06-12-using-leaflet-to-load-map.html","link":"","permalink":"http://keefe.wang/2017/06/12/2017-06-12-using-leaflet-to-load-map.html","excerpt":"åœ¨å…¬å¸å®ä¹ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å°±ä¸åœ°å›¾å’Œæ•°æ®å¯è§†åŒ–ç›¸å…³ï¼Œè¿™è®©ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡åœ°å›¾APIã€åŠ è½½å·¥å…·ä»¥åŠç›¸å…³å¼€å‘çš„æˆ‘ä¸€å¼€å§‹éƒ½æœ‰äº›æ‰‹è¶³æ— æªã€‚ä¹‹åæŠ€æœ¯è·¯çº¿æ…¢æ…¢å®šä¸‹æ¥ï¼Œåœ¨æµè§ˆå™¨ä¸­åŠ è½½è…¾è®¯åœ°å›¾çš„ç“¦ç‰‡åœ°å›¾ï¼Œå¹¶åœ¨è¯¥åœ°å›¾ä¸Šæ·»åŠ çƒ­åŠ›å›¾ç­‰å¯è§†åŒ–å›¾è¡¨ã€‚ åœ¨ç»è¿‡ä¸€ç•ªç®€å•çš„è°ƒç ”ä¹‹åï¼Œåœ¨æµè§ˆå™¨åŠ è½½åœ°å›¾æ— éæ˜¯é‡‡ç”¨ç›¸åº”åœ°å›¾å…¬å¸å¼€å‘çš„JavaScript APIï¼Œæˆ–è€…åŠ è½½åœ¨çº¿/ç¦»çº¿ç“¦ç‰‡åœ°å›¾ã€‚åè€…ç”±äºè¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶æˆ–è€…è‡ªå·±å¼€å‘çš„å·¥å…·è¿›è¡ŒåŠ è½½ï¼Œæ‰€ä»¥å®ç°èµ·æ¥è¾ƒä¸ºå¤æ‚ï¼Œè€Œå‰è€…å®ç°èµ·æ¥å°±æ¯”è¾ƒå‚»ç“œäº†ã€‚æœ¬æ–‡ä¸­ä¸»è¦ä½¿ç”¨è…¾è®¯åœ°å›¾ä½œä¸ºå®ä¾‹ä½¿ç”¨åœ°å›¾ï¼ŒåŒæ—¶ä¹Ÿä¼šç®€å•æåŠå…¶ä»–å…¬å¸å¼€å‘çš„åœ°å›¾ã€‚","text":"åœ¨å…¬å¸å®ä¹ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å°±ä¸åœ°å›¾å’Œæ•°æ®å¯è§†åŒ–ç›¸å…³ï¼Œè¿™è®©ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡åœ°å›¾APIã€åŠ è½½å·¥å…·ä»¥åŠç›¸å…³å¼€å‘çš„æˆ‘ä¸€å¼€å§‹éƒ½æœ‰äº›æ‰‹è¶³æ— æªã€‚ä¹‹åæŠ€æœ¯è·¯çº¿æ…¢æ…¢å®šä¸‹æ¥ï¼Œåœ¨æµè§ˆå™¨ä¸­åŠ è½½è…¾è®¯åœ°å›¾çš„ç“¦ç‰‡åœ°å›¾ï¼Œå¹¶åœ¨è¯¥åœ°å›¾ä¸Šæ·»åŠ çƒ­åŠ›å›¾ç­‰å¯è§†åŒ–å›¾è¡¨ã€‚ åœ¨ç»è¿‡ä¸€ç•ªç®€å•çš„è°ƒç ”ä¹‹åï¼Œåœ¨æµè§ˆå™¨åŠ è½½åœ°å›¾æ— éæ˜¯é‡‡ç”¨ç›¸åº”åœ°å›¾å…¬å¸å¼€å‘çš„JavaScript APIï¼Œæˆ–è€…åŠ è½½åœ¨çº¿/ç¦»çº¿ç“¦ç‰‡åœ°å›¾ã€‚åè€…ç”±äºè¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶æˆ–è€…è‡ªå·±å¼€å‘çš„å·¥å…·è¿›è¡ŒåŠ è½½ï¼Œæ‰€ä»¥å®ç°èµ·æ¥è¾ƒä¸ºå¤æ‚ï¼Œè€Œå‰è€…å®ç°èµ·æ¥å°±æ¯”è¾ƒå‚»ç“œäº†ã€‚æœ¬æ–‡ä¸­ä¸»è¦ä½¿ç”¨è…¾è®¯åœ°å›¾ä½œä¸ºå®ä¾‹ä½¿ç”¨åœ°å›¾ï¼ŒåŒæ—¶ä¹Ÿä¼šç®€å•æåŠå…¶ä»–å…¬å¸å¼€å‘çš„åœ°å›¾ã€‚ ä½¿ç”¨JavaScript APIåŠ è½½è…¾è®¯åœ°å›¾ä½¿ç”¨JavaScript APIåœ¨æµè§ˆå™¨åŠ è½½è…¾è®¯åœ°å›¾ï¼Œæ–¹å¼éå¸¸ç®€å•ï¼Œæœ€é‡è¦å°±æ˜¯åœ¨é¡µé¢ä¸­åŠ è½½ç›¸åº”çš„APIçš„jsæ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–åœ°å›¾ç»„ä»¶å³å¯ï¼š 1234567891011121314151617181920212223242526272829303132&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"&gt; &lt;title&gt;ç®€å•åœ°å›¾&lt;/title&gt; &lt;style type=\"text/css\"&gt; #container&#123; min-width:600px; min-height:767px; &#125; &lt;/style&gt; &lt;script charset=\"utf-8\" src=\"http://map.qq.com/api/js?v=2.exp\"&gt;&lt;/script&gt; &lt;script&gt; window.onload = function()&#123; function init() &#123; //åˆå§‹åŒ–åœ°å›¾å‡½æ•°ï¼Œè‡ªå®šä¹‰å‡½æ•°åinit //å®šä¹‰mapå˜é‡ï¼Œè°ƒç”¨qq.maps.Map()æ„é€ å‡½æ•°ï¼Œè·å–åœ°å›¾æ˜¾ç¤ºå®¹å™¨ var map = new qq.maps.Map(document.getElementById(\"container\"), &#123; // åœ°å›¾çš„ä¸­å¿ƒåœ°ç†åæ ‡ï¼š center: new qq.maps.LatLng(39.916527,116.397128), zoom:8 &#125;); &#125; //è°ƒç”¨åˆå§‹åŒ–å‡½æ•°åœ°å›¾ init(); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!--å®šä¹‰åœ°å›¾æ˜¾ç¤ºå®¹å™¨--&gt; &lt;div id=\"container\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ç“¦ç‰‡åœ°å›¾ç›®å‰çš„æµè¡Œçš„äº’è”ç½‘ç“¦ç‰‡åœ°å›¾ç§ç±»æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ …æ ¼åœ°å›¾ç“¦ç‰‡ï¼Œå¦ä¸€ç§æ˜¯çŸ¢é‡åœ°å›¾ç“¦ç‰‡ã€‚ æ …æ ¼åœ°å›¾ç“¦ç‰‡è¾ƒä¸ºä¼ ç»Ÿï¼Œæ˜¯å°†çŸ¢é‡æ•°æ®æ¸²æŸ“æˆä¸º256Ã—256åƒç´ å¤§å°çš„å›¾ç‰‡ï¼Œä¾‹å¦‚ç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾ã€å¤©åœ°å›¾å’Œè…¾è®¯åœ°å›¾ç­‰ï¼Œè¿™äº›åœ°å›¾å¯ä»¥ä½¿ç”¨leafletæ¡†æ¶è¿›è¡Œç“¦ç‰‡çš„åŠ è½½ã€‚çŸ¢é‡åœ°å›¾ç“¦ç‰‡æ˜¯ä»¥jsonæ ¼å¼åˆ†å—ä¼ è¾“ï¼Œåœ¨æµè§ˆå™¨ç«¯åˆ©ç”¨å‰ç«¯æ¡†æ¶å°†åœ°å›¾å±•ç¤ºå‡ºæ¥ï¼Œmapboxå’Œè…¾è®¯åœ°å›¾ä¸­çš„3Dåœ°å›¾å°±æ˜¯çŸ¢é‡åœ°å›¾ç“¦ç‰‡ï¼Œæ”¯æŒä¸‰ç»´æ—‹è½¬ç­‰ã€‚ ä½¿ç”¨leaflet.jså„ä¸ªåœ°å›¾å…¬å¸çš„äº§å“æœ¬èº«æ‹¥æœ‰è¿˜æ¯”è¾ƒå®Œå–„çš„APIå’Œç›¸å…³çš„æ’ä»¶å’Œå·¥å…·ï¼Œæ¯”å¦‚é™¤äº†åœ°å›¾åŠ è½½ä¹‹å¤–çš„æ ‡å¿—å åŠ ã€çƒ­åŠ›å›¾å åŠ ç­‰ã€‚ä½†æ˜¯åœ°å›¾ç“¦ç‰‡çš„åŠ è½½ç›®å‰æ¯”è¾ƒæµè¡Œå’Œå®Œå–„çš„å·¥å…·å°±æ˜¯leaflet.jså·¥å…·,å®ƒé€šè¿‡ä¸‹è½½ç‰¹å®šåœ°å›¾äº§å“çš„ç“¦ç‰‡ï¼ˆä¸€èˆ¬æ˜¯256x256pxå¤§å°ï¼‰ï¼Œå°†ç›¸åº”çš„xã€yåæ ‡å¯¹åº”èµ·æ¥ï¼Œå±•ç¤ºåœ¨htmlæ–‡æ¡£çš„å®¹å™¨ä¸­ã€‚ä¹‹å‰åœ¨ç½‘ä¸Šæœèµ„æ–™ï¼Œè…¾è®¯åœ°å›¾ç“¦ç‰‡çš„èµ„æ–™ä¹Ÿæ˜¯å‡¤æ¯›éºŸè§’ï¼Œè·Ÿå…¬å¸åœ°å›¾éƒ¨é—¨çš„åŒå­¦äº†è§£ä¹‹åä¾¿å¼€å§‹äº†è¿™ä¸ªåœ°å›¾åº”ç”¨çš„å¼€å‘ã€‚ä¸‹é¢å°±ç”¨leafletå·¥å…·åŠ è½½è…¾è®¯åœ°å›¾ç“¦ç‰‡ä½œä¸ºä¾‹å­æ¥å±•ç¤ºå¦‚ä½•è¿›è¡Œåœ°å›¾ç“¦ç‰‡çš„æ“ä½œã€‚ åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šä»£ç ï¼š 1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"&gt; &lt;title&gt;ç®€å•åœ°å›¾&lt;/title&gt; &lt;style type=\"text/css\"&gt; #container&#123; min-width:600px; min-height:767px; &#125; &lt;/style&gt; &lt;script charset=\"utf-8\" src=\"\"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!--å®šä¹‰åœ°å›¾æ˜¾ç¤ºå®¹å™¨--&gt; &lt;div id=\"mapid\"&gt;&lt;/div&gt; &lt;script&gt; var mymap = L.map('mapid').setView([39.90469, 116.40717], 12); L.tileLayer('https://rt&#123;s&#125;.map.gtimg.com/realtimerender?z=&#123;z&#125;&amp;x=&#123;x&#125;&amp;y=&#123;y&#125;&amp;type=vector&amp;style=0', &#123; subdomains: [\"0\",\"1\",\"2\",\"3\"], tms: true, maxZoom:18, minZoom:1, detectRetina: true, attribution: '&amp;copy æ»´æ»´å‡ºè¡Œ' &#125;).addTo(mymap); &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ä¸Šé¢ä»£ç ä¸­å±•ç¤ºçš„å°±æ˜¯åœ¨divå®¹å™¨ä¸­åŠ è½½åœ°å›¾ç“¦ç‰‡çš„å®ä¾‹ï¼Œå…¶ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯è…¾è®¯åœ°å›¾ç“¦ç‰‡çš„ä¸‹è½½åœ°å€https://rt{s}.map.gtimg.com/realtimerender?z={z}&amp;x={x}&amp;y={y}&amp;type=vector&amp;style=0ï¼Œå…¶ä¸­{s}æ˜¯æŒ‡subdomainsï¼Œæ˜¯åœ°å›¾ç“¦ç‰‡çš„é›†ç¾¤ç¼–å·ï¼Œå¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼Œæ­¤å¤„æˆ‘ä»¬ä¼ å…¥çš„æ˜¯[â€œ0â€, â€œ1â€, â€œ2â€, â€œ3â€]ï¼›å…¶æ¬¡æ˜¯{x}ã€{y}ã€{z}ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æŒ‡çš„æ˜¯ç“¦ç‰‡çš„æ¨ªåæ ‡ã€çºµåæ ‡ä»¥åŠç¼©æ”¾ç­‰çº§ã€‚åœ°å›¾å®ä¾‹é€šè¿‡L.map(å®¹å™¨ID)æ¥è¿›è¡Œå£°æ˜ï¼Œé€šè¿‡L.tileLayer().addTo(åœ°å›¾å®ä¾‹)æ–¹æ³•æ¥è¿›è¡ŒåŠ è½½ï¼Œè¯¥æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªåœ°å›¾ç“¦ç‰‡URLå’Œä¸€ä¸ªå‚æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚å…¶ä¸­å‚æ•°å¯¹è±¡ä¸­çš„å‚æ•°é…ç½®å¯ä»¥å‚è€ƒleafletå®˜ç½‘çš„æ–‡æ¡£è¿›è¡Œé…ç½®ã€‚ åœ°å›¾åŠ è½½å®Œæ¯•ä¹‹åï¼Œå¯ä»¥åœ¨åŠ è½½å¥½çš„åœ°å›¾å›¾å±‚ä¸Šç»§ç»­æ·»åŠ æ‰€éœ€è¦çš„æ ‡å¿—ã€çƒ­åŠ›å›¾ç­‰ç­‰ã€‚æˆ‘ä»¬è¿™é‡Œå±•ç¤ºleafletå·¥å…·è‡ªå¸¦çš„çƒ­åŠ›å›¾åŠ è½½æ–¹æ³•ï¼š 123456789101112L.heatLayer(data,&#123; minOpacity: 0.6, maxZoom: 18, max: 500, radius: 12, blur: 0, gradient: &#123; 1: '#00ffe4', 0.7: '#0078ff', 0.5:'#4285ff' &#125;&#125;).addTo(mymap); åŒæ ·æ˜¯åœ¨ä¸€æ ·çš„å®¹å™¨é‡Œæ·»åŠ å›¾å±‚ï¼Œå‚æ•°æœ‰çƒ­åŠ›æ•°æ®å’Œå‚æ•°å¯¹è±¡ä¸¤ä¸ªï¼Œå…¶ä¸­çƒ­åŠ›æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯[çº¬åº¦, ç»åº¦, çƒ­åº¦]è¯¥çƒ­åŠ›å›¾å¯ä»¥é€šè¿‡è®¾ç½®é€æ˜åº¦ï¼ˆminOpacityï¼‰ã€æ¸å˜è‰²ï¼ˆgradientï¼‰ã€æ‰©å±•åº¦ï¼ˆblurï¼‰æ¥æ”¹å˜çƒ­åŠ›å›¾çš„æ ·å¼ã€‚ åœ¨æœ¬æ–‡æœ€åŸºç¡€çš„ä½¿ç”¨leafletå·¥å…·æ¥åŠ è½½è…¾è®¯åœ°å›¾ç“¦ç‰‡ä¹‹åï¼Œç›¸ä¿¡ä¼šæ¥è§¦æ›´å¤šæœ‰å…³åœ°å›¾ç½‘é¡µåº”ç”¨çš„é¡¹ç›®ï¼Œä¹‹åä¹Ÿä¼šä¸æ–­åœ°æ›´æ–°åœ°å›¾ç›¸å…³æŠ€æœ¯åšå®¢æ–‡ç« ã€‚","categories":[{"name":"Toolkit","slug":"Toolkit","permalink":"http://keefe.wang/categories/Toolkit/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Leaflet","slug":"Leaflet","permalink":"http://keefe.wang/tags/Leaflet/"},{"name":"Map","slug":"Map","permalink":"http://keefe.wang/tags/Map/"},{"name":"è…¾è®¯åœ°å›¾","slug":"è…¾è®¯åœ°å›¾","permalink":"http://keefe.wang/tags/è…¾è®¯åœ°å›¾/"}]},{"title":"IJavascript-ä¸ªäººåœ¨çº¿å‰ç«¯ä»£ç è§£é‡Šå™¨å®‰è£…ä¸ä½¿ç”¨","slug":"2017-04-15-Online-Javascript-Interpreter-IJavascript","date":"2017-05-09T04:00:00.000Z","updated":"2020-10-20T08:55:02.269Z","comments":true,"path":"2017/05/09/2017-04-15-Online-Javascript-Interpreter-IJavascript.html","link":"","permalink":"http://keefe.wang/2017/05/09/2017-04-15-Online-Javascript-Interpreter-IJavascript.html","excerpt":"Jupyter-å¼€æºçš„æ–‡æ¡£/ä»£ç ç¼–è¾‘ã€è§£é‡Šã€åˆ†äº«å·¥å…·ProjectJupyter1æ˜¯ä¸€é¡¹å¼€æºçš„é¡¹ç›®ï¼Œåªåœ¨åˆ›é€ ä¸€ä¸ªå¹³å°ä¾›å„ç§å¼€å‘äººå‘˜ã€å‰æ²¿ç§‘å­¦å·¥ä½œè€…ä»¥åŠååœ¨ç”µè„‘å‰è¿›è¡Œå·¥ä½œçš„å„ä½è¿›è¡ŒååŒå¼€å‘ã€‚è¯¥é¡¹ç›®ä¸‹æ‹¥æœ‰Jupyter Notebookã€nbdimeã€qtconsoleç­‰å¼€æºåº”ç”¨ã€‚æœ¬æ–‡ä¸»è¦è®²è¿°ä½¿ç”¨Jupyter Notebookåº”ç”¨å’ŒIJavascriptæ’ä»¶æ¥è¿›è¡Œå‰ç«¯ä»£ç çš„å¯è§†åŒ–ç¼–è¾‘ã€è§£é‡Šä»¥åŠååŒåˆ†äº«ã€‚","text":"Jupyter-å¼€æºçš„æ–‡æ¡£/ä»£ç ç¼–è¾‘ã€è§£é‡Šã€åˆ†äº«å·¥å…·ProjectJupyter1æ˜¯ä¸€é¡¹å¼€æºçš„é¡¹ç›®ï¼Œåªåœ¨åˆ›é€ ä¸€ä¸ªå¹³å°ä¾›å„ç§å¼€å‘äººå‘˜ã€å‰æ²¿ç§‘å­¦å·¥ä½œè€…ä»¥åŠååœ¨ç”µè„‘å‰è¿›è¡Œå·¥ä½œçš„å„ä½è¿›è¡ŒååŒå¼€å‘ã€‚è¯¥é¡¹ç›®ä¸‹æ‹¥æœ‰Jupyter Notebookã€nbdimeã€qtconsoleç­‰å¼€æºåº”ç”¨ã€‚æœ¬æ–‡ä¸»è¦è®²è¿°ä½¿ç”¨Jupyter Notebookåº”ç”¨å’ŒIJavascriptæ’ä»¶æ¥è¿›è¡Œå‰ç«¯ä»£ç çš„å¯è§†åŒ–ç¼–è¾‘ã€è§£é‡Šä»¥åŠååŒåˆ†äº«ã€‚ å®‰è£…Jupyter Notebook Python ç¯å¢ƒæ—¶å®‰è£…Jupyter Notebookçš„å¿…è¦ç¯å¢ƒï¼ˆ3.3ä»¥ä¸Šæˆ–2.7å‡å¯ï¼‰ å¯ä»¥å…ˆä»å®˜ç½‘ä¸‹è½½Anacondaå®‰è£…åŒ…ï¼ŒAnacondaä¸­ç»§æ‰¿äº†NumPyå’ŒJupyter Notebookç­‰å·¥å…·åŒ…ï¼Œæ‰€ä»¥ç›´æ¥å¯ä»¥æ‰“å¼€Jupyter Notebookåº”ç”¨ macOSç³»ç»Ÿä¸‹å¯ä»¥é€šè¿‡ç»ˆç«¯çš„pipå·¥å…·è¿›è¡Œå®‰è£…ï¼š é¦–å…ˆè¦å‡çº§pipåˆ°æœ€æ–°ç‰ˆæœ¬ï¼š 1pip3 install --upgrade pip å¦‚æœpip3å‘½ä»¤ä¸å­˜åœ¨ï¼Œéœ€è¦å®‰è£…pip3æˆ–è€…ï¼ˆå¦‚æœç”µè„‘ä¸­å®‰è£…çš„æ˜¯python2ï¼‰ä½¿ç”¨pipå‘½ä»¤è¿›è¡Œå®‰è£…ã€‚ ä½¿ç”¨pip3å‘½ä»¤è¿›è¡Œå®‰è£…jupyterï¼š 1pip3 install jupyter å®‰è£…IJavascriptJupyter Notebookè‡ªå¸¦pythonè¯­è¨€ç¼–å†™ç¨‹åºçš„ç¼–è¯‘ï¼Œå¦‚æœéœ€è¦å…¶ä»–è¯­è¨€ç‰ˆæœ¬çš„notebookï¼ˆJuliaï¼ŒRubyï¼ŒHaskellç­‰ï¼‰ï¼Œè¿˜éœ€è¦å®‰è£…ç›¸åº”è¯­è¨€å¯¹åº”çš„Kernel2ï¼Œå¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œå½“ç„¶æ˜¯éœ€è¦ä¸€ä¸ªHtmlã€CSSå’ŒJavaScripté›†æˆçš„åœ¨çº¿è§£é‡Šå™¨ï¼Œæ‰€ä»¥IJavascript3å°±åº”è¿è€Œç”Ÿã€‚IJavascriptæ˜¯Jupyter Notebookçš„Kernelï¼ˆæ”¯æŒè¯¥åŠŸèƒ½çš„æ˜¯Jupyter messaging protocolï¼‰ä¹‹ä¸€ã€‚IJavascriptåŒæ—¶ä¹Ÿåœ¨npmåŒ…ç®¡ç†å·¥å…·ä¸­ï¼Œè€Œnpmåˆéœ€è¦Node.jsç¯å¢ƒã€‚æ‰€ä»¥ï¼Œéœ€è¦é¦–å…ˆç¡®å®šç³»ç»Ÿä¸­æœ‰Node.jså’Œnpmçš„ç¯å¢ƒã€‚ åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹ä»£ç å¯ä»¥å®ŒæˆIJavascript Kernelçš„å®‰è£…ï¼š 12345ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"brew install pkg-config node zeromqsudo easy_install pipsudo pip install --upgrade pyzmq jupytersudo npm install -g ijavascript IJavascriptçš„ä½¿ç”¨åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»£ç  1jupyter notebook å¯åŠ¨Jupyter Notebookï¼Œå¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€åœ°å€ä¸ºhttp://localhost:8888çš„webåº”ç”¨ï¼Œåœ¨å³ä¸Šè§’â€œnewâ€é€‰é¡¹ä¸­é€‰æ‹©Javascript(Node.js),å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼,å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼) IJavascriptä¸ä»…å¯ä»¥åƒæ§åˆ¶å°ä¸€æ ·è¿›è¡Œäº¤äº’å¼çš„JavaScriptè°ƒè¯•ï¼Œè€Œä¸”å¯ä»¥å¯¹HTMLå’ŒSVGä»£ç è¿›è¡Œè¾“å‡ºï¼Œåªéœ€è¦åœ¨è¾“å…¥çš„æ—¶å€™åŠ ä¸Š$$html$$æˆ–$$svg$$å°±å¯ä»¥è¿›è¡Œä»£ç çš„æ‰€è§å³æ‰€å¾—äº†ã€‚è¯¦ç»†çš„æ•™ç¨‹å¯ä»¥æŸ¥çœ‹IJavascriptå®˜æ–¹æ–‡æ¡£4.","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"Jupyter","slug":"Jupyter","permalink":"http://keefe.wang/tags/Jupyter/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://keefe.wang/tags/å‰ç«¯/"},{"name":"è§£é‡Šå™¨","slug":"è§£é‡Šå™¨","permalink":"http://keefe.wang/tags/è§£é‡Šå™¨/"},{"name":"è¯´æ˜ä¹¦","slug":"è¯´æ˜ä¹¦","permalink":"http://keefe.wang/tags/è¯´æ˜ä¹¦/"}]},{"title":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡ç¬”è®°æ•´ç†","slug":"2017-05-08-JavaScript-Professional-JavaScript-for-Web-Developer-notebook","date":"2017-05-09T04:00:00.000Z","updated":"2020-10-20T08:55:05.194Z","comments":true,"path":"2017/05/09/2017-05-08-JavaScript-Professional-JavaScript-for-Web-Developer-notebook.html","link":"","permalink":"http://keefe.wang/2017/05/09/2017-05-08-JavaScript-Professional-JavaScript-for-Web-Developer-notebook.html","excerpt":"ç¬¬ä¸‰ç«  åŸºæœ¬æ¦‚å¿µè¯­æ³•ï¼š åŒºåˆ†å¤§å°å†™ï¼šECMAScriptä¸­çš„ä¸€åˆ‡éƒ½åŒºåˆ†å¤§å°å†™ æ ‡è¯†ç¬¦ï¼šå˜é‡ã€å‡½æ•°ã€å±æ€§ã€å‡½æ•°å‚æ•°ç­‰çš„åå­—ï¼Œç”±å­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼Œä¸€ä¸ªç¾å…ƒç¬¦å·å¼€å¤´ æ³¨é‡Šï¼š//å•è¡Œæ³¨é‡Šï¼Œ/ /å¤šè¡Œæ³¨é‡Šï¼ˆå°½é‡å°‘ç”¨è¯¥ç§æ³¨é‡Šæ–¹æ³•ï¼‰ ä¸¥æ ¼æ¨¡å¼ï¼šåœ¨è„šæœ¬é¡¶éƒ¨æˆ–è€…æŸå‡½æ•°å†…é¡¶éƒ¨æ·»åŠ â€use strictâ€,æ”¯æŒIE10+,Firefox4+ï¼ŒSafari5.1+ï¼ŒOpera12+ï¼ŒChromeï¼›","text":"ç¬¬ä¸‰ç«  åŸºæœ¬æ¦‚å¿µè¯­æ³•ï¼š åŒºåˆ†å¤§å°å†™ï¼šECMAScriptä¸­çš„ä¸€åˆ‡éƒ½åŒºåˆ†å¤§å°å†™ æ ‡è¯†ç¬¦ï¼šå˜é‡ã€å‡½æ•°ã€å±æ€§ã€å‡½æ•°å‚æ•°ç­‰çš„åå­—ï¼Œç”±å­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼Œä¸€ä¸ªç¾å…ƒç¬¦å·å¼€å¤´ æ³¨é‡Šï¼š//å•è¡Œæ³¨é‡Šï¼Œ/ /å¤šè¡Œæ³¨é‡Šï¼ˆå°½é‡å°‘ç”¨è¯¥ç§æ³¨é‡Šæ–¹æ³•ï¼‰ ä¸¥æ ¼æ¨¡å¼ï¼šåœ¨è„šæœ¬é¡¶éƒ¨æˆ–è€…æŸå‡½æ•°å†…é¡¶éƒ¨æ·»åŠ â€use strictâ€,æ”¯æŒIE10+,Firefox4+ï¼ŒSafari5.1+ï¼ŒOpera12+ï¼ŒChromeï¼› è¯­å¥ç”±åˆ†å·ç»“å°¾ï¼Œå¤šæ¡è¯­å¥ä»¥èŠ±æ‹¬å·åŒ…å›´å½¢æˆä»£ç å—ï¼Œæœ‰ä»¥ä¸‹å‡ ç§è¯­å¥ç±»å‹ï¼š if è¯­å¥ï¼šä¸Javaä¸­çš„æ¡ä»¶åˆ¤æ–­è¯­å¥è¯­æ³•ç›¸åŒ do-while è¯­å¥ï¼šç›¸åŒæ¡ä»¶ä¸‹ä¼šæ¯”whileå¾ªç¯è¯­å¥å°‘æ‰§è¡Œä¸€æ¬¡ while è¯­å¥ï¼šä¸Javaä¸­çš„æ¡ä»¶åˆ¤æ–­è¯­å¥è¯­æ³•ç›¸åŒ for è¯­å¥ï¼šä¸Javaä¸­çš„æ¡ä»¶åˆ¤æ–­è¯­å¥è¯­æ³•ç›¸åŒ for-in è¯­å¥ï¼šæ”¯æŒä»»ä½•æœ‰è¿­ä»£å±æ€§çš„å¯¹è±¡ï¼ˆObjectã€Arrayã€Setã€Mapç­‰ï¼‰è¿›è¡Œæšä¸¾å¾ªç¯æ“ä½œ label è¯­å¥ï¼šæ·»åŠ æ ‡ç­¾ä¸€èˆ¬ä¸å¾ªç¯è¯­å¥é…åˆä½¿ç”¨ï¼Œä½¿ç”¨breakæˆ–continueè¯­å¥å¼•ç”¨ 1234567891011var temp=0; start: for(var i=0; i&lt;5; i++) &#123; for(var m=0; m&lt;5; m++) &#123; if(m==1) &#123; break start; //è¾“å‡º1ï¼Œè‹¥å»æ‰startå°†è¾“å‡º5 &#125; temp++; &#125; &#125; alert(temp); break å’Œ continue è¯­å¥ï¼šåé¢å¯å¼•ç”¨label with è¯­å¥ï¼šå°†ä»£ç ä½œç”¨åŸŸè®¾ç½®åˆ°ä¸€ä¸ªç‰¹å®šå¯¹è±¡ä¸­ï¼Œé¿å…å¤šæ¬¡ç¼–å†™åŒä¸€ä¸ªå¯¹è±¡çš„å·¥ä½œ 12345with(someObject) &#123; var qs = search.substring(1); //å¦‚æœæ²¡æœ‰ä½¿ç”¨withè¯­å¥ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥æ˜¯var qs = someObject.search.substring(1); var hostName = hostname; var url = href;&#125; switch è¯­å¥:ä¸Javaä¸­çš„æ¡ä»¶åˆ¤æ–­è¯­å¥è¯­æ³•ç›¸åŒï¼Œæ³¨æ„ä½¿ç”¨breakè¯­å¥ æ•°æ®ç±»å‹å’Œå˜é‡ å…³é”®å­—å’Œä¿ç•™å­—ï¼šè¡¨è¾¾å¼å’Œä»£ç å—ä¸­å‡ºç°å…³é”®å­—å’Œä¿ç•™å­—ä¸€å®šè¦ç•™æ„æ˜¯å¦å¯ç”¨ å˜é‡ï¼š ECMAScriptä¸­å˜é‡ä¸ºæ¾æ•£ç±»å‹ï¼Œvarå®šä¹‰å±€éƒ¨å˜é‡ï¼Œå¯ä»¥ä¸èµ‹å€¼ï¼ˆæ­¤æ—¶ä¸ºundefinedç±»å‹ï¼‰ æ— varå…³é”®è¯æ—¶å®šä¹‰çš„æ˜¯å…¨å±€å˜é‡ï¼ˆä½†æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ï¼‰ æ•°æ®ç±»å‹ï¼šç”±typeofæ“ä½œç¬¦å¯ä»¥æ˜¾ç¤ºç»™å®šå˜é‡çš„æ•°æ®ç±»å‹ï¼Œæœ‰Undefinedã€Booleanã€Stringã€Numberã€Objectï¼ˆArrayã€Nullï¼‰ã€Functionå…­ä¸­æ•°æ®ç±»å‹ï¼› Undefinedï¼šæœªå£°é‡å˜é‡ä½¿ç”¨typeofæ“ä½œç¬¦æ—¶æ˜¾ç¤ºundefinedï¼Œè€Œä¸”å¯¹æœªå£°æ˜å˜é‡ä½¿ç”¨alert()æ–¹æ³•ä¼šæŠ¥é”™ï¼› Booleanï¼štrue&amp;falseï¼Œæ³¨æ„å„ç§æ•°æ®ç±»å‹å¯¹åº”booleanå€¼å¾—è½¬æ¢è§„åˆ™ï¼› Numberï¼šå…«è¿›åˆ¶0å¼€å¤´ï¼Œåå…­è¿›åˆ¶0xå¼€å¤´ï¼›NaNä¸ç­‰äºä»»ä½•å€¼ï¼ˆåŒ…æ‹¬NaNæœ¬èº«ï¼‰ï¼›éæ•°å€¼è½¬æ¢ä¸ºæ•°å€¼çš„ä¸‰ä¸ªå‡½æ•°ï¼šnumber(),parseInt(â€œ10â€,è¿›åˆ¶åŸºæ•°)ï¼ŒparseFloat()ï¼›æ•°å€¼è½¬æ¢ï¼ˆtrue:1ï¼Œfalse:0ï¼Œnull:0ï¼Œundefined:NaNï¼‰ï¼›å­—ç¬¦ä¸²è½¬æ¢è§„åˆ™ï¼ˆåªåŒ…å«æœ‰æ•ˆæ•°å­—è½¬åŒ–ä¸ºé0å¼€å¤´æ•°å€¼ï¼Œç©ºå­—ç¬¦ä¸²è½¬åŒ–ä¸º0ï¼Œå­—ç¬¦ä¸²åŒ…å«é™¤æœ‰æ•ˆæ•°å­—ä¹‹å¤–çš„è½¬æ¢ä¸ºNaNï¼‰ï¼› Stringï¼šå­—ç¬¦ä¸²ä¸å¯å˜ï¼Œæ”¹å˜æ—¶ä¼šå°†åŸæ¥çš„å˜é‡å€¼é”€æ¯å†é‡æ–°èµ‹å€¼ï¼›æ•°å€¼ã€å¸ƒå°”å€¼ã€å¯¹è±¡å’Œå­—ç¬¦ä¸²å€¼éƒ½æœ‰toString()æ–¹æ³•ï¼› Objectï¼šéƒ½æœ‰Constructorã€hasOwnproperty(propertyName)ã€isPrototypeOf(object)ã€propertyIsEnumerable(propertyName)ã€toLocaleString()ã€toString()ã€valueOf(); Nullï¼šå¯¹å€¼ä¸ºnullçš„å˜é‡ä½¿ç”¨typeofæ—¶è¿”å›objectï¼Œå› ä¸ºnullè¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆï¼›null==undefinedæ€»æ˜¯è¿”å›trueï¼› æ“ä½œç¬¦ï¼š ä¸€å…ƒï¼š++ã€â€“ã€+ã€-ã€~ä½ã€!é€»è¾‘ã€ äºŒå…ƒï¼š&amp;ä½ã€|ä½ã€^ã€&lt;&lt;ã€&gt;&gt;ã€&gt;&gt;&gt;ã€&amp;&amp;é€»è¾‘ã€||é€»è¾‘ã€+ã€-ã€*ã€/ã€%ã€&gt;ã€&lt;ã€&gt;=ã€&lt;=ã€==ã€!=ã€===ã€!==ã€ ä¸‰å…ƒï¼šboolean_expressionï¼Ÿtrue_value:false_value; èµ‹å€¼ï¼š=ã€+=ã€-=ã€*=ã€/=ã€%=ã€&lt;&lt;=ã€&gt;&gt;=ã€&gt;&gt;&gt;= è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼š.ã€[]ã€()å…ˆäºdeleteã€newã€typeofã€+ï¼ˆä¸€å…ƒï¼‰ã€â€”ï¼ˆä¸€å…ƒï¼‰ã€ï¼ã€~å…ˆäº*ã€/ã€%å…ˆäº+ã€-å…ˆäº&gt;=ã€&lt;=ã€&gt;ã€&lt;å…ˆäº===ã€!==å…ˆäº&amp;&amp;å…ˆäº||å…ˆäº?: å‡½æ•°ï¼šä½¿ç”¨functionå…³é”®è¯å£°æ˜å‡½æ•°ï¼Œå‚æ•°ç±»ä¼¼æ•°ç»„å¹¶å¯çœç•¥ï¼Œå‚æ•°ï¼ˆå’Œjsä¸­çš„åŸºæœ¬ç±»å‹ï¼‰éƒ½æ˜¯ä¼ å€¼è€Œéä¼ å¼•ç”¨ï¼ˆä¾‹å¦‚stringå¯¹è±¡ï¼‰ï¼›åå­—ç›¸åŒçš„å‡½æ•°åªæœ‰åå®šä¹‰çš„å‡½æ•°å¯ä»¥ä½¿ç”¨ï¼› ç¬¬å››ç«  å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼š é™¤Objectä¹‹å¤–çš„åŸºæœ¬ç±»å‹éƒ½æ˜¯æŒ‰å€¼è®¿é—®ï¼Œå¯¹è±¡åˆ™æ˜¯é€šè¿‡è®¿é—®å†…å­˜ä¸­å¯¹è±¡çš„å¼•ç”¨ï¼› åŸºæœ¬ç±»å‹æ— æ³•æ·»åŠ å’Œæ”¹å˜å±æ€§ï¼› å¤åˆ¶åŸºæœ¬ç±»å‹å€¼ä¼šäº§ç”Ÿä¸€ä¸ªç‹¬ç«‹å‰¯æœ¬ï¼Œè€Œå¤åˆ¶å¼•ç”¨ç±»å‹å€¼æ—¶ä¸¤è€…æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼› æ£€æµ‹åŸºæœ¬ç±»å‹å€¼æ—¶ä½¿ç”¨typeofï¼Œæ£€æµ‹å¼•ç”¨ç±»å‹å€¼ æ—¶ä½¿ç”¨instanceofã€‚å¦å¤–ï¼Œé™¤äº†instanceofä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨return somevar.proto.constructor==sometypeæˆ–è€…Object.prototype.toString.call(somevar)ã€‚ æ‰§è¡Œç¯å¢ƒå’Œä½œç”¨åŸŸï¼š å±€éƒ¨æ‰§è¡Œç¯å¢ƒï¼ˆæŸä¸ªå‡½æ•°ã€letç»‘å®šä»£ç å—ç­‰ï¼‰ï¼šæŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œåï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œå…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹æ¶ˆå¤±ï¼› å…¨å±€æ‰§è¡Œç¯å¢ƒï¼šWebæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯windowå¯¹è±¡ï¼› æ¯ä¸ªå‡½æ•°ä¹Ÿéƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œæ‰§è¡Œæµï¼ˆECMAScriptï¼‰è¿›å…¥å‡½æ•°ï¼Œè¯¥å‡½æ•°ç¯å¢ƒè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆï¼› ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œï¼Œä¼šåˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œç”¨é€”æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°æœ‰åºè®¿é—®ï¼› å»¶é•¿ä½œç”¨åŸŸé“¾ï¼štry-catchè¯­å¥ä¸­çš„catchä»¥åŠwithè¯­å¥ jsä¸­ æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼ˆä»»ä½•èŠ±æ‹¬å·ä¸­çš„ä»£ç å—ï¼‰ï¼Œä¾‹å¦‚åœ¨ifå’Œforä¸­çš„å˜é‡å¯ä»¥åœ¨ifå’Œforä¹‹å¤–è®¿é—®ï¼š å£°æ˜å˜é‡ï¼šä½¿ç”¨varå£°æ˜çš„å˜é‡è‡ªåŠ¨è¢«æ·»åŠ åˆ°æœ€æ¥è¿‘çš„ç¯å¢ƒä¸­ï¼Œæ²¡æœ‰ç”¨varå£°æ˜ä¼šè¢«æ·»åŠ åˆ°å…¨å±€ç¯å¢ƒï¼› æŸ¥è¯¢æ ‡è¯†ç¬¦ï¼šæŸç¯å¢ƒä¸­å‡ºç°ä¸€ä¸ªæ ‡è¯†ç¬¦æ—¶ï¼Œè¦é€šè¿‡æœç´¢ç¡®å®šè¯¥æ ‡è¯†ç¬¦ä»£è¡¨ä»€ä¹ˆï¼Œä»ä½œç”¨åŸŸé“¾å‰ç«¯å¼€å§‹ï¼Œå‘ä¸Šé€çº§æŸ¥è¯¢ï¼ŒåŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªåœæ­¢æœç´¢ï¼Œå˜é‡å°±ç»ªï¼›è‹¥å…¨å±€ä¸­éƒ½æ²¡æ‰¾åˆ°ï¼Œåˆ™ç®—æœªå£°æ˜ï¼› åƒåœ¾å›æ”¶ï¼šjså…·æœ‰è‡ªåŠ¨åƒåœ¾æ”¶é›†æœºåˆ¶ æ ‡è®°æ¸…é™¤ï¼šå˜é‡è¿›å…¥æŸç¯å¢ƒï¼Œæ ‡è®°è¯¥å˜é‡ï¼Œç¦»å¼€ç¯å¢ƒæ—¶è¿›è¡Œç¦»å¼€æ ‡è®°ï¼Œé‡Šæ”¾å†…å­˜ï¼› å¼•ç”¨è®¡æ•°ï¼šå£°æ˜æŸå˜é‡å¹¶å°†å¼•ç”¨ç±»å‹å€¼èµ‹ç»™è¯¥å˜é‡ï¼Œè¯¥å€¼å¼•ç”¨æ¬¡æ•°ä¸º1ï¼Œæ¯è¢«èµ‹ç»™ä¸€æ¬¡å°±åŠ 1ï¼›è‹¥åŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡å–å¾—å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™å‡1ï¼Œè¯¥å€¼å˜æˆ0æ—¶å°±é‡Šæ”¾å†…å­˜ç©ºé—´ï¼› ç®¡ç†å†…å­˜ï¼šä¸ºäº†å ç”¨æœ€å°‘å†…å­˜è¾¾åˆ°æ›´å¥½æ€§èƒ½ï¼Œè¦å°†ä¸å†ä½¿ç”¨çš„å˜é‡èµ‹å€¼ä¸ºnullæ¥é‡Šæ”¾å…¶å¼•ç”¨ï¼› ç¬¬äº”ç«  å¼•ç”¨ç±»å‹Objectç±»å‹ åˆ›å»ºå¯¹è±¡æ—¶é¦–é€‰å­—é¢é‡åˆ›å»ºæ–¹æ³•ï¼š 12345var person = &#123; \"name\" : \"Nicholas\", \"age\" : 29, 5 : true&#125;; Arrayç±»å‹ å®šä¹‰ï¼švar color = new Array(3); è®¿é—®ï¼šé‡‡ç”¨æ•°ç»„ä¸‹æ ‡[]çš„æ–¹å¼è¿›è¡Œè®¿é—®ï¼Œä½¿ç”¨.lengthå¾—åˆ°æ•°ç»„é•¿åº¦ï¼› æ£€æµ‹ï¼švalue instanceof Array(ä¸æ¨è),Array.isArray(somearrayvalue)(æ¨è)ï¼› è½¬æ¢ï¼štoLocaleString()/toString()/valueOf(),å‡ç”Ÿæˆ é€—å·åˆ†éš” çš„å­—ç¬¦ä¸²å…¶ä¸­ï¼ŒtoLocaleString()æ–¹æ³•è½¬æ¢æ—¶æ¯ä¸€é¡¹éƒ½æ˜¯ä½¿ç”¨toLocaleString()è½¬æ¢çš„ï¼ŒtoString()ä¹Ÿæ˜¯Array.join(someJointSymbol)ï¼Œé»˜è®¤ç”¨é€—å·è¿æ¥ï¼› æ’å…¥/åˆ é™¤ï¼šé™¤äº†ç›´æ¥ç”¨ä¸‹æ ‡æ·»åŠ åˆ é™¤ï¼Œæœ€å¥½ç”¨æ ˆæ–¹æ³•LIFO-push(ä»»æ„é¡¹å‚æ•°)åœ¨å°¾éƒ¨å¢åŠ ä»»æ„æ•°é‡å‚æ•°ï¼Œpop()åˆ é™¤æœ€åä¸€é¡¹ï¼›åŒæ—¶è¿˜æœ‰é˜Ÿåˆ—æ–¹æ³•FIFO,åœ¨æ ˆæ–¹æ³•åŸºç¡€ä¸Šå¢åŠ shift()å¯åˆ é™¤ç¬¬ä¸€é¡¹ï¼Œunshift()å¯ä»¥åœ¨å‰ç«¯æ·»åŠ ä»»æ„é¡¹ï¼› æ’åºï¼šsort()å‡åºæ’åˆ—ï¼ˆè½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œæ•°å­—æ¯”è¾ƒä¼šå‡ºé”™ï¼Œéœ€è¦åœ¨å‚æ•°ä¸­æä¾›æ¯”è¾ƒå‡½æ•°compare()ï¼‰ï¼›reverse()åè½¬æ•°ç»„é¡ºåºï¼› æ“ä½œæ–¹æ³• è¿æ¥ï¼šsomearray.concat(otherarrays)è¿”å›è¿æ¥æ‰€æœ‰æ•°ç»„çš„å‰¯æœ¬ï¼› åˆ é™¤ï¼šsomearray.splice(èµ·å§‹ä½ç½®ï¼Œåˆ é™¤é¡¹æ•°ï¼Œæ’å…¥é¡¹)-splice(0,2)åˆ é™¤å‰ä¸¤é¡¹ï¼Œsplice(2,0,â€redâ€,â€greenâ€)åœ¨å½“å‰æ•°ç»„ä½ç½®2æ’å…¥ä¸¤é¡¹ï¼Œsplice(2,1,â€redâ€,â€greenâ€)åˆ é™¤ç¬¬äºŒé¡¹å¹¶æ’å…¥ï¼› ä½ç½®æ–¹æ³•ï¼šè·å–æ•°ç»„ä¸­å…ƒç´ çš„ä½ç½®ï¼ŒindexOf()å’ŒlastIndexOf(),è¿”å›æ•°ç»„ä¸‹è¡¨å¯¹åº”å…ƒç´ ï¼Œå¦åˆ™è¿”å›-1ï¼› è¿­ä»£æ–¹æ³•ï¼šæœ‰5ä¸ªè¿­ä»£æ–¹æ³•ï¼Œå‚æ•°éƒ½æ˜¯ä¸¤ä¸ªï¼Œæ¯ä¸€é¡¹ä¸Šè¿è¡Œçš„å‡½æ•°å’Œè¿è¡Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå¯¹è±¡every(someFunction)ï¼›å¯¹æ¯ä¸€é¡¹è¿›è¡Œå‡½æ•°æ“ä½œï¼Œæ¯ä¸€é¡¹è¿”å›trueåˆ™æœ€åè¿”å›trueï¼›filter(someFunction):å¯¹æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°å€¼ä¸ºtrueçš„é¡¹çš„æ•°ç»„forEach(someFunction):å¯¹æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œæ— è¿”å›å€¼map(someFunction):å¯¹æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°ç»“æœçš„æ•°ç»„some(someFunction):å¯¹æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œåªè¦æœ‰ä¸€é¡¹ä½¿å‡½æ•°è¿”å›trueï¼Œåˆ™æ•´ä¸ªè¿”å›trueï¼› ç¼©å°æ–¹æ³•ï¼šreduce(ç»™æ¯é¡¹è°ƒç”¨çš„å‡½æ•°(å¯é€‰)ï¼Œç¼©å°åŸºç¡€åˆå§‹å€¼)/reduceRight(ç»™æ¯é¡¹è°ƒç”¨çš„å‡½æ•°(å¯é€‰)ï¼Œç¼©å°åŸºç¡€åˆå§‹å€¼)ï¼Œå…¶ä¸­ï¼Œå‚æ•°ä¸­çš„å‡½æ•°éœ€è¦ä¼ å…¥4ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å‰ä¸€é¡¹ï¼Œå½“å‰é¡¹ï¼Œé¡¹ç´¢å¼•ï¼Œæ•°ç»„å¯¹è±¡ï¼›reduceRightæ˜¯ç›¸åæ–¹å‘ï¼› ç¦å¿Œï¼š[ï¼Œ ï¼Œ ï¼Œ ï¼Œ]ä¸å¯ä»¥å‡ºç°æ•°ç»„æœ€åä¸€é¡¹æ˜¯ï¼Œçš„æƒ…å†µ Dateç±»å‹ å®šä¹‰ï¼š`var now = new Date(); ç‰¹å®šæ—¶é—´ï¼švar someDate = new Date(Date.parse(â€œMay 25, 2004â€));ä½†æ˜¯ä¸ç”¨date.parseä¹Ÿä¼šé»˜è®¤è½¬æ¢ï¼› ç»§æ‰¿çš„æ–¹æ³• toLocaleString()æŒ‰ç…§ä¸æµè§ˆå™¨è®¾ç½®çš„åœ°åŒºç›¸é€‚åº”çš„æ ¼å¼è¿”å›æ—¥æœŸå’Œæ—¶é—´ toString()è¿”å›å¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´ valueOf()è¿”å›æ—¥æœŸçš„æ¯«ç§’è¡¨ç¤º æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³• toDateString():ä»¥ç‰¹å®šäºå®ç°çš„æ ¼å¼è¿”å›æ—¥å¹´æœˆæ—¥æ˜ŸæœŸ toTimeString():ä»¥ç‰¹å®šäºå®ç°çš„æ ¼å¼è¿”å›æ—¶åŒºã€æ—¶åˆ†ç§’ toLocaleDateString():ä»¥ç‰¹å®šäºåœ°åŒºçš„æ ¼å¼è¿”å›å¹´æœˆæ—¥æ˜ŸæœŸ toLocaleTimeString():ä»¥ç‰¹å®šäºå®ç°çš„æ ¼å¼æ˜¾ç¤ºæ—¶åˆ†ç§’ toUTCString():ä»¥ç‰¹å®šäºå®ç°çš„æ ¼å¼å®Œæ•´çš„UTCæ—¥æœŸ æ—¥æœŸæ—¶é—´ç»„ä»¶æ–¹æ³•ï¿¼ ï¿¼ RegExpç±»å‹ï¼š å®šä¹‰ï¼š 12var pattern = new RegExp(â€œpatternâ€, â€œflagsâ€);var expression = /pattern/ flags; å…¶ä¸­flagsæœ‰ä¸€ä¸‹å‡ ç§æ¨¡å¼ï¼š g:å…¨å‰§æ¨¡å¼ï¼Œæ¨¡å¼åº”ç”¨äºæ‰€æœ‰å­—ç¬¦ä¸²è€Œéåœ¨å‘ç°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ç«‹å³åœæ­¢ï¼› i:ä¸åŒºåˆ†å¤§å°å†™æ¨¡å¼ï¼› m:å¤šè¡Œæ¨¡å¼ï¼Œåˆ°è¾¾ä¸€è¡Œæœ«å°¾è¿˜ä¼šæŸ¥æ‰¾ä¸‹ä¸€è¡Œæ˜¯å¦æœ‰åŒ¹é…é¡¹ å…ƒå­—ç¬¦è½¬ä¹‰ï¼š( { [ \\ ^ $ | ) ? + . ] } e.g.åŒ¹é…ç¬¬ä¸€ä¸ªâ€[bc]atâ€:var patter = /\\[bc\\]at/i; å®ä¾‹å±æ€§ .global:boolæ˜¯å¦è®¾ç½®gæ ‡å¿— .ignoreCase:boolæ˜¯å¦è®¾ç½®äº†iæ ‡å¿— .lastIndex:æ•´æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹çš„è‡ªè´Ÿä½ç½®ï¼Œ0ç®—èµ· .multiline:boolï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†mæ ‡å¿— .source:è¯¥æ­£åˆ™çš„å­—ç¬¦ä¸²è¡¨ç¤º å®ä¾‹æ–¹æ³•ï¼š.exec() æ„é€ å‡½æ•°å±æ€§ï¼š æ¨¡å¼çš„å±€é™æ€§ï¼š Functionç±»å‹å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå› æ­¤å‡½æ•°åå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå‡½æ•°ã€‚ å£°æ˜ï¼š 123function sum(num1, num2)&#123; return num1 + num2;&#125; ç‰¹å¾ æ²¡æœ‰é‡è½½:å› ä¸ºJSä¸­çš„å‡½æ•°åå°±åƒæŒ‡é’ˆä¸€æ ·ï¼Œæ‰€ä»¥å½“ä¸ºä¸€ä¸ªå‡½æ•°åï¼ˆå°±æ˜¯ä¸€ä¸ªå˜é‡ï¼‰èµ‹äºˆæ–°çš„å‡½æ•°æ—¶ï¼Œä¼šè¦†ç›–ä¹‹å‰çš„å‡½æ•°ï¼› å£°æ˜ä½ç½®å’Œè¡¨è¾¾å¼: JSä¸­æœ‰å‡½æ•°å£°æ˜æå‡è¿‡ç¨‹ï¼Œæ‰€ä»¥å£°æ˜å’Œè°ƒç”¨ä¸å¼ºè°ƒå…ˆåé¡ºåºã€‚ä½†æ˜¯ï¼å¦‚æœæŠŠå‡½æ•°æ”¾è¿›ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥ä¸­è€Œéå‡½æ•°å£°æ˜æ—¶,ä¼šå‡ºç°å…ˆåé—®é¢˜çš„é”™è¯¯ï¼› ä½œä¸ºå€¼çš„å‡½æ•°:å‡½æ•°åå¯ä½œä¸ºå˜é‡åƒå€¼ä¸€æ ·ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼›å‡½æ•°å†…ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°çš„è®¡ç®—ç»“æœç­‰ç­‰ï¼› å‡½æ•°å±æ€§å’Œæ–¹æ³•: å‡½æ•°ä½œä¸ºå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§: lengthï¼ˆè¡¨ç¤ºå‡½æ•°å¸Œæœ›æ¥å—çš„å‘½åå‚æ•°çš„ä¸ªæ•°ï¼‰ prototypeï¼ˆä¿å­˜å¼•ç”¨ç±»å‹çš„æ‰€æœ‰å®ä¾‹çš„æ–¹æ³•ï¼Œæ˜¯ä¸å¯æšä¸¾çš„ï¼‰ å‡½æ•°ä½œä¸ºå¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•: apply()ï¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å…¶ä¸­è¿è¡Œå‡½æ•°çš„ä½œç”¨åŸŸï¼Œå¦ä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„ï¼ˆå¯ä»¥ä½¿argumentså¯¹è±¡æˆ–è€…æ˜¯çœŸå®çš„ä¸€ä¸ªæ•°ç»„ï¼‰ call()ï¼šæ¥å—thiså‚æ•°ä»¥åŠæ¥è‡ªå‡½æ•°çš„æ¯ä¸€ä¸ªå‚æ•°éƒ½è¦å†™è¿›å»è€Œéä¼ å…¥æ•°ç»„ï¼‰ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°ï¼Œç›¸å½“äºè®¾ç½®å‡½æ•°ä½“å†…thiså¯¹è±¡çš„å€¼ å‡½æ•°å†…éƒ¨å¯¹è±¡åŠç¯å¢ƒçš„å±æ€§ ä¸¤ä¸ªç‰¹æ®Šå¯¹è±¡ argumentsï¼šåŒ…å«ä¼ å…¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªcalleeçš„å±æ€§æŒ‡å‘æ‹¥æœ‰è¿™ä¸ªargumentså¯¹è±¡çš„å‡½æ•°ï¼Œå…¶å®å°±æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œå¦ä¸€ä¸ªcallerçš„å±æ€§è¿”å›å¼•ç”¨æœ¬å‡½æ•°çš„å‡½æ•° thisï¼šå¼•ç”¨çš„æ˜¯å‡½æ•°æ‰§è¡Œçš„ç¯å¢ƒå¯¹è±¡ï¼Œç½‘é¡µçš„å…¨å±€å°±æ˜¯window åŸºæœ¬åŒ…è£…ç±»å‹Stringã€Booleanã€Numberï¼ˆObjectã€Nullã€Undefinedã€Arrayï¼‰ Stringï¼š æ–¹æ³•ï¼š ä¸‹æ ‡ç›¸å…³ æ‰€æŒ‡çš„å•å­—ç¬¦ä¸²charAt() æ‰€æŒ‡å­—ç¬¦çš„ç¼–ç charCodeAte() å­—ç¬¦ä¸²ä½ç½®indexOf(substr) æœ€åä¸€ä¸ªå­—ç¬¦ä¸²ä½ç½®lastIndexOf(substr) å­—ç¬¦ä¸²æ“ä½œ è¿æ¥concat(String str1, String str2) æˆªå–slice(startPos(, endPos)) æˆªå–substr(startPos(, length)) æˆªå–substring(startPos(, endPos))ï¼Œå½“è¾“å…¥è´Ÿæ•°çš„indexæ—¶ï¼Œsliceå°†è´Ÿæ•°å’Œå­—ç¬¦ä¸²é•¿åº¦ç›¸åŠ ï¼Œsubstrå°†ç¬¬ä¸€ä¸ªè´Ÿå‚æ•°åŠ å­—ç¬¦ä¸²é•¿åº¦ç¬¬äºŒä¸ªè´Ÿå‚æ•°è½¬æ¢ä¸º0ï¼Œsubstringå°†æ‰€æœ‰è´Ÿå‚æ•°è½¬åŒ–ä¸º0ï¼› æ ¼å¼åŒ–å­—ç¬¦ä¸²æ–¹æ³•trim(string)åˆ›å»ºä¸€ä¸ªå‰¯æœ¬å¹¶åˆ é™¤å‰åæ‰€æœ‰ç©ºæ ¼ å¤§å°å†™ç›¸å…³ è½¬å°å†™toLowerCase() è½¬æœ¬åœ°è¯­è¨€toLocaleLowerCase() toUpperCase() toLocaleUpperCase() å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…æ–¹æ³•match()è¯¦è§æ­£åˆ™è¡¨è¾¾å¼ï¼Œsearch()è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ç´¢å¼•å¦åˆ™è¿”å›-1 replace(æ–°å­—ç¬¦ä¸²ï¼Œéœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²) split(simbol)ï¼Œç”±simbolåˆ†éš”å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ string1.localeCompare(string2)è¿”å›ï¼šstring1åœ¨string2ä¹‹å‰-1ï¼Œç›¸ç­‰0ï¼Œä¹‹å1 fromCharCode()é™æ€æ–¹æ³•ï¼Œæ¥æ”¶ä¸€æˆ–å¤šä¸ªå­—ç¬¦ç¼–ç ï¼Œç„¶åè½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸² å•ä½“å†…ç½®å¯¹è±¡ Globalå¯¹è±¡ åœ¨jsä¸­ï¼Œä¸å±äºä»»ä½•å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½æ˜¯å®ƒçš„å±æ€§å’Œæ–¹æ³•ã€‚æ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å®šä¹‰çš„å±æ€§å’Œå‡½æ•°éƒ½æ˜¯å®ƒçš„å±æ€§å’Œå‡½æ•°ã€‚ä¾‹å¦‚isNaN()/isFinite()/parseInt()/parseFloat()/encodeURI()åªç¼–ç ç©ºæ ¼/encodeURIComponet()ç¼–ç æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦/decodeURI()/decodeURICompoment()/eval()æ¥æ”¶ä¸€ä¸ªjsè¯­å¥å­—ç¬¦ä¸²ï¼Œè‹¥æ˜¯å‡½æ•°åˆ™ä¸ä¼šè¢«æå‡ï¼Œéœ€è¦æŒ‰ç…§å£°æ˜é¡ºåºè¿›è¡Œè°ƒç”¨ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹å¤–éƒ¨ä¸èƒ½è®¿é—®è¯¥å‡½æ•°ä¸­çš„å‡½æ•°æˆ–å˜é‡ ç¬¬å…­ç«  é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡å¯¹è±¡å°±æ˜¯æ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ã€å¯¹è±¡æˆ–è€…å‡½æ•°ã€‚åˆ›å»ºå¯¹è±¡çš„åŸºç¡€æ–¹æ³•ï¼š åˆ›å»ºObjectå®ä¾‹ï¼š 123456var person = new Object();person.name = \"Nicholas\";person.age = 29;person.sayName = function()&#123; alert(\"this.name\")&#125; å¯¹è±¡å­—é¢é‡è¯­æ³•ï¼š 1234567var person = &#123; person.name = \"Nicholas\"; person.age = 29; person.sayName = function()&#123; alert(\"this.name\") &#125;&#125; ç†è§£å¯¹è±¡ å±æ€§ç±»å‹ï¼š ECMAScriptä¸­æœ‰ä¸¤ç§å±æ€§ï¼šæ•°æ®å±æ€§ å’Œ è®¿é—®å™¨å±æ€§ã€‚ æ•°æ®å±æ€§ï¼šåŒ…å«ä¸€ä¸ªæ•°æ®å€¼çš„ä½ç½®ï¼Œåœ¨æ­¤ä½ç½®å¯è¯»å–å’Œå†™å…¥å€¼ï¼Œæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š [[Configurable]]é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºèƒ½å¦é€šè¿‡deleteåˆ é™¤å±æ€§ [[Enumerable]]é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºèƒ½å¦é€šè¿‡for-inå¾ªç¯è¿”å›å±æ€§ [[Writable]]é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºèƒ½å¦ä¿®æ”¹å±æ€§çš„å€¼ [[Value]]é»˜è®¤å€¼ä¸ºundefinedï¼ŒåŒ…å«è¿™ä¸ªå±æ€§çš„æ•°æ®å€¼ è¦ä¿®æ”¹ä¸Šè¿°å±æ€§ï¼Œå¿…é¡»é€šè¿‡Object.defineProperty(å±æ€§æ‰€åœ¨å¯¹è±¡ï¼Œå±æ€§åï¼Œæè¿°ç¬¦å¯¹è±¡)æ–¹æ³•ï¼š 12345var person = &#123;&#125;;Object.defineProperty(person, \"name\", &#123; writable: false, value: \"Nicholas\"&#125;) è®¿é—®å™¨å±æ€§ï¼šä¸åŒ…å«æ•°æ®å€¼ï¼ŒåªåŒ…å«getterå’Œsetterå‡½æ•°ï¼ˆè¿™ä¸¤ä¸ªå‡½æ•°å¹¶éå¿…éœ€ï¼‰ï¼Œè®¿é—®å™¨å±æ€§å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š [[Configurable]]é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºèƒ½å¦é€šè¿‡deleteåˆ é™¤å±æ€§ [[Enumerable]]é»˜è®¤å€¼ä¸ºtrueï¼Œè¡¨ç¤ºèƒ½å¦é€šè¿‡for-inå¾ªç¯è¿”å›å±æ€§ [[Get]]é»˜è®¤å€¼ä¸ºundefinedï¼Œè¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•° [[Set]]é»˜è®¤å€¼ä¸ºundefinedï¼Œå†™å…¥å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•° è®¿é—®å™¨å±æ€§ä¹Ÿå¿…é¡»ä½¿ç”¨Object.defineProperty()æ–¹æ³•æ¥è¿›è¡Œå®šä¹‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637var book = &#123; _year: 2004, edition: 1&#125;;Object.defineProperty(book, \"year\", &#123; get: function()&#123; return this._year; &#125;, set: function(newValue)&#123; if(newValue &gt; 2004)&#123; this._year = newValue; this.edition = newValue - 2004; &#125; &#125;&#125;);//è‹¥æƒ³å®šä¹‰å¤šä¸ªå±æ€§æˆ–å¯¹åº”çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥è¿™æ ·å†™ï¼šObject.defineProperty(book, &#123; //è¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªæ•°æ®å±æ€§ _year: &#123; value: 2004 &#125;, edition: &#123; value: 1 &#125;, //è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªè®¿é—®å™¨å±æ€§ year: &#123; get: function()&#123; return this._year; &#125;, set: function(newValue)&#123; if(newValue &gt; 2004)&#123; this._year = newValue; this.edition = newValue - 2004; &#125; &#125; &#125;&#125;); * å¦‚æœæƒ³è¯»å–å±æ€§çš„ç‰¹å¾ï¼Œåˆ™è¦é€šè¿‡Object.getOwnPropertyDescriptor()å‡½æ•°æ¥è®¿é—®ï¼š 123var descriptor = Object.getOwnPropertyDescriptor(book, \"_year\");alert(descriptor.value);alert(typeof descriptor.get); //\"function\" åˆ›å»ºå¯¹è±¡åˆ›å»ºç±»å’Œå¯¹è±¡åè¦ä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´ï¼Œæ„é€ å‡½æ•°ä¹Ÿæ˜¯ï¼Œè€Œéæ„é€ å‡½æ•°åˆ™ç”±å°å†™å­—æ¯å¼€å¤´ã€‚ å·¥å‚æ¨¡å¼ï¼šæŠ½è±¡äº†åˆ›å»ºå…·ä½“å¯¹è±¡çš„è¿‡ç¨‹ï¼Œç”¨å‡½æ•°æ¥å°è£…ä»¥ç‰¹å®šæ¥å£åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ï¼š 1234567891011function createPerson(name, age, job)&#123; var o = new Object(); o.name = name; o.age = age; o.job = job; o.sayName = function()&#123; alert(this.name); &#125;; return o;&#125;var person1 = createPerson(\"Nicholas\", 29, \"Software Engineer\"); å…¶å®å°±æ˜¯æŠŠä¸€ä¸ªå®Œæ•´çš„ç”±Objectå®ä¾‹æ¥åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼› æ„é€ å‡½æ•°æ¨¡å¼ï¼š 123456789function Person(name, age, job)&#123; this.name = name; this.age = age; this.job = job; this.sayName = function()&#123; alert(this.name); &#125;;&#125;var person1 = new Person(\"Nicholas\", 29, \"Software Engineer\"); å¯ä»¥çœ‹åˆ°ï¼Œæ„é€ å‡½æ•°æ¨¡å¼ä¸­ æ²¡æœ‰æ˜¾å¼åœ°åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥å°†å±æ€§å’Œæ–¹æ³•èµ‹ç»™äº†thiså¯¹è±¡ï¼Œæ²¡æœ‰returnè¯­å¥ ã€‚ æ„é€ å‡½æ•°æ¨¡å¼ç›¸è¾ƒäºå·¥å‚æ¨¡å¼çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå®ƒåˆ›å»ºçš„æ„é€ å‡½æ•°å¯ä»¥å°†å®ƒçš„å®ä¾‹æ ‡è¯†ä¸ºä¸€ç§ç‰¹å®šçš„ç±»å‹ï¼Œå³å¯¹è±¡ä¹Ÿæ˜¯Objectä¹Ÿæ˜¯Personçš„å®ä¾‹ã€‚ å°†æ„é€ å‡½æ•°å½“åšå‡½æ•°ï¼š ä»»ä½•å‡½æ•°ï¼Œåªè¦é€šè¿‡newæ“ä½œç¬¦æ¥è°ƒç”¨ï¼Œå°±å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ã€‚ åŸå‹æ¨¡å¼ JavaScriptä¸­å¹¶æ²¡æœ‰æä¾›ç±»çš„å®ç°ï¼Œè™½ç„¶åœ¨ES2015/ES6ä¹‹ä¸­å¼•å…¥äº†classå…³é”®å­—ï¼Œä½†æ˜¯JavaScriptä»ç„¶æ˜¯åŸºäºåŸå‹çš„ã€‚è€ŒJavaScriptä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æœ‰ï¼šnew Object()æ–¹æ³•ã€å­—é¢é‡æ–¹æ³•ã€å·¥å‚æ¨¡å¼ã€æ„é€ å‡½æ•°æ–¹æ³•å’ŒåŸå‹æ¨¡å¼ã€‚å…¶ä¸­ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼åˆ›å»ºå¯¹è±¡å¯ä»¥ä»¤æ‰€æœ‰å®ä¾‹å…±äº«æ–¹æ³•ï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæœ‰åˆ©äºå¯¹è±¡ç»§æ‰¿ã€‚ JavaScriptä¸­çš„ç»§æ‰¿åˆ™æ˜¯ä½“ç°åœ¨ä¸€ç§ç»“æ„ä¸Šâ€”â€”å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ç”±Objectè¡ç”Ÿçš„å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº†Object.prototypeçš„æ–¹æ³•å’Œå±æ€§ï¼ˆä¹Ÿæœ‰å¯èƒ½è¢«è¦†ç›–ï¼‰ã€‚æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨é“¾æ¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æˆä¸ºå®ƒçš„åŸå‹ï¼ˆprototypeï¼‰ã€‚è€Œä¸”ï¼Œè¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ï¼Œç›´åˆ°è¿½æº¯åˆ°ä¸€ä¸ªä»¥nullä¸ºåŸå‹çš„å¯¹è±¡ï¼Œå› ä¸ºnullæ˜¯æ²¡æœ‰åŸå‹çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºè¿™ä¸ªåŸå‹é“¾ï¼ˆprototype chain) ä¸­çš„æœ€ç»ˆé“¾æ¥ã€‚ åªè¦åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°±ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚æ‰€æœ‰åŸå‹å¯¹è±¡éƒ½è‡ªåŠ¨è·å¾—ä¸€ä¸ªconstructorå±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡å‘prototypeå±æ€§æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆã€‚ åŸå‹å¯¹è±¡çš„åˆ›å»ºï¼š 1234567891011121314function Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job;&#125;Person.prototype.sayName = function() &#123; alert(this.name);&#125;;var person1 = new Person(\"Nicholas\", 29, \"Lawyer\");var person2 = new Person(\"Katie\", 30 \"Account\");var person3 = new Person(\"Nicholas\", 29, \"Lawyer\");person1.sayName(); //\"Nicholas\"person2.sayName(); //\"Katie\"alert(person1.sayName == person3.sayName); //true æ›´åŠ ç®€å•çš„åŸå‹å¯¹è±¡åˆ›å»ºè¯­æ³•ï¼š 12345678910function Person() &#123;&#125;Person.prototype = &#123; name : \"Nicholas\", age : 29, job : \"Software Engineer\", sayName : function() &#123; alert(this.name) &#125;&#125;; å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ ä¸å·¥å‚æ¨¡å¼æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œåªæ˜¯åœ¨åˆ›å»ºæ–°çš„å®ä¾‹çš„æ—¶å€™ï¼Œå·¥å‚æ¨¡å¼ä¸éœ€è¦newï¼Œè€Œå¯„ç”Ÿæ„é€ å‡½æ•°éœ€è¦åŠ newã€‚è¿™ç§æ¨¡å¼ä¸èƒ½å¤Ÿä»¥æ¥instanceofæ“ä½œç¬¦æ¥ç¡®å®šå¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å»ºè®®åœ¨èƒ½å¤Ÿä½¿ç”¨å…¶ä»–æ¨¡å¼åˆ›å»ºå¯¹è±¡æ—¶å°½é‡ä¸è¦ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ JavaScriptä¸­çš„ç¨³å¦¥å¯¹è±¡æ˜¯æŒ‡ï¼Œæ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨thisçš„å¯¹è±¡ã€‚ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›ç¦æ­¢ä½¿ç”¨thiså’Œnewçš„å®‰å…¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œé˜²æ­¢è¢«Mashupç­‰çš„åº”ç”¨ç¨‹åºæ”¹åŠ¨ã€‚ ç¨³å¦¥æ„é€ å‡½æ•°éµå¾ªä¸å¯„ç”Ÿæ„é€ å‡½æ•°ç±»ä¼¼çš„æ¨¡å¼ï¼Œä½†æœ‰ä¸¤ç‚¹ä¸åŒï¼šä¸€æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨thisï¼›äºŒæ˜¯ä¸é€‚ç”¨newæ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°ã€‚ 1234567function Person(name, age, job) &#123; var o = new Object(); o.sayName = function() &#123; alert(name); &#125;; return o;&#125; ç»§æ‰¿åŸå‹é“¾ ä»£ç æœç´¢æŸå±æ€§çš„è·¯å¾„ï¼ˆåŸå‹é“¾ï¼‰ï¼š ä¸Šé¢ä»£ç ä¸­å‡ºç°äº†Person.prototype,é€šè¿‡è¯¥å½¢å¼å¯ä»¥è·å¾—åŸå‹å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå…¶æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ®µä»£ç ä¹Ÿå±•ç¤ºäº†å¯¹è±¡å±æ€§å’Œæ–¹æ³•æœç´¢çš„è·¯å¾„ï¼šæ¯å½“ä»£ç è¯»å–æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶ï¼Œè¿›è¡Œç›®æ ‡ä¸ºè¯¥å±æ€§çš„åå­—ï¼Œæœç´¢é¦–å…ˆä»å®ä¾‹ï¼ˆperson1ï¼‰æœ¬èº«å¼€å§‹ï¼Œè‹¥æœ‰è¯¥åå­—çš„å±æ€§åˆ™è¿”å›è¯¥å±æ€§ï¼Œè‹¥æ²¡æœ‰åˆ™ç»§ç»­æœç´¢è¯¥å®ä¾‹ä¸­åŸå‹æŒ‡é’ˆæŒ‡å‘çš„åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾è¯¥åå­—çš„å±æ€§ã€‚æ‰€ä»¥è¯´å®ä¾‹æ˜¯å…±äº«åŸå‹ä¸­ä¿å­˜çš„å±æ€§å’Œæ–¹æ³•ã€‚ å®ä¾‹çš„å±æ€§ï¼ŒåŸå‹çš„å±æ€§ï¼Ÿ ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å®ä¾‹å°½ç®¡å¯ä»¥å…±äº«è¯¥åŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å´æ— æ³•é‡å†™åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½é€šè¿‡åˆ©ç”¨åŒåå±æ€§å’Œæ–¹æ³•æ¥è¦†ç›–å’Œå±è”½åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼›è‹¥æƒ³æŠŠå®ä¾‹ä¸­è¦†ç›–çš„å±æ€§è¿˜åŸï¼Œå¯ä»¥é€šè¿‡deleteæ“ä½œã€‚ä½¿ç”¨hasOwnProperty()æ–¹æ³•å¯ä»¥æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹ä¸­è¿˜æ˜¯å­˜åœ¨äºåŸå‹ä¸­ã€‚ æ€æ ·è·å¾—åŸå‹å¯¹è±¡ ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†Object.getPrototypeOf(obj)æ–¹æ³•å’Œprotoå±æ€§çš„ä½¿ç”¨ï¼š 12Object.getPrototypeOf(person1) === Person.prototype; //trueperson1.__proto__ === Person.prototype; //true å¯ä»¥çœ‹åˆ°ï¼ŒObject.getPrototypeOf(obj)æ˜¯è·å–objå¯¹è±¡çš„åŸå‹å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°†åœ¨åˆ©ç”¨åŸå‹å®ç°ç»§æ‰¿çš„æƒ…å†µä¸­å‘æŒ¥éå¸¸é‡è¦çš„ä½œç”¨ã€‚obj.proto ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ˜¯æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰çš„å±æ€§ï¼Œä½†æ˜¯protoå¹¶ä¸æ˜¯ä¸€ä¸ªè§„èŒƒçš„å±æ€§ï¼ˆå½“ä½¿ç”¨Object.create()æ–¹æ³•åˆ›å»ºå¯¹è±¡æ—¶ï¼Œproto å¹¶ä¸èƒ½æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼‰ï¼Œå…¶å¯¹åº”çš„æ ‡å‡†å±æ€§åº”å½“æ˜¯[[Prototype]]ã€‚ åŸå‹å¯¹è±¡å’Œæ„é€ å‡½æ•° å¯¹äºå¯¹è±¡Personæ¥è¯´ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ˜¯Person()ï¼Œå®ƒçš„åŸå‹å¯¹è±¡ä¸ºPerson.prototypeï¼›è€ŒPerson.prototype.constructoråˆä¼šæŒ‡å›Personã€‚è€Œå¯¹è±¡Personçš„å®ä¾‹person1å’Œperson2éƒ½åŒ…å«æœ‰ä¸€ä¸ªå±æ€§[[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„protoï¼‰å®ƒä»¬éƒ½æŒ‡å‘Person.prototypeï¼›åŒæ—¶ï¼Œperson1å’Œperson2ä¹Ÿå¯ä»¥é€šè¿‡isprototypeOf(ï¼‰æ–¹æ³•æ¥ç¡®å®šæ˜¯å¦ä¸ç¡®å®šå¯¹è±¡ä¹‹é—´æœ‰è¿™ç§å…³ç³»ï¼š 1alert(Person.prototype.isPrototypeOf(person1)); //true åŸå‹ä¸inæ“ä½œç¬¦ inæ“ä½œç¬¦å•ç‹¬ä½¿ç”¨çš„æƒ…å†µ inæ“ä½œç¬¦å•ç‹¬ä½¿ç”¨ä¼šåœ¨é€šè¿‡å¯¹è±¡èƒ½å¤Ÿè®¿é—®ç»™å®šå±æ€§æ—¶è¿”å›trueï¼Œæ— è®ºè¯¥å±æ€§å­˜åœ¨äºå®ä¾‹ä¸­è¿˜æ˜¯åœ¨åŸå‹ä¸­ï¼š 1234//æ¥ä¸Šé¢çš„ä»£ç var person4 = new Person();alert(person4.hasOwnproperty(\"name\")); //ç”±äºperson4å®ä¾‹æ²¡æœ‰è¦†ç›–åŸå‹ä¸­çš„nameæ‰€ä»¥è¿”å›falsealert(\"name\" in person4); //true for-inå¾ªç¯ è¯¥ç§æ–¹å¼æ˜¯è¿”å›æ‰€æœ‰èƒ½å¤Ÿé€šè¿‡å¯¹è±¡è®¿é—®çš„ã€å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬å®ä¾‹å’ŒåŸå‹ä¸­çš„å±æ€§ï¼Œå¹¶ä¸”å±è”½äº†åŸå‹ä¸­ä¸å¯æšä¸¾ï¼ˆ[[Enumerable]]ï¼‰çš„å±æ€§ï¼ˆä»…åœ¨IE8åŠæ›´æ—©ç‰ˆæœ¬ä¸­æœ‰ä¸å¯æšä¸¾çš„å±æ€§ï¼‰ï¼š 12345678910var o = &#123; toString : function() &#123; return \"my Object\" &#125;&#125;for (var prop in o) &#123; if (prop == \"toString\") &#123; alert(\"Found toString\"); //IEä¸­æ— æ³•æ˜¾ç¤º &#125;&#125; è‹¥æƒ³è·å–å¯¹è±¡ä¸­æ‰€æœ‰å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨Object.keys(),è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå¯¹è±¡æˆ–å®ä¾‹ä½œä¸ºå‚æ•°ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯åŸå‹å¯¹è±¡ï¼‰ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789//æ¥Personå¯¹è±¡ä»£ç var keys = Object.keys(person.prototype);var person5 = new Person();person5.name = \"Rob\";person5.age = 31;alert(keys);alert(Object.keys(person5));var keys2 = Object.getOwnPropertyNames(Person.prototype); alert(keys2); ä¸Šè¿°ä»£ç ä¸­å‡ºç°çš„Object.getOwnPropertyNames(Person.prototype)æ–¹æ³•å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„å¯æšä¸¾/ä¸å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼ˆåˆ—å…¥constructorï¼‰ã€‚ åŸå‹çš„åŠ¨æ€æ€§ç”±äºä»åŸå‹ä¸­æŸ¥æ‰¾å€¼çš„è¿‡ç¨‹è¯•ä¸€æ¬¡æœç´¢ï¼Œå› æ­¤å¯¹åŸå‹å¯¹è±¡æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½èƒ½ä»å®ä¾‹ä¸Šåæ˜ å‡ºæ¥ã€‚å³ï¼Œå¯ä»¥å…ˆåˆ›å»ºå®ä¾‹ï¼Œå†ä¿®æ”¹åŸå‹å¯¹è±¡ä¸­çš„å±æ€§æˆ–å‡½æ•°ï¼Œå®ä¾‹ä¾æ—§å¯ä»¥è®¿é—®è¯¥å±æ€§å’Œå‡½æ•°ï¼š 123456//æ¥personå¯¹è±¡ä»£ç var friend = new Person();Person.prototype.sayHi = function() &#123; alert(\"hi!\");&#125;;friend.sayHi(); //è¿”å›â€hiâ€ å°½ç®¡åƒä»¥ä¸Šä»£ç ä¸­æ‰€çœ‹åˆ°çš„å¯ä»¥ä¸ºåŸå‹æ·»åŠ å±æ€§æˆ–æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœé‡å†™æ•´ä¸ªåŸå‹å¯¹è±¡ï¼Œå°±ä¼šåˆ‡æ–­å®ä¾‹çš„æ„é€ å‡½æ•°ä¸æœ€åˆåŸå‹å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚è¿™æ˜¯å› ä¸ºå®ä¾‹ä¸­çš„æŒ‡é’ˆä»…æŒ‡å‘åŸå‹ï¼Œè€Œéæ„é€ å‡½æ•°ã€‚ åŸç”Ÿå¯¹è±¡çš„åŸå‹ä¸ä»…æ˜¯è‡ªå®šä¹‰çš„å¯¹è±¡ï¼ŒJavaScriptä¸­æ‰€æœ‰åŸç”Ÿçš„å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯é‡‡ç”¨è¿™ç§æ¨¡å¼åˆ›å»ºçš„åŸç”Ÿå¯¹è±¡ã€‚é€šè¿‡åŸç”Ÿå¯¹è±¡çš„åŸå‹å¯ä»¥å–å¾—æ‰€æœ‰é»˜è®¤æ–¹æ³•çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ æ–°çš„æ–¹æ³•ã€‚ åŸå‹å¯¹è±¡çš„ç¼ºç‚¹ ç”±äºåŸå‹ä¸­æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯ä»¥è¢«å®ä¾‹å…±äº«ï¼Œè€Œå¯¹äºåŸå‹ä¸­å«æœ‰å¼•ç”¨ç±»å‹å€¼çš„å±æ€§æ¥è¯´å°±ä¼šå‘ç”Ÿé—®é¢˜ï¼š 123456//æ¥personå¯¹è±¡ä»£ç Person.prototype.friends = [\"Shelby\", \"Court\"];var person6 = new Person();person6.friends.push(\"Van\");alert(person6.friends);alert(person1.friends); //æ­¤æ—¶ä¸¤ä¸ªPersonçš„å®ä¾‹æ‹¥æœ‰ç›¸åŒçš„æœ‹å‹ï¼Œå¾ˆå¯èƒ½å‘ç”Ÿé”™è¯¯ å¯ä»¥çœ‹åˆ°ï¼Œç”±äºåŸå‹çš„å±æ€§å¯ä»¥è¢«å…±äº«çš„è¿™ä¸€ç‰¹æ€§ï¼ŒåŸå‹å¯¹è±¡ä¸­åŒ…å«çš„å¼•ç”¨ç±»å‹å€¼å¾ˆå¯èƒ½è¢«ä¿®æ”¹ä¹‹åå¯¼è‡´å®ä¾‹çš„å±æ€§ä¹Ÿå‘ç”Ÿé”™è¯¯ï¼Œå¿…é¡»è¦åœ¨å®ä¾‹å±æ€§ä¸­è¦†ç›–æ‰å¯ä»¥ã€‚æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†ä»¥ä¸‹ç»„åˆæ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼çš„æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼š 123456789101112131415//æ”¹å†™ä¸Šé¢çš„Personå¯¹è±¡//é¦–å…ˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºå¯¹è±¡Personå¹¶åŠ å…¥å®¹æ˜“è¢«ä¿®æ”¹çš„å±æ€§nameï¼Œageï¼Œjobfunction Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job; this.friends = [\"Shelby\", \"Court\"];&#125;//å†ä½¿ç”¨åŸå‹æ¨¡å¼åˆ›å»ºæ„é€ å‡½æ•°å’Œä¸å®¹æ˜“è¢«ä¿®æ”¹çš„å±æ€§å’Œå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥å‘æŒ¥åŸå‹çš„å…±äº«æœºåˆ¶å¹¶å‡å°‘å†…å­˜æ¶ˆè€—Person.prototype = &#123; constructor : Person, sayName : function() &#123; alert(this.name); &#125;&#125; ç¬¬ä¸ƒç«  å‡½æ•°è¡¨è¾¾å¼å‡½æ•°çš„å®šä¹‰æœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯å‡½æ•°å£°æ˜ï¼Œå¦ä¸€ç§æ˜¯å‡½æ•°è¡¨è¾¾å¼ ã€‚ å‡½æ•°å£°æ˜ï¼š 123function functionName(arg0, arg1, arg2) &#123; //å‡½æ•°ä½“\\&#125; Firefoxã€Safariã€Chromeå’ŒOperaéƒ½ç»™å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªéæ ‡å‡†çš„nameå±æ€§ï¼Œå¯ä»¥è®¿é—®åˆ°ç»™å‡½æ•°æŒ‡å®šçš„åå­—alert(functionName.name);åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°æœ‰å‡½æ•°å£°æ˜æå‡çš„é‡è¦ç‰¹å¾ï¼Œæ‰€ä»¥å‡½æ•°å£°æ˜å¯ä»¥æ”¾åœ¨å‡½æ•°è°ƒç”¨è¯­å¥ä¹‹åã€‚ å‡½æ•°è¡¨è¾¾å¼ï¼š 123var functionName = function(arg0, arg1, arg2) &#123; //å‡½æ•°ä½“&#125;; è¿™ç§æƒ…å†µä¸‹åˆ›å»ºçš„å‡½æ•°å«åšåŒ¿åå‡½æ•°fï¼Œæ‰€ä»¥å‡½æ•°çš„nameå±æ€§æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œè€Œä¸”æ ¹æ®èµ‹å€¼è¯­å¥çš„ç‰¹æ€§ï¼Œè°ƒç”¨ä¸€å®šè¦åœ¨å‡½æ•°èµ‹å€¼è¯­å¥ä¹‹åã€‚æ—¢ç„¶å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼ŒåŒæ—¶å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼ã€‚ é€’å½’ æ¦‚å¿µ é€’å½’å‡½æ•°æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°é€šè¿‡åå­—è°ƒç”¨è‡ªèº«çš„æƒ…å†µä¸‹æ„æˆçš„ã€‚ 1234567function factorial(num) &#123; if (num &lt;= 1) &#123; return 1; &#125;else&#123; return num * factorial(num - 1); &#125;&#125; è¿™æ˜¯ä¸€ä¸ªç»å…¸é€’å½’é˜¶ä¹˜å‡½æ•°ï¼Œä½†æ˜¯å­˜åœ¨ä»¥ä¸‹çš„é—®é¢˜ï¼š 123var anotherFactorial = factorial;factorial = null;alert(anotherFactorial(4)); //å‡ºé”™ ä¸Šé¢è°ƒç”¨å‡ºé”™çš„åŸå› æ˜¯ï¼Œå½“factorialçš„å¼•ç”¨è¢«æ›¿æ¢ä¹‹åï¼Œåœ¨anotherFactorialè°ƒç”¨æ—¶è¿˜æ˜¯ä¼šç”¨åˆ°factorialï¼Œè¿™æ—¶å€™å°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚è¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨arguments.calleeå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ arguments.calleeæ˜¯ä¸€ä¸ªæŒ‡å‘æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„æŒ‡é’ˆã€‚æ‰€ä»¥ç”¨è¿™ä¸ªæŒ‡é’ˆå¯¹é€’å½’è°ƒç”¨èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼š 1234567function factorial(num) &#123; if(num &lt;= 1) &#123; return 1; &#125; else &#123; return num * arguments.callee(num - 1); &#125;&#125; å¦‚æœæ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œcalleeæ¨¡å¼ä¼šå¯¼è‡´é”™è¯¯ï¼Œæœ€å¥½ä½¿ç”¨å‘½åå‡½æ•°è¡¨è¾¾å¼æ¥è¾¾åˆ°ç›¸åŒçš„ç›®çš„ï¼š 1234567var factorial = (function f(num) &#123; if(num &lt;= 1) &#123; return 1; &#125; else &#123; return num * f(num - 1); &#125;&#125;); é—­åŒ… æ¦‚å¿µï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ åˆ›å»ºé—­åŒ…ï¼šå¸¸è§æ–¹å¼æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚ ç†è§£é—­åŒ… è¦ç†è§£é—­åŒ…çš„ç»†èŠ‚ï¼Œå¿…é¡»ç†è§£å¦‚ä½•åˆ›å»ºä½œç”¨åŸŸé“¾ä»¥åŠä½œç”¨åŸŸé“¾çš„ä½œç”¨ä»¥åŠç†è§£å‡½æ•°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆã€‚ å½“æŸå‡½æ•°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¯å¢ƒä»¥åŠç›¸åº”çš„ä½œç”¨åŸŸé“¾ï¼Œå¹¶æŠŠä½œç”¨åŸŸé“¾èµ‹å€¼ç»™ä¸€ä¸ªç‰¹æ®Šçš„å†…éƒ¨å±æ€§ï¼ˆ[[Scope]])ï¼Œç„¶åå¯ä»¥ä½¿ç”¨thisã€argumentså’Œå…¶ä»–å‘½åå‚æ•°çš„å€¼æ¥åˆå§‹åŒ–å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ã€‚åœ¨ä½œç”¨åŸŸé“¾ä¸­ï¼Œå¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å§‹ç»ˆå¤„äºç¬¬äºŒä½ï¼Œå¤–éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°æ´»åŠ¨å¯¹è±¡å¤„äºç¬¬ä¸‰ä½ï¼Œç›´è‡³ä½œä¸ºä½œç”¨åŸŸé“¾é‡ç‚¹çš„å…¨å±€æ‰§è¡Œç¯å¢ƒã€‚ æ‰€ä»¥è¯´ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ®ä¸æ´»åŠ¨å¯¹è±¡ï¼ˆthisã€argumentsï¼‰å°±ä¼šè¢«é”€æ¯ï¼Œå†…å­˜ä¸­ä¹Ÿä»…ä¿å­˜å…¨å±€ä½œç”¨åŸŸã€‚è€Œå¼•å…¥é—­åŒ…ä¹‹åæƒ…å†µå°±ä¼šå¥½è½¬ï¼š åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ä¼šå°†åŒ…å«å‡½æ•°ï¼ˆå¤–éƒ¨å‡½æ•°ï¼‰çš„æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­ã€‚å½“è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå…¶æ´»åŠ¨å¯¹è±¡ä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼Œå› ä¸ºå…¶ä¸­çš„åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä»ç„¶åœ¨å¼•ç”¨è¿™ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œé™¤éä½¿ç”¨nullæ¥é”€æ¯è¯¥å‡½æ•°è§£é™¤å¯¹åŒ¿åå‡½æ•°çš„å¼•ç”¨ï¼Œé‡Šæ”¾å†…å­˜ã€‚ é—­åŒ…ä¸å˜é‡ ä½œç”¨åŸŸé“¾çš„æœºåˆ¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼šé—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚é—­åŒ…æ‰€ä¿å­˜çš„æ˜¯æ•´ä¸ªå˜é‡çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹æ®Šçš„å˜é‡ã€‚ è¿™æ˜¯å› ä¸ºåŒ¿åå‡½æ•°å§‹ç»ˆéƒ½åœ¨å†…å­˜ä¸­ä¿å­˜ç€ä½œç”¨åŸŸé“¾ä¸­è¯¥å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥å…¶å®æ‰€æœ‰æ–°å»ºçš„å‡½æ•°éƒ½ä½¿ç”¨ç€åŒä¸€ä¸ªå˜é‡ã€‚é™¤éåœ¨è¯¥åŒ¿åå‡½æ•°ä¸­å†å†™ä¸€ä¸ªåŒ¿åå‡½æ•°æ‰èƒ½å¼ºåˆ¶è®©é—­åŒ…çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚ thiså¯¹è±¡ åœ¨é—­åŒ…ä¸­ä½¿ç”¨thiså¯¹è±¡ä¹Ÿä¼šå‡ºç°é—®é¢˜ï¼šåŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤åŒ¿åå‡½æ•°çš„thiså¯¹è±¡é€šå¸¸æŒ‡å‘windowï¼ˆå…¨å±€å˜é‡ï¼‰ã€‚è¿™æ˜¯å› ä¸ºå†…éƒ¨åŒ¿åå‡½æ•°åœ¨æœç´¢å˜é‡æ—¶ï¼Œæ ¹æ®ä½œç”¨åŸŸé“¾è¿›è¡Œæœç´¢ï¼Œæ‰€ä»¥å­˜åœ¨åœ¨å¯¹è±¡å±æ€§çš„å˜é‡æ˜¯æ— æ³•è®¿é—®åˆ°çš„ï¼ˆåªæœ‰å‡½æ•°æ‰æœ‰ä½œç”¨åŸŸï¼Œè¿˜æ˜¯å› ä¸ºå¤–éƒ¨å‡½æ•°æ²¡æœ‰æ˜¾ç¤ºå£°æ˜thiså¯¹è±¡ï¼Ÿï¼‰ï¼Œå†…éƒ¨å‡½æ•°åªèƒ½æ‰¾åˆ°å…¨å±€ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦é—­åŒ…çš„å‡½æ•°ä¸­è®¿é—®åˆ°å¤–éƒ¨å‡½æ•°çš„thiså¯¹è±¡ï¼Œå¿…é¡»è¦å°†thiså¯¹è±¡ä¿å­˜åœ¨å¤–éƒ¨å‡½æ•°ä¸­ã€‚ å†…å­˜æ³„æ¼ IE9ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœé—­åŒ…çš„ä½œç”¨åŸŸé“¾ä¸­ä¿å­˜ç€ä¸€ä¸ªHTMLå…ƒç´ ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ æ— æ³•è¢«é”€æ¯ã€‚ é¿å…å‘ç”Ÿâ€å¾ªç¯å¼•ç”¨â€œçš„æƒ…å†µã€‚ æ¨¡ä»¿å—çº§ä½œç”¨åŸŸJavaScriptä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„å—è¯­å¥ä¸­å®šä¹‰çš„å˜é‡éƒ½å­˜åœ¨äºå‡½æ•°ä¸­çš„ä½œç”¨åŸŸã€‚æ‰€ä»¥ä»¥ä¸‹ä»£ç æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ï¼š 123456function outputNumbers(count)&#123; for(var i = 0;i &lt; count;i++)&#123; alert(i); &#125; alert(i); //è¿”å›countè®¡æ•°&#125; å°±ç®—åœ¨æœ€åä¸€ä¸ªalert(i)ä¹‹å‰é‡æ–°å®šä¹‰å£°æ˜å˜é‡iä¹Ÿä¸ä¼šæ”¹å˜içš„å€¼ã€‚æ‰€ä»¥JSä»æ¥ä¸ä¼šæé†’æ˜¯å¦å¤šæ¬¡å£°æ˜äº†åŒä¸€ä¸ªå˜é‡ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜çš„äº§ç”Ÿã€‚æ‰€ä»¥è¿™æ—¶å€™éœ€è¦åŒ¿åå‡½æ•°æ¥æ¨¡ä»¿å—çº§ä½œç”¨åŸŸæ¥é¿å…è¿™ä¸ªé—®é¢˜: 123(function()&#123; //è¿™é‡Œå°±æ˜¯å—çº§ä½œç”¨åŸŸ&#125;)(); ä»¥ä¸Šä»£ç å®šä¹‰å¹¶ç«‹å³è°ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå‰ä¸€ä¸ªæ‹¬å·æ˜¯å‡½æ•°è¡¨è¾¾å¼å£°æ˜ï¼Œåä¸€ä¸ªæ‹¬å·æ˜¯æŒ‡ç«‹å³è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°è¡¨è¾¾å¼åé¢å¯ä»¥è·Ÿåœ†æ‹¬å·ï¼Œè€Œå‡½æ•°å£°æ˜åé¢æ˜¯ä¸å¯ä»¥åŠ åœ†æ‹¬å·çš„ã€‚ ç§æœ‰å˜é‡JSä¸­æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼Œå¯¹è±¡å±æ€§å’Œå‡½æ•°éƒ½æ˜¯å…±æœ‰çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç§æœ‰å˜é‡çš„æ¦‚å¿µã€‚ä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ã€‚æ‰€ä»¥åˆ©ç”¨å‡½æ•°çš„é—­åŒ…å°±å¯ä»¥åˆ›å»ºç”¨äºè®¿é—®ç§æœ‰å˜é‡çš„å…¬æœ‰æ–¹æ³•ã€‚è¯¥æ–¹æ³•æˆä¸ºâ€ç‰¹æƒæ–¹æ³•â€ï¼Œåˆ›å»ºæ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š åŸºæœ¬æ¨¡å¼ 12345678910function MyObject()&#123; var privateVariable = 10; function privateFunction()&#123; return false; &#125; this.publicMethod = function()&#123; privateVariable++; return privateFunction(); &#125;;&#125; é™æ€ç§æœ‰å˜é‡åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ç‰¹æƒæ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯å¿…é¡»ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼æ¥è¾¾åˆ°è¯¥ç›®çš„ï¼Œå¯æ˜¯æ„é€ å‡½æ•°æ¨¡å¼çš„ç¼ºç‚¹å°±æ˜¯æ¯ä¸ªå®ä¾‹éƒ½ä¼šåˆ›å»ºåŒæ ·ä¸€ç»„æ–°æ–¹æ³•ã€‚è€Œä½¿ç”¨é™æ€ç§æœ‰å˜é‡æ¥å®ç°ç‰¹æƒæ–¹æ³•å°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ é€šè¿‡åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­å®šä¹‰ç§æœ‰å˜é‡æˆ–å‡½æ•°ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥åˆ›å»ºç‰¹æƒæ–¹æ³•ï¼š 123456789101112(function()&#123; var privateVariable = 10; function privateFunction()&#123; return false; &#125; MyObject = function()&#123; &#125;; //ä¸¥æ ¼æ¨¡å¼ä¸‹æœªç»å£°æ˜çš„å˜é‡èµ‹å€¼ä¼šå¯¼è‡´é”™è¯¯ MyObject.prototype.publicMethod = function()&#123; privateVariable++; return privateFunction(); &#125;;&#125;)(); æ¨¡å—æ¨¡å¼å•ä¾‹ æ˜¯æŒ‡åªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ï¼Œé€šå¸¸JavaScriptæ˜¯ç”¨å¯¹è±¡å­—é¢é‡çš„æ–¹å¼æ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚ è€Œæ¨¡å—æ¨¡å¼æ­£æ˜¯ä¸“é—¨ä¸ºå•ä¾‹åˆ›å»ºç§æœ‰å˜é‡å’Œç‰¹æƒæ–¹æ³•çš„æ–¹å¼ï¼š 12345678910111213var singleton = function()&#123; var privateVariaable = 10; function privateFunction()&#123; return false; &#125; return &#123; publicProperty: true, publicMethod: function()&#123; privateVariable++; return privateFunction(); &#125; &#125;;&#125;(); è¿™ç§æ¨¡å¼åœ¨éœ€è¦å¯¹å•ä¾‹è¿›è¡ŒæŸäº›åˆå§‹åŒ–ï¼ŒåŒæ—¶åˆéœ€è¦ç»´æŠ¤å…¶ç§æœ‰å˜é‡æ—¶æ—¶éå¸¸æœ‰ç”¨çš„ã€‚å•ä¾‹ç»å¸¸è¢«ç”¨åœ¨Webåº”ç”¨ç¨‹åºä¸­æ¥ç®¡ç†åº”ç”¨ç¨‹åºçº§çš„ä¿¡æ¯ã€‚ å¦å¤–è¿˜æœ‰ å¢å¼ºçš„æ¨¡å—æ¨¡å¼ ç¬¬å…«ç«  BOMå¦‚æœåœ¨Webä¸­ä½¿ç”¨JavaScriptï¼Œé‚£ä¹ˆBOMæ‰æ˜¯çœŸæ­£çš„æ ¸å¿ƒã€‚ windowå¯¹è±¡BOMçš„æ ¸å¿ƒå¯¹è±¡æ˜¯windowï¼Œå®ƒè¡¨ç¤ºæµè§ˆå™¨çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œwindowå¯¹è±¡ä¸ä»…æ˜¯é€šè¿‡JavaScriptè®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯ECMAScriptè§„å®šçš„Globalå¯¹è±¡ã€‚ å…¨å±€ä½œç”¨åŸŸ åœ¨JavaScriptä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ã€å‡½æ•°éƒ½ä¼šå˜æˆwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚ç„¶è€Œå®šä¹‰å…¨å±€å˜é‡å’Œåœ¨windowå¯¹è±¡ä¸Šç›´æ¥å®šä¹‰å±æ€§ä»æœ‰ä¸€ç‚¹åŒºåˆ«ï¼šå…¨å±€å˜é‡æ— æ³•é€šè¿‡deleteæ“ä½œç¬¦åˆ é™¤ï¼ˆIE&lt;9æŠ›é”™ï¼Œå…¶ä»–æµè§ˆå™¨è¿”å›falseï¼‰ï¼Œè€Œwindowå¯¹è±¡ä¸Šçš„å±æ€§å¯ä»¥ã€‚ çª—å£å…³ç³»åŠæ¡†æ¶ å¦‚æœé¡µé¢ä¸­åŒ…å«frameï¼Œåˆ™æ¯ä¸€ä¸ªæ¡†æ¶éƒ½æ‹¥æœ‰è‡ªå·±çš„windowå¯¹è±¡ï¼Œå¹¶ä¿å­˜åœ¨framesé›†åˆä¸­ã€‚ çª—å£ä½ç½® ç”¨æ¥ç¡®å®šå’Œä¿®æ”¹windowå¯¹è±¡ä½ç½®çš„å±æ€§å’Œæ–¹æ³•ï¼š IEã€Safariã€Operaå’ŒChromeéƒ½æä¾›screenLeftå’ŒscreenTopå±æ€§ï¼›Chromeå’ŒSafariä»¥åŠFirefoxåˆ™æ”¯æŒscreenXå’ŒscreenYå±æ€§ï¼š 12var leftPos = (typeof window.screenLeft == \"number\") ? window.screenLeft : window.screenX;var topPos = (typeof window.screenTop == \"number\") ? window.screenTop : window.screenY; ä¸Šè¿°ä»£ç å¯¹æµè§ˆå™¨è¿›è¡Œé€‰æ‹©å¹¶è·å–çª—å£çš„ä½ç½®ã€‚é»˜è®¤è¿”å›å·¦ä¸Šè§’åŸç‚¹ï¼ˆ0ï¼Œ0ï¼‰ã€‚ é€šè¿‡winow.moveBy(æ¨ªåæ ‡é•¿åº¦ï¼Œçºµåæ ‡é•¿åº¦)ï¼Œwindow.moveTo(æ¨ªåæ ‡ï¼Œçºµåæ ‡)ï¼Œå¯ä»¥ç§»åŠ¨çª—å£ï¼Œä½†æ˜¯å¯èƒ½ä¼šè¢«æµè§ˆå™¨ç¦ç”¨ã€‚ çª—å£å¤§å° IE9+/Firefox/Safari/Opera/Chromeå‡æä¾›4ä¸ªå±æ€§ï¼šinnerWidth/innerHeight/outerWidth/outerHeightã€‚å…¶ä¸­åœ¨IE9+/Safari/Firefoxä¸­ï¼Œouterwidthå’ŒouterHeightè¿”å›æµè§ˆå™¨çª—å£æœ¬èº«åƒè‘±ï¼ŒOperaä¸­åˆ™æ˜¯è¡¨ç¤ºé¡µé¢è§†å›¾å®¹å™¨çš„å¤§å°ã€‚è€ŒinnerWidthã€innerHeightæ˜¯è¡¨ç¤ºè¯¥å®¹å™¨ä¸­é¡µé¢è§†å›¾å»çš„å¤§å°ã€‚Chromeä¸­å†…å¤–ä¸¤å¯¹å±æ€§è¿”å›ç›¸åŒå€¼-viewportå¤§å°ã€‚ å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨window.resizeTo(width,height)/window.resizeBy(widthtoformer,lengthtoformer) å¯¼èˆªå’Œæ‰“å¼€çª—å£ window.open()æ–¹æ³•å¯ä»¥å¯¼èˆªåˆ°ç‰¹å®šURLæˆ–æ‰“å¼€æ–°æµè§ˆå™¨çª—å£ã€‚ 12window.open(\"http://www.wrox.com/\",topFrame,\"someString\",\"1\")//å››ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç½‘ç«™çš„urlã€çª—å£ç›®æ ‡ï¼ˆæˆ–è€…_self/_parent/_top/_blankï¼‰ï¼Œç‰¹æ€§å­—ç¬¦ä¸²ï¼Œæ˜¯å¦å–ä»£å½“å‰é¡µé¢çš„bool å¦‚æœè¯¥æ–¹æ³•ä¸­ç¬¬äºŒä¸ªå‚æ•°ä¸å­˜åœ¨ï¼Œå°±ä¼šæ ¹æ®åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ­¢ä¼ å…¥çš„å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªæ–°çª—å£ï¼Œæœ‰â€œfullscreen=yesã€height=100â€ç­‰å‚æ•°ï¼Œè¯¥å‚æ•°å­—ç¬¦ä¸²ä¸­ä¸å…è®¸å‡ºç°ç©ºæ ¼ã€‚è¯¥æ–¹æ³•å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼èµ‹å€¼ç»™å˜é‡å¹¶è¿›è¡Œä¸€äº›æ“ä½œï¼š 123456var wroxWin = window.open(\"http://www.wrox.com/\",\"wroxWindow\",\"height=400,width=400,top=10,left=10,resizable=yes\");alert(wroxWin.opener == window); //truewroxWin.resizeTo(500,500);wroxWin.moveTo(20,20);wroxWin.close;alert(wroxWin.closed); //true é‰´äºæœ‰å¾ˆå¤šç½‘ç«™æœ‰å¾ˆå¤šå¼¹çª—å¹¿å‘Šçš„çª—å£ï¼Œæ‰€ä»¥ä¸ºäº†å±è”½è¿™äº›çª—å£ï¼Œç½‘ç«™çš„ä»£ç ä¸­å¯ä»¥ é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨ JSæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä½†æ˜¯å…è®¸é€šè¿‡è®¾ç½®è¶…æ—¶å€¼å’Œé—´æ­‡æ—¶é—´å€¼ï¼ˆæ¯«ç§’ï¼‰æ¥è°ƒåº¦ä»£ç åœ¨ç‰¹å®šæ—¶åˆ»æ‰§è¡Œã€‚å…¶ä¸­ï¼Œè¶…æ—¶å€¼æ˜¯åœ¨æŒ‡å®šæ—¶é—´è¿‡åæ‰§è¡Œä»£ç ï¼Œåè€…æ˜¯æ¯éš”æŒ‡å®šæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡ä»£ç ã€‚ 12345678setTimeout(function() &#123; alert(\"Hello world!\");&#125;, 1000);//ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æ ¼å¼çš„ä»£ç ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ï¼Œä¼šå¯¼è‡´æ€§èƒ½æŸå¤±setInterval(function()&#123; alert(\"Hello World!\");&#125;,10000);//æ¯10000æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ä»£ç  è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œç„¶åé€šè¿‡clearTimeout(timeoutVar)/clearinterval(intervalVaar) ç³»ç»Ÿå¯¹è¯æ¡† æµè§ˆå™¨é€šè¿‡alert(),confirm(),prompt()æ–¹æ³•å¯ä»¥è°ƒç”¨ç³»ç»Ÿå¯¹è¯æ¡†å‘ç”¨æˆ·æ˜¾ç¤ºæ¶ˆæ¯ã€‚å…¶ä¸­confirm()æ–¹æ³•æœ‰OKå’Œcancelä¸¤ä¸ªæŒ‰é’®ï¼Œprompt()ä¼šæç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªå‚æ•°ã€‚å¦å¤–è¿˜æœ‰window.print()æ‰“å°å¯¹è¯æ¡†å’Œwindow.find()æŸ¥æ‰¾å¯¹è¯æ¡†ã€‚ locationå¯¹è±¡locationæ˜¯æœ€æœ‰ç”¨çš„BOMå¯¹è±¡ä¹‹ä¸€ï¼Œæä¾›äº†ä¸å½“å‰çª—å£ä¸­åŠ è½½çš„æ–‡æ¡£æœ‰å…³çš„ä¿¡æ¯å’Œå¯¼èˆªåŠŸèƒ½ï¼Œè¿˜å°†URLè§£æä¸ºç‹¬ç«‹ç‰‡æ®µæ¥é€šè¿‡ä¸åŒå±æ€§è®¿é—®è¿™äº›ç‰‡æ®µã€‚ locationæ—¢æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œåˆæ˜¯documentå¯¹è±¡çš„å±æ€§ï¼Œå³window.location=document.locationã€‚ä¸‹é¢æ˜¯locationçš„æ‰€æœ‰å±æ€§ï¼š hashï¼ˆ#contentsï¼‰ã€hostï¼ˆwww.wrox.com:80ï¼‰ã€hostnameï¼ˆwww.wrox.comï¼‰ã€hrefï¼ˆhttp://www.wrox.comï¼‰ã€pathnameï¼ˆ/WileyCDAï¼‰ã€portï¼ˆ8080ï¼‰ã€protocolï¼ˆhttp:ï¼‰ã€searchï¼ˆ?q=javascriptï¼‰; æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ï¼ˆå¯¹searchå±æ€§è¿›è¡Œå­—ç¬¦ä¸²è§£æï¼‰ ä½ç½®æ“ä½œ é€šè¿‡location.assign(&quot;http://www.wrox.com&quot;);å¯ä»¥æ‰“å¼€æ–°çš„URLï¼Œä¸window.location=&quot;http://www.wrox.com&quot;;ä»¥åŠlocation.href=&quot;http://www.wrox.com&quot;;ç›¸åŒ å¦‚æœè¦ç¦æ­¢å°†é¡µé¢å­˜å…¥æµè§ˆè®°å½•ï¼ˆé˜²æ­¢åé€€åˆ°å‰ä¸€ä¸ªé¡µé¢ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨location.replace(URL); navigatorå¯¹è±¡ æ£€æµ‹æ’ä»¶ navigator.pluginsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸€é¡¹éƒ½åŒ…æ‹¬name, description, filename, length ä½†æ˜¯IEä¸­æ£€æµ‹æ’ä»¶éœ€è¦ä½¿ç”¨ActiveXObjectç±»å‹ï¼š 123456789function hasIEPlugin(name) &#123; try&#123; new ActivXOBject(name); return true; &#125; catch(e) &#123; return false; &#125;&#125;alert(hasIEPlugin(\"shockwaveFlash.ShockwaveFlash\")); æ³¨å†Œå¤„ç†ç¨‹åº navigatorå¯¹è±¡æœ‰registerContentHandler()å’ŒregisterProtocolHandler()æ–¹æ³•ï¼› registerContentHandler()æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šè¦å¤„ç†çš„åè®®ï¼ˆmailtoæˆ–ftpï¼‰ï¼Œå¤„ç†è¯¥åè®®çš„é¡µé¢URLå’Œåº”ç”¨ç¨‹åºçš„åç§°ï¼š 1navigator.registerProtocolHandler(\"mailto\", \"http://www.somemailclient.com?cmd=%s\", \"Some Mail Client\"); screenå¯¹è±¡å¯¹äºå˜æˆæ¥è¯´ä½œç”¨ä¸å¤§ï¼Œç”¨æ¥æ ‡æ˜å®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬æµè§ˆå™¨çª—å£å¤–éƒ¨çš„æ˜¾ç¤ºå…¶ä¿¡æ¯ç­‰ï¼› historyå¯¹è±¡ä½¿ç”¨history.go()æ¥å—å‚æ•°æ•´æ•°ï¼Œä¸€ä¸ªurlï¼ˆè·³åˆ°æœ€è¿‘çš„è¯¥urlé¡µé¢ï¼‰å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨history.back()/.forward(); ç¬¬ä¹ç«  å®¢æˆ·ç«¯æ£€æµ‹èƒ½åŠ›æ£€æµ‹ç›®æ ‡æ˜¯è¯†åˆ«æµè§ˆå™¨çš„èƒ½åŠ›ï¼Œ åŸºæœ¬æ¨¡å¼å¦‚ä¸‹ï¼š 123if(object.propertyInQuestion) &#123; //ä½¿ç”¨object.propertyInQuestion&#125; ä½¿ç”¨æ–¹æ¡ˆï¼šå…ˆæ£€æµ‹è¾¾æˆç›®çš„çš„æœ€å¸¸ç”¨çš„ç‰¹æ€§ï¼ˆæå‡æ•ˆç‡ï¼‰ï¼Œå¿…é¡»æµ‹è¯•å®é™…è¦ç”¨åˆ°çš„ç‰¹æ€§ï¼ˆåˆ¤æ–­æ¡ä»¶è¦å¤Ÿè¯¦ç»†ï¼‰ å¦‚æœæ˜¯æƒ³è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§æˆ–è€…æ”¯æŒæŸç§æ–¹æ³•ï¼Œå°½é‡ä½¿ç”¨typeof æ€ªç™–ï¼ˆbugï¼‰æ£€æµ‹ç›®æ ‡æ˜¯è¯†åˆ«æµè§ˆå™¨çš„ç‰¹æ®Šè¡Œä¸ºã€‚ ç”¨æˆ·ä»£ç†æ£€æµ‹é€šè¿‡æ£€æµ‹ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²æ¥ç¡®å®šå®é™…ä½¿ç”¨çš„æµè§ˆå™¨ã€‚ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ä½œä¸ºå“åº”å¤´éƒ¨å‘é€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡navigator.userAgentå±æ€§è®¿é—® ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²æ£€æµ‹æŠ€æœ¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354var client = function() &#123; var engine = &#123; ie: 0, gecko: 0, webkit: 0, khtml: 0, opera: 0, ver: null &#125;; var browser = &#123; ie: 0, firefox: 0, safari: 0, konq: 0, opera: 0, chrome: 0, ver: null &#125;; var system = &#123; win: false, mac: false, x11: falseï¼Œ iPhoneï¼šfalse, ipod: false, ipad: false, ios: false, android: false, nokiaN: false, winMobile: false &#125;; //navigator.platFORM //å†æ¬¡æ£€æµ‹å‘ˆç°å¼•æ“ã€å¹³å°å’Œè®¾å¤‡ var ua = navigator.userAgent; if(window.opera) &#123; engine.ver = window.opera.version(); engine.opera = parseFloat(engine.ver); &#125; else if(/AppleWebKit\\/(\\S+)/.test(ua)) &#123; engine.ver = RegExp[\"$1\"]; engine.webkit = parseFloat(engine.ver); &#125; else if(ï¼ˆ/KHTML\\/(\\S+).test(ua)) &#123; engine.ver = RegExp[\"$1\"]; engine.khtml = parseFloat(enging.ver); &#125; else if(/rv:([^\\)]+)\\) Gecho\\/d&#123;8&#125;/.test(ua)) &#123; engine.ver = RegExp[\"$1\"]; engine.gecko = parseFloat(engine.ver); &#125; else if(/MSIE ([^;]+)/.test(ua)) &#123; engine.ver = RegExp[\"$1\"]; engine.ie = parseFloat(engine.ver); &#125; return &#123; engineï¼šengine, browser: browser, system: system &#125;;&#125;(); å¯ä»¥æ£€æµ‹ç”¨æˆ·ä»£ç†ã€æµè§ˆå™¨çš„ç±»å‹å’Œç‰ˆæœ¬ã€ç³»ç»Ÿç±»å‹å’Œç‰ˆæœ¬ã€ç§»åŠ¨è®¾å¤‡ ç¬¬åç«  DOMèŠ‚ç‚¹å±‚æ¬¡HTMLé¡µé¢ä¸­ï¼Œæ–‡æ¡£å…ƒç´ å§‹ç»ˆéƒ½æ˜¯å…ƒç´ ã€‚ èŠ‚ç‚¹ç±»å‹DOM1çº§å®šä¹‰äº†Nodeå€Ÿå£ï¼Œç”±DOMä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ç±»å‹å®ç°ã€‚åœ¨JSä¸­ä½œä¸ºNodeç±»å‹å®ç°ï¼Œé™¤äº†IEï¼Œå…¶ä»–æ‰€æœ‰æµè§ˆå™¨ä¸­éƒ½å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªç±»å‹ã€‚èŠ‚ç‚¹ç±»å‹ä¸€å…±æœ‰12ç§ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š 123456if(someNode.nodeType == Node.ELEMENT_NODE) &#123; alert(\"Node is an element.\"); //ä¸é€‚ç”¨äºIE&#125;if(someNode.nodeType == 1) &#123; alert(\"Node is an element.\"); //å…¨éƒ¨é€‚ç”¨&#125; nodeNameå’ŒnodeValueå±æ€§ å¯¹äºå…ƒç´ èŠ‚ç‚¹ï¼ŒnodeNameä¿å­˜å…ƒç´ çš„æ ‡ç­¾åï¼ŒnodeValueä¸­åˆ™ä¸ºnull èŠ‚ç‚¹å…³ç³» å¯ä»¥ä½¿ç”¨.childNode[]æ•°ç»„å±æ€§ã€item()æ–¹æ³•æ¥è®¿é—®å­èŠ‚ç‚¹ï¼š 123var firstChild = someNode.childNodes[0];var secondChild = someNode.childNodes.item(1);var count = someNode.childeNodes.length; å¯ä»¥ä½¿ç”¨parentNodeå±æ€§è®¿é—®çˆ¶èŠ‚ç‚¹ï¼Œä½¿ç”¨previousSiblingå’ŒnextSiblingå±æ€§è®¿é—®å…„å¼ŸèŠ‚ç‚¹ï¼Œä½†æ˜¯åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„previousSiblingå±æ€§å€¼ä¸ºnullï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextSiblingå±æ€§å€¼ä¹Ÿä¸ºnull å¯ä»¥ä½¿ç”¨firstChildå’ŒlastChildå±æ€§è®¿é—®childNodesåˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ“ä½œèŠ‚ç‚¹ appendChild()æ–¹æ³•æ–°å¢èŠ‚ç‚¹ï¼šsomeNode.appendChild(newNode)ï¼Œè¯¥æ–¹æ³•è¿”å›æ–°å¢çš„èŠ‚ç‚¹ï¼Œè‹¥ä¼ å…¥çš„å‚æ•°èŠ‚ç‚¹å·²ç»å­˜åœ¨ï¼Œåˆ™è¯¥æ–¹æ³•å¯¹è¯¥èŠ‚ç‚¹è¿›è¡Œè½¬ç§» insertBefore()æ–¹æ³•æ’å…¥ç‰¹å®šä½ç½®ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªæ˜¯å‚ç…§èŠ‚ç‚¹ replaceChild()æ–¹æ³•æ›¿æ¢èŠ‚ç‚¹ removeChild()æ–¹æ³•ç§»é™¤èŠ‚ç‚¹ cloneNode(ä¸€ä¸ªboolå‚æ•°è¡¨ç¤ºæ˜¯å¦æ‰§è¡Œæ·±å¤åˆ¶)ã€normalize()æ”¯æŒæ‰€æœ‰ç±»å‹èŠ‚ç‚¹ Documentç±»å‹JSä¸­é€šè¿‡Documentç±»å‹è¡¨ç¤ºæ–‡æ¡£ï¼Œdocumentå¯¹è±¡æ˜¯HTMLDocumentï¼ˆç»§æ‰¿è‡ªDocumentç±»å‹ï¼‰çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºæ•´ä¸ªHTMLé¡µé¢ï¼Œä¹Ÿæ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚DocumentèŠ‚ç‚¹å…·æœ‰ä¸‹åˆ—ç‰¹å¾ï¼š nodeTypeå€¼ä¸º9 nodeNameçš„å€¼â€documentâ€œ parentNodeçš„å€¼ä¸ºnull nodeValueçš„å€¼ä¸ºnull ownerDocumentçš„å€¼ä¸ºnull æ–‡æ¡£çš„å­èŠ‚ç‚¹å¯ä»¥é€šè¿‡documentElementå±æ€§ï¼ˆå§‹ç»ˆæŒ‡å‘\\å…ƒç´ ï¼‰å’ŒchildNodesåˆ—è¡¨è®¿é—®æ–‡æ¡£å…ƒç´ ã€‚ å¯ä»¥é€šè¿‡**document.bodyæ¥è®¿é—®\\å…ƒç´ ï¼Œè¿™ä¸¤ä¸ªå±æ€§æ‰€æœ‰æµè§ˆå™¨å‡æ”¯æŒï¼› å¯ä»¥é€šè¿‡**document.doctypeè®¿é—®\\&lt;!DOCTYPE&gt;çš„å¼•ç”¨ï¼Œä½†æ˜¯IE8ä¹‹å‰ä¸æ”¯æŒï¼Œè€Œå…¶ä»–æµè§ˆå™¨è¿™ä¸ªå±æ€§ä¸å­˜åœ¨åœ¨childNodesä¸­ \\æ ‡ç­¾ä¹‹å¤–çš„æ³¨é‡Šä¹Ÿç®—æ–‡æ¡£çš„å­èŠ‚ç‚¹ï¼Œä½†æ˜¯IE8/SAFARI/OPERA/CHROMEå‡åªä¸ºç¬¬ä¸€æ¡æ³¨é‡Šåˆ›å»ºèŠ‚ç‚¹ æ–‡æ¡£ä¿¡æ¯æŸ¥æ‰¾å…ƒç´ ï¼ˆæœ€æœ€å¸¸ç”¨ï¼‰å¯ä»¥é€šè¿‡getElementById(â€œâ€)è®¿é—®æŒ‡å®šå…ƒç´ ,IDå¤§å°å†™åœ¨IE7ä¹‹å‰æœ‰è¦æ±‚ã€‚å¦‚æœå¤šä¸ªç›¸åŒIDçš„å…ƒç´ å‡ºç°ï¼Œåªè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆIE7ä¼šåœ¨nameç­‰äºæŒ‡å®šidæ—¶ä¸”åœ¨è¿™ä¸ªidå…ƒç´ ä¹‹å‰å‡ºç°ï¼Œè¿”å›æœ‰è¯¥nameçš„å…ƒç´ ï¼‰ å¯ä»¥é€šè¿‡getElementsByTagName(â€œâ€)è®¿é—®æŒ‡å®šå…ƒç´ åˆ—è¡¨ï¼Œè¿”å›HTMLCollectionå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„çš„ä¸‹æ ‡è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡item()æ–¹æ³•è¿›è¡Œè®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯¥å¯¹è±¡çš„namedItem(name)æ–¹æ³•è¿”å›ç›¸åŒtagå…ƒç´ åˆ—è¡¨ä¸­æŒ‡å®šçš„nameå…ƒç´ ã€‚ å¯ä»¥é€šè¿‡getElementsByName()è®¿é—® ç‰¹æ®Šé›†åˆ document.anchors document.applets document.forms document.images document.links DOMä¸€è‡´æ€§æ£€æµ‹æ–‡æ¡£å†™å…¥write()/writeln()/open()/close()æ˜¯documentå¯¹è±¡çš„IOåŠŸèƒ½ï¼Œè¿™äº›å‡½æ•°æ˜¯åœ¨åŠ è½½è¿‡ç¨‹å½“ä¸­å†™å…¥çš„ï¼Œæ‰€ä»¥åŠ è½½å®Œå†è¿è¡Œwriteä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢æ¶ˆå¤±ï¼š document.write(&quot;&lt;script type=\\&quot;text/javascript\\&quot; src=\\&quot;file.js\\&quot;&gt;&quot; + &quot;&lt;\\/script&gt;&quot;); Elementç±»å‹è¦è®¿é—®å…ƒç´ çš„æ ‡ç­¾åï¼Œæœ€å¥½ä½¿ç”¨tagNameå±æ€§ï¼Œä½†æ˜¯æ³¨æ„è¿™é‡ŒtagNameè¿”å›çš„æ˜¯å¤§å†™ï¼ HTMLå…ƒç´ ï¼ˆå–å¾—ç‰¹æ€§ï¼‰ ç”±HTMLElementç±»å‹è¡¨ç¤ºï¼Œç»§æ‰¿è‡ªElementç±»å‹ï¼Œæ‹¥æœ‰id/title/lang/dir/classNameç­‰å±æ€§ æ“ä½œç‰¹æ€§ æ“ä½œç‰¹æ€§çš„DOMæ–¹æ³•ä¸»è¦æœ‰ï¼šdiv.getAttribute(â€œå±æ€§åé™¤äº†styleå’Œonclickâ€)/div.setAttribute(â€œå±æ€§åâ€,â€å±æ€§å€¼â€)/div.removeAttribute(â€œå±æ€§åâ€) attributeså±æ€§ åˆ›å»ºå…ƒç´  ä½¿ç”¨document.createElement()æ–¹æ³•åˆ›å»ºæ–°å…ƒç´ ï¼Œåªæ¥å—ä¸€ä¸ªå‚æ•°ä¸ºè¦åˆ›å»ºçš„æ ‡ç­¾å Textç±»å‹ç¬¬åä¸‰ç«  äº‹ä»¶äº‹ä»¶æµäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚ äº‹ä»¶å†’æ³¡ IEçš„äº‹ä»¶æµå«åšäº‹ä»¶å†’æ³¡ï¼šæ—¶é—´å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ ï¼ˆåµŒå¥—å±‚æ¬¡æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹ï¼‰æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­ç›´åˆ°æ–‡æ¡£æ ¹èŠ‚ç‚¹ï¼ˆwindowå¯¹è±¡ï¼‰ã€‚æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒäº‹ä»¶å†’æ³¡ã€‚ äº‹ä»¶æ•è· ä»ä¸å¤ªå…·ä½“çš„èŠ‚ç‚¹å¼€å§‹æ¥æ”¶äº‹ä»¶ï¼Œé€çº§åˆ°æœ€å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚å¾ˆå°‘ä½¿ç”¨äº‹ä»¶æ•è·ã€‚ DOMäº‹ä»¶æµ åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šäº‹ä»¶æ•è·é˜¶æ®µã€å¤„äºç›®æ ‡é˜¶æ®µã€äº‹ä»¶å†’æ³¡é˜¶æ®µã€‚ äº‹ä»¶å¤„ç†ç¨‹åº HTMLäº‹ä»¶å¤„ç†ç¨‹åº 1234&lt;form method=\"post\"&gt; &lt;input type=\"text\" name=\"username\" value=\"\"&gt; &lt;input type=\"button\" value=\"Echo Username\" onclick=\"alert(username.value)\"&gt;&lt;/form&gt; ç¼ºç‚¹ï¼šå¦‚æœè°ƒç”¨çš„å‡½æ•°åœ¨å¼•ç”¨ä¹‹åå®šä¹‰ï¼Œé¡µé¢è§£æè¯¥å‡½æ•°ä¹‹å‰å°±è¿›è¡Œäº†æ“ä½œä¼šå¼•å‘é”™è¯¯ï¼ˆæ—¶å·®é—®é¢˜ï¼‰ï¼›ä¸åŒJSå¼•æ“éµå¾ªçš„æ ‡è¯†ç¬¦è§£æè§„åˆ™ç•¥æœ‰å·®å¼‚ï¼Œå¾ˆå¯èƒ½ä¼šåœ¨è®¿é—®éé™å®šå¯¹è±¡æˆå‘˜æ—¶å‡ºé”™ã€‚ DOM0çº§äº‹ä»¶å¤„ç†ç¨‹åº 1234var btn = document.getElementById(\"myBtn\");btn.onclick = function() &#123; alert(\"Clicked\");&#125; DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åº å®šä¹‰äº†addEventListener()å’ŒremoveEventListener()ç”¨äºæ·»åŠ å’Œåˆ é™¤ç›‘å¬å™¨çš„å‡½æ•°ã€‚éƒ½æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå¤„ç†äº‹ä»¶åï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå’Œä¸€ä¸ªboolå€¼ï¼ˆè¯¥å€¼ä¸ºtrueæ•è·é˜¶æ®µè°ƒç”¨ï¼Œfalseå†’æ³¡é˜¶æ®µè°ƒç”¨ï¼‰ã€‚ä½†æ˜¯addæ–¹æ³•æ·»åŠ çš„ç¨‹åº åªèƒ½ç”¨removeæ¥åˆ é™¤ï¼Œæ‰€ä»¥å½“addä¸€ä¸ªåŒ¿åå‡½æ•°æ—¶å°±æ— æ³•è¢«åˆ é™¤ã€‚ 1234var btn = document.getElementById(\"myBtn\");btn.addEventListener(\"click\", function() &#123; alert(this.id); &#125;, false); å¯æ·»åŠ å¤šä¸ªäº‹ä»¶ï¼ŒæŒ‰é¡ºåºå‡ºå‘ã€‚ IEäº‹ä»¶å¤„ç†ç¨‹åº IEä¸­ä½¿ç”¨attachEvent()ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿›è¡Œï¼Œæ‰€ä»¥å‡½æ•°ä¸­å‡ºç°çš„thisç­‰äºwindowï¼Œè€ŒDOM0ä¸­çš„å‡½æ•°ä¸­å‡ºç°çš„thiså°±æ˜¯å±€éƒ¨ä½œç”¨äºå†…è¿è¡Œã€‚ä¹Ÿæœ‰detachEvent()ç§»é™¤å‡½æ•°ï¼Œæ‰€ä»¥é“ç†ä¸DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºä¸€æ ·ã€‚ 1234var btn = document.getElementById(\"myBtn\");btn.attachEvent(\"onclick\", function() &#123; alert(\"Clicked\"); &#125;); è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åº åˆ›å»ºaddHandler()æ–¹æ³•ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šè¦æ“ä½œçš„å…ƒç´ ã€äº‹ä»¶åç§°å’Œäº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°ï¼›ç›®çš„æ˜¯åˆ¤æ–­æƒ…å†µåº”è¯¥ä½¿ç”¨DOM0/DOM2/IEçš„å“ªç§æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å±äºEventUtilå¯¹è±¡ã€‚ äº‹ä»¶å¯¹è±¡ DOMä¸­çš„äº‹ä»¶å¯¹è±¡ å…¼å®¹DOMçš„æµè§ˆå™¨ä¼šå°†ä¸€ä¸ªeventå¯¹è±¡ä¼ å…¥åˆ°äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚ 1234567var btn = document.getElementById(\"myBtn\");btn.onclick = function(event) &#123; alert(event.type); //\"click\"&#125;;btn.addEventListener(\"click\", function(event) &#123; alert(event.type); //\"click\" &#125;, false) äº‹ä»¶å¤„ç†ç¨‹åºå†…éƒ¨çš„thisæ°¸è¿œéƒ½æ˜¯currentTargetï¼Œä¹Ÿå°±æ˜¯ç°åœ¨äº‹ä»¶ä½œç”¨çš„ç›®æ ‡ï¼ˆæŒ‰é’®ã€windowç­‰ï¼‰ï¼› ä¸€ä¸ªå‡½æ•°å¤„ç†å¤šä¸ªäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨switch(event.type)å‡½æ•°ï¼›é˜»æ­¢ç‰¹å®šæ—¶é—´çš„é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨preventDefault()æ–¹æ³•ï¼›åœæ­¢äº‹ä»¶åœ¨DOMå±‚æ¬¡ä¸­ä¼ æ’­åœæ­¢äº‹ä»¶çš„æ•è·å’Œå†’æ³¡ï¼Œå¯ä»¥è°ƒç”¨stopPropagation()ï¼š 12345678var btn = document.getElementById(\"myBtn\");btn.onclick = function(event) &#123; alert(\"Clicked\"); event.stopPropagation(); //é¿å…äº†ä¸‹é¢bodyä¸Šçš„äº‹ä»¶è§¦å‘&#125;;document.body.onclick = function(event) &#123; alert(\"Body clicked\");&#125;; äº‹ä»¶å¯¹è±¡çš„eventPhaseå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šäº‹ä»¶å½“å‰æ­£ä½äºäº‹ä»¶æµçš„å“ªä¸ªé˜¶æ®µã€‚æ•è·é˜¶æ®µè°ƒç”¨ç¨‹åºä¸º1ï¼Œç¨‹åºæ­£åœ¨ç›®æ ‡å¯¹è±¡ä¸Šä¸º2ï¼Œåœ¨å†’æ³¡é˜¶æ®µè°ƒç”¨ç¨‹åºä¸º3 IEä¸­çš„äº‹ä»¶å¯¹è±¡ 12345var btn = document.getElementById(\"myBtn\");btn.onclick = function() &#123; var event = window.event; alert(event.type); //\"click\"&#125; ç”±äºäº‹ä»¶å¤„ç†ç¨‹åºçš„ä½œç”¨åŸŸåœ¨IEä¸‹æ˜¯å…¨å±€ï¼Œåœ¨DOMä¸‹æ˜¯å±€éƒ¨ä½œç”¨åŸŸï¼Œæ‰€ä»¥æä¾›event.srcElementæ¥åˆ¤æ–­thisçš„æŒ‡å‘ï¼š 1234567var btn = document.getElementById(\"myBtn\");btn.onclick = function() &#123; alert(window.event.srcElement === this); //true&#125;;btn.attachEvent(\"onclick\", function(event) &#123; alert(event.srcElement === this); //false &#125;); è‹¥æƒ³è¦å–æ¶ˆæ—¶é—´çš„é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡è®¾ç½®window.event.returnValue = falseè¿›è¡Œï¼› è‹¥æƒ³è¦é˜»æ­¢æ—¶é—´çš„å†’æ³¡ï¼ˆIEåªæ”¯æŒäº‹ä»¶å†’æ³¡ï¼‰ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®window.event.cancelBubble = true; è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡ äº‹ä»¶ç±»å‹ UIäº‹ä»¶ load(htmlä¸­å¯ä»¥ç»™æ ‡ç­¾æ·»åŠ onload unload abort error select resize scroll ç„¦ç‚¹äº‹ä»¶ blur focus focusin focusout é¼ æ ‡ä¸æ»šè½®äº‹ä»¶ click dbclick mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶ keydown keypress keyup å¤åˆäº‹ä»¶ compositionstart compositionupdate compositionend HTML5äº‹ä»¶ contextmenu beforeunload DOMContentLoaded readystatechange pageshow/pagehide hashchange","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"JavaScriptä¸­çš„åŸå‹ä¸ç»§æ‰¿-ç»§æ‰¿ç¯‡","slug":"2017-04-13-JavaScript-Prototype-and-Inheritance-2","date":"2017-04-13T04:00:00.000Z","updated":"2020-10-20T08:54:59.265Z","comments":true,"path":"2017/04/13/2017-04-13-JavaScript-Prototype-and-Inheritance-2.html","link":"","permalink":"http://keefe.wang/2017/04/13/2017-04-13-JavaScript-Prototype-and-Inheritance-2.html","excerpt":"åŸå‹é“¾åŸå‹é“¾æ˜¯å®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚å›é¡¾æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼šæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹çš„å†…éƒ¨æŒ‡é’ˆã€‚ æ­¤æ—¶æˆ‘ä»¬ä»¤åŸå‹å¯¹è±¡æˆä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥åŸå‹å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æŒ‡é’ˆï¼Œè‹¥æ˜¯è¿™æ ·å±‚å±‚é€’è¿›ï¼Œå°±ä¼šæ„æˆä¸€æ¡å®ä¾‹å’ŒåŸå‹çš„é“¾æ¡ï¼Œè¿™å°±æ˜¯åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚","text":"åŸå‹é“¾åŸå‹é“¾æ˜¯å®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚å›é¡¾æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼šæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹çš„å†…éƒ¨æŒ‡é’ˆã€‚ æ­¤æ—¶æˆ‘ä»¬ä»¤åŸå‹å¯¹è±¡æˆä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥åŸå‹å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æŒ‡é’ˆï¼Œè‹¥æ˜¯è¿™æ ·å±‚å±‚é€’è¿›ï¼Œå°±ä¼šæ„æˆä¸€æ¡å®ä¾‹å’ŒåŸå‹çš„é“¾æ¡ï¼Œè¿™å°±æ˜¯åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚ ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒåŸå‹é“¾ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘åŸå‹å¯¹è±¡ï¼Œè€ŒåŸå‹å¯¹è±¡å†…éƒ¨ä¹Ÿä¼šæœ‰æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚å›¾ä¸­æ–°åˆ›å»ºçš„Fruitå’Œç»§æ‰¿Fruitçš„Appleå’ŒBananaè¿™æ ·çš„å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œé¦–å…ˆä¼šè¿½æº¯åˆ°Objectï¼Œè€Œé€šè¿‡JavaScriptçš„æ§åˆ¶å°ä½¿ç”¨Object.getPrototypeOf(obj)çš„æ–¹æ³•å¾—å‡ºObjectçš„åŸå‹æ˜¯functionï¼Œè€Œfunctionçš„åŸå‹åˆä¼šæŒ‡å‘åˆ°Objectï¼Œæœ€åObjectçš„åŸå‹æœ€ç»ˆä¼šæ˜¯nullï¼Œåˆ°æ­¤ä¸ºæ­¢nullå†ä¹Ÿä¸ä¼šæœ‰åŸå‹å¯¹è±¡ã€‚ è¿™å¹…å›¾ä¹Ÿèƒ½å¾ˆå½¢è±¡åœ°å±•ç¤ºå‡ºä¹‹å‰è®²åˆ°è¿‡çš„åŸå‹æœç´¢æœºåˆ¶ï¼Œå³ï¼Œå½“ä»¥è¯»å–æ¨¡å¼è®¿é—®ä¸€ä¸ªå®ä¾‹å±æ€§æ—¶ï¼Œ1ï¼‰é¦–å…ˆæœç´¢å®ä¾‹ï¼›2ï¼‰æœç´¢è¯¥å®ä¾‹çš„åŸå‹å¯¹è±¡ï¼›3ï¼‰æœç´¢è¯¥å®ä¾‹çš„åŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼›ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰¾åˆ°nullã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½é»˜è®¤ç»§æ‰¿äº†Objectï¼› é€šè¿‡instanceofæ“ä½œç¬¦æ¥ç¡®å®šåŸå‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼› ç”±äºå­ç±»ç»§æ‰¿è¿‡ç¨‹ä¸­éœ€è¦é‡å†™çˆ¶ç±»ä¸­çš„æŸäº›æ–¹æ³•æˆ–è€…æ·»åŠ ä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œç»™åŸå‹æ·»åŠ æ–¹æ³•çš„ä»£ç ä¸€å®šè¦æ”¾åœ¨åŸå‹ç»§æ‰¿çš„è¯­å¥ä¹‹åï¼› åœ¨é€šè¿‡åŸå‹é“¾å®ç°ç»§æ‰¿æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ï¼› ç”±äºåŸå‹çš„å®ä¾‹éƒ½å…±äº«åŸå‹ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´åŸå‹ä¸­å¯èƒ½åŒ…å«çš„å¼•ç”¨ç±»å‹ï¼ˆFunctionã€Arrayï¼‰ä¹Ÿè¢«è¿«åŒæ­¥ç»™æ¯ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›è§£å†³åŠæ³•ã€‚ ç»§æ‰¿ç»§æ‰¿æ–¹å¼ç»å…¸ç»§æ‰¿123456789101112function SuperType() &#123; this.colors = [\"red\", \"blue\", \"green\"];&#125;function SubType() &#123; //ç»§æ‰¿äº†SuperType SuperType.call(this);&#125;var instance1 = new SubType();instance1.colors.push(\"blaack\");alert(instance1.colors); //\"red,blue,green,black\"var instance2 = new SubType();alert(instance2.colors); //\"red,blue,green\" è¯¥æ–¹æ³•ï¼Œå­ç±»ä¸­ä½¿ç”¨callå‡½æ•°è°ƒç”¨äº†çˆ¶ç±»ä¸­çš„å‡½æ•°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å‘å…¶ä¸­ä¼ å…¥ç›¸åº”çš„å‚æ•°ã€‚ç„¶è€Œè¿™ä¸ªæ–¹æ³•éœ€è¦å°†æ‰€æœ‰çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œé€ æˆäº†å‡½æ•°å¤ç”¨æ— æ³•å®ç°ã€‚ ç»„åˆç»§æ‰¿ï¼ˆåŸå‹é“¾+æ„é€ å‡½æ•°ï¼‰å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„â€œåŸå‹å¯¹è±¡çš„ç¼ºç‚¹â€ä»¥åŠä¸Šä¸€ç‚¹â€œç»å…¸ç»§æ‰¿â€ï¼Œç»“åˆèµ·æ¥å°±æ˜¯ç»„åˆç»§æ‰¿çš„æ–¹æ³•ã€‚ 12345678910111213141516function SuperType(name) &#123; this.name = name; this.colors = [\"red\", \"blue\", \"green\"];&#125;SuperType.prototype.sayName = function()&#123; alert(this.name);&#125;;function SubType(name, age) &#123; SuperType.call(this.name); this.age = age;&#125;SubType.prototype = new SuperType();SubType.prototype.constructor = SubType; //è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„å—ï¼ŸSubType.prototype.sayAge = function() &#123; alert(this.age);&#125;; ç„¶è€Œï¼Œç»„åˆç»§æ‰¿ä¹Ÿæœ‰ä¸€å®šçš„ç¼ºé™·ï¼Œå³ï¼Œæ— è®ºä½•ç§æƒ…å†µä¸‹è¿›è¡Œç»§æ‰¿ï¼Œéƒ½ä¼šè°ƒç”¨é‡è¯çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼ˆä¸€æ¬¡æ˜¯åˆ›å»ºå­ç±»åŸå‹ï¼Œå…¶æ¬¡æ˜¯å­ç±»æ„é€ å‡½æ•°å†…éƒ¨ï¼‰ åŸå‹å¼ç»§æ‰¿åŸç†æ˜¯ä½¿ç”¨ä¸€ä¸ªå‡½æ•°å°†ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¤åˆ¶ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456//å°†ä¼ å…¥çš„å¯¹è±¡oè¿›è¡Œå¤åˆ¶ï¼Œå‰¯æœ¬ä¼ ç»™ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°function object(o) &#123; function F()&#123;&#125; F.prototype = 0; return new F();&#125; è€ŒES5ä¸­æ–°å¢äº†Object.create()æ–¹æ³•æ¥è§„èŒƒåŸå‹å¼ç»§æ‰¿ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰€è¦å¤åˆ¶çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å±æ€§æè¿°ç¬¦å®šä¹‰çš„å±æ€§å’Œå±æ€§å€¼ã€‚ï¼ˆä¸æ”¯æŒIE8åŠä»¥ä¸‹æµè§ˆå™¨ï¼‰ åŒæ ·çš„ï¼ŒåŸå‹å¼ç»§æ‰¿ä¹Ÿå­˜åœ¨æ–°åˆ›å»ºçš„å®ä¾‹éƒ½å¿…é¡»é»˜è®¤å…±äº«åŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯¹äºå¼•ç”¨ç±»å‹çš„å±æ€§æ˜¯å­˜åœ¨ç¼ºé™·çš„ã€‚ å¯„ç”Ÿå¼ç»§æ‰¿å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ç±»ä¼¼ï¼Œå³ï¼Œåˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›é›†æˆä¹‹åçš„å¯¹è±¡ã€‚ 1234567function createAnother(originalObj) &#123; var cloneObj = object(originalObj); clone.sayHi = function() &#123; alert(\"Hi\"); &#125;; return cloneObj;&#125; å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ä¸ºäº†è§£å†³ç»„åˆç»§æ‰¿ä¸­å¿…é¡»è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»å¯¹è±¡çš„æ„é€ å‡½æ•°è¿™ä¸€é—®é¢˜ï¼Œæå‡ºäº†å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ã€‚å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„æ€è·¯æ˜¯ï¼Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å‡ æˆç†Ÿå‹ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•ã€‚æœ¬è´¨ä¸Šï¼Œæ˜¯ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿è¶…ç±»å‹çš„åŸå‹ï¼Œå†å°†ç»“æœæŒ‡å®šç»™å­ç±»å‹çš„åŸå‹ã€‚å…¶åŸºæœ¬æ¨¡å¼å¦‚ä¸‹ï¼š 12345function inheritPrototype(subType, superType) &#123; var prototype = Object.create(superType.prototype); //åˆ›å»ºçˆ¶ç±»å‰¯æœ¬ prototype.constructor = subType; //åŠ å¼ºå‰¯æœ¬å¯¹è±¡ subType.prototype = prototype; //å®ŒæˆåŸå‹ç»§æ‰¿çˆ¶ç±»å‰¯æœ¬&#125; è¯¥æ–¹å¼ä¹‹è°ƒç”¨ä¸€æ¬¡SuperTypeçš„æ„é€ å‡½æ•°ï¼Œä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾ä»ä¿æŒä¸å˜ï¼ˆä»èƒ½å¤Ÿä½¿ç”¨instanceofå’ŒisPrototypeOf()æ–¹æ³•ç¡®å®šç»§æ‰¿å…³ç³»ï¼‰ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•ç›®å‰æ¥è¯´æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿æ–¹å¼ã€‚ å…³äºåŸå‹ä¸ç»§æ‰¿çš„æ€»ç»“åœ¨JavaScriptçš„ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è€ƒè™‘åˆ›å»ºçš„å¯¹è±¡æ˜¯å¦éœ€è¦è¢«ç»§æ‰¿ï¼Œå¦‚æœæœ‰è¿™æ ·çš„éœ€è¦ï¼Œæˆ‘ä»¬åº”å½“åŠæ—¶åœ°ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼ˆæ„é€ å‡½æ•°åˆ›å»ºåŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§ï¼ŒåŸå‹æ¥åˆ›å»ºè¯¥å¯¹è±¡çš„å‡½æ•°æ–¹æ³•ï¼‰æ¥åˆ›å»ºè¯¥å¯¹è±¡ï¼ˆæ„é€ å‡½æ•°ï¼‰ï¼›åœ¨ç»§æ‰¿çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¥½é‡‡ç”¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„æ–¹æ³•æ¥è¿›è¡Œå¯¹è±¡çš„ç»§æ‰¿ï¼Œä»¥è¾¾åˆ°æé«˜æ•ˆç‡ä¸”ä¿æŠ¤åŸå‹é“¾çš„ç›®çš„ã€‚ åœ¨è€ƒè™‘åŸå‹å’Œç»§æ‰¿çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç‰¢è®°å®ä¾‹ã€å¯¹è±¡ï¼ˆæ„é€ å‡½æ•°ï¼‰å’ŒåŸå‹ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://keefe.wang/tags/åŸå‹/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"http://keefe.wang/tags/ç»§æ‰¿/"}]},{"title":"JavaScriptæ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ ç¬”è®°[ä¸Š]","slug":"2017-03-20-JavaScript-RegExpression-learning-note","date":"2017-04-12T04:00:00.000Z","updated":"2020-10-20T08:54:51.669Z","comments":true,"path":"2017/04/12/2017-03-20-JavaScript-RegExpression-learning-note.html","link":"","permalink":"http://keefe.wang/2017/04/12/2017-03-20-JavaScript-RegExpression-learning-note.html","excerpt":"æ­£åˆ™è¡¨è¾¾å¼ Regular Expressionæ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”±ä¸€ä¸ªå­—ç¬¦åºåˆ—å½¢æˆçš„æœç´¢æ¨¡å¼,å¯ç”¨äºæ‰€æœ‰æ–‡æœ¬æœç´¢å’Œæ–‡æœ¬æ›¿æ¢çš„æ“ä½œã€‚[^1]å®ƒçš„é‡è¦æ€§å°±ä¸è¨€è€Œå–»äº†ã€‚æœ¬æ–‡ç»“åˆã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸€ä¹¦å¹¶æ•´ç†å…¶ä»–èµ„æ–™ï¼Œå¯¹æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€è¿›è¡Œä¸€ä¸ªå­¦ä¹ ç¬”è®°çš„è®°å½•ã€‚æ›´åŠ è¯¦ç»†çš„æ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ å¿ƒå¾—å°†åœ¨ä¹‹åçš„ç¬”è®°ä¸­è¿›è¡Œè®°å½•ã€‚","text":"æ­£åˆ™è¡¨è¾¾å¼ Regular Expressionæ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”±ä¸€ä¸ªå­—ç¬¦åºåˆ—å½¢æˆçš„æœç´¢æ¨¡å¼,å¯ç”¨äºæ‰€æœ‰æ–‡æœ¬æœç´¢å’Œæ–‡æœ¬æ›¿æ¢çš„æ“ä½œã€‚[^1]å®ƒçš„é‡è¦æ€§å°±ä¸è¨€è€Œå–»äº†ã€‚æœ¬æ–‡ç»“åˆã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸€ä¹¦å¹¶æ•´ç†å…¶ä»–èµ„æ–™ï¼Œå¯¹æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€è¿›è¡Œä¸€ä¸ªå­¦ä¹ ç¬”è®°çš„è®°å½•ã€‚æ›´åŠ è¯¦ç»†çš„æ­£åˆ™è¡¨è¾¾å¼å­¦ä¹ å¿ƒå¾—å°†åœ¨ä¹‹åçš„ç¬”è®°ä¸­è¿›è¡Œè®°å½•ã€‚ æ­£åˆ™è¡¨è¾¾å¼æ„æˆæ­£åˆ™è¡¨è¾¾å¼ç”±ä¸€äº›æ™®é€šå­—ç¬¦å’Œä¸€äº›å…ƒå­—ç¬¦ï¼ˆmetacharactersï¼‰ç»„æˆã€‚æ™®é€šå­—ç¬¦åŒ…æ‹¬å¤§å°å†™çš„å­—æ¯å’Œæ•°å­—ï¼Œè€Œå…ƒå­—ç¬¦ï¼ˆç”¨äºåŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ï¼‰åˆ™å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰[^2]ï¼š å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ æè¿° . åŒ¹é…é™¤â€œ\\r\\nâ€ä¹‹å¤–ä»»ä½•å•ä¸ªå­—ç¬¦ï¼›è¦åŒ¹é…â€œ\\r\\nâ€åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œä½¿ç”¨â€œ[\\s\\S]â€ \\0 æŸ¥æ‰¾NULLå­—ç¬¦ \\b åŒ¹é…å•è¯è¾¹ç•Œï¼›ä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®^3ï¼›ä¾‹ï¼Œâ€œer\\bâ€å¯åŒ¹é…â€œneverâ€çš„â€erâ€ \\B åŒ¹é…éå•è¯è¾¹ç•Œï¼›â€œer\\Bâ€èƒ½åŒ¹é…â€œverbâ€ä¸­çš„â€œerâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œneverâ€ä¸­çš„â€œerâ€ \\cX åŒ¹é…ç”±XæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ï¼›Xçš„å€¼å¿…é¡»ä¸ºA-Zæˆ–a-zä¹‹ä¸€*ï¼›å¦åˆ™ï¼Œè§†ä¸ºä¸€ä¸ªåŸä¹‰çš„â€œcâ€å­—ç¬¦ \\d åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ï¼›ç­‰ä»·äº[0-9] \\D åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ï¼›ç­‰ä»·äº[^0-9] \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ï¼›ç­‰ä»·äº\\x0cå’Œ\\cL \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ï¼›ç­‰ä»·äº\\x0aå’Œ\\cJ \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ï¼›ç­‰ä»·äº\\x0då’Œ\\cM \\s åŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼›åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ï¼›ç­‰ä»·äº[\\f\\n\\r\\t\\v] \\S åŒ¹é…ä»»ä½•å¯è§å­—ç¬¦ï¼›ç­‰ä»·äº[^\\f\\n\\r\\t\\v] \\t åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼›ç­‰ä»·äº\\x09å’Œ\\cI \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ï¼›ç­‰ä»·äº\\x0bå’Œ\\cK \\w åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ï¼›è¯¥å•è¯å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦é›† \\W åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ï¼›ç­‰ä»·äºâ€œ[^A-Za-z0-9_]â€ \\xdd åŒ¹é…åå…­è¿›åˆ¶ddè½¬ä¹‰å€¼ï¼›åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ \\n æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ\\nä¹‹å‰è‡³å°‘nä¸ªè·å–çš„å­è¡¨è¾¾å¼ï¼Œåˆ™nä¸ºå‘åå¼•ç”¨ \\uN åŒ¹é…Nï¼Œå…¶ä¸­Næ˜¯ä¸€ä¸ªç”¨å››ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„Unicodeå­—ç¬¦ è½¬ä¹‰å­—ç¬¦ è½¬ä¹‰å­—ç¬¦ æè¿°ï¼ˆè‹¥å­—ç¬¦æœ¬èº«è¦å‡ºç°ï¼Œéœ€åœ¨ç‰¹æ®Šå­—ç¬¦å‰é¢åŠ \\ï¼‰ \\ å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ç¬¦ã€æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹ä½ç½®ï¼›è‹¥è®¾ç½®äº†æ­£åˆ™è¡¨è¾¾å¼çš„mFlagï¼Œ^ä¹ŸåŒ¹é…â€œ\\nâ€æˆ–â€œ\\râ€ä¹‹åçš„ä½ç½® $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ç»“æŸä½ç½®ï¼›è‹¥è®¾ç½®äº†æ­£åˆ™è¡¨è¾¾å¼çš„mFlagï¼Œ$ä¹ŸåŒ¹é…â€œ\\nâ€æˆ–â€œ\\râ€ä¹‹å‰çš„ä½ç½® * åŒ¹é…å‰ç½®å­è¡¨è¾¾å¼ä»»æ„æ¬¡ï¼›ä¾‹ï¼Œzo*èƒ½åŒ¹é…â€œzâ€ï¼Œâ€œzoâ€ä»¥åŠâ€œzooâ€ï¼Œç­‰ä»·äºâ€o{0,}â€ + åŒ¹é…å‰ç½®å­è¡¨è¾¾å¼å¤§äºç­‰äº1æ¬¡ï¼›ä¾‹ï¼Œâ€œzo+â€èƒ½åŒ¹é…â€œzoâ€ä»¥åŠâ€œzooâ€,ç­‰ä»·äº{1,} ? åŒ¹é…å‰ç½®å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹ï¼Œâ€œdo(es)?â€å¯ä»¥åŒ¹é…â€œdoâ€æˆ–â€œdoesâ€,ç­‰ä»·äº{0,1} . åŒ¹é…é™¤â€œ\\r\\nâ€ä¹‹å¤–ä»»ä½•å•ä¸ªå­—ç¬¦ï¼›è¦åŒ¹é…â€œ\\r\\nâ€åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒâ€œ[\\s\\S]â€æ¨¡å¼ å°†ä¸¤ä¸ªåŒ¹é…æ¡ä»¶è¿›è¡Œé€»è¾‘â€œæˆ–â€ï¼ˆOrï¼‰è¿ç®—ã€‚æ³¨æ„ï¼šè¿™ä¸ªå…ƒå­—ç¬¦ä¸æ˜¯æ‰€æœ‰çš„è½¯ä»¶éƒ½æ”¯æŒçš„ é‡è¯ç±»æ­£åˆ™è¡¨è¾¾å¼ é‡è¯è¡¨è¾¾å¼ æè¿°ï¼ˆè‹¥å­—ç¬¦æœ¬èº«è¦å‡ºç°ï¼Œéœ€åœ¨ç‰¹æ®Šå­—ç¬¦å‰é¢åŠ \\ï¼‰ n+ nä¸ºæŸpatternï¼ŒåŒ¹é…ä»»ä½•è‡³å°‘åŒ…å«ä¸€ä¸ªnçš„å­—ç¬¦ä¸² n* nä¸ºæŸpatternï¼ŒåŒ¹é…é›¶ä¸ªæˆ–è€…å¤šä¸ªnçš„å­—ç¬¦ä¸² n? nä¸ºæŸpatternï¼ŒåŒ¹é…é›¶ä¸ªæˆ–è€…1ä¸ªnçš„å­—ç¬¦ä¸² n{x} nä¸ºæŸpatternï¼ŒåŒ¹é…åŒ…å«xä¸ªnçš„åºåˆ—å­—ç¬¦ä¸² n{x,y} nä¸ºæŸpatternï¼ŒåŒ¹é…è‡³å°‘xä¸ªï¼Œæœ€å¤šyä¸ªnçš„å­—ç¬¦ä¸² n{x,} nä¸ºæŸpatternï¼ŒåŒ¹é…è‡³å°‘xä¸ªçš„å­—ç¬¦ä¸² è·å–/éè·å–ä»¥åŠæ­£åå‘é¢„æŸ¥çš„æ­£åˆ™è¡¨è¾¾å¼ è·å–/éè·å–RegExp æè¿° (pattern) åŒ¹é…patternå¹¶è·å–è¿™ä¸€åŒ¹é…ï¼›æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„Matchesé›†åˆå¾—åˆ°ï¼Œè¯·ä½¿ç”¨â€œ(â€æˆ–â€œ)â€åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ (?:pattern) éè·å–åŒ¹é…ï¼›ä¾‹ï¼Œâ€œindustr(?:y ies)â€ (?=pattern) éè·å–åŒ¹é…ï¼Œæ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€œWindows(?=95 98 NT 2000)â€èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ (?!pattern) éè·å–åŒ¹é…ï¼Œæ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚â€œWindows(?!95 98 NT 2000)â€èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ã€‚ (?&lt;=pattern) éè·å–åŒ¹é…ï¼Œåå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚ï¼Œâ€œ(?&lt;=95 98 NT 2000)Windowsâ€èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€ã€‚ (?&lt;!pattern) éè·å–åŒ¹é…ï¼Œåå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ x y åŒ¹é…xæˆ–yã€‚ä¾‹å¦‚ï¼Œâ€œz foodâ€èƒ½åŒ¹é…â€œzâ€æˆ–â€œfoodâ€(æ­¤å¤„è¯·è°¨æ…)ã€‚â€œ[z f]oodâ€åˆ™åŒ¹é…â€œzoodâ€æˆ–â€œfoodâ€æˆ–â€ oodâ€ã€‚ []èŒƒå›´ç±»æ­£åˆ™è¡¨è¾¾å¼ []æ­£åˆ™è¡¨è¾¾å¼ æè¿°ï¼ˆåªè¦[]ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦åŒ¹é…å°±å¯ä»¥ï¼‰ [0-9] å­—ç¬¦èŒƒå›´ï¼›åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„ä¸€ä¸ªæ•°å­— [xyz] å­—ç¬¦é›†åˆï¼›åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹ï¼Œâ€œ[abc]â€å¯ä»¥åŒ¹é…â€œplainâ€ä¸­çš„â€œaâ€ [^xyz] è´Ÿå€¼å­—ç¬¦é›†åˆï¼›åŒ¹é…æœªåŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹ï¼Œâ€œ[^abc]â€å¯ä»¥åŒ¹é…â€œplainâ€ä¸­çš„â€œplinâ€ [a-z] å­—ç¬¦èŒƒå›´ï¼›åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [^a-z] è´Ÿå€¼å­—ç¬¦èŒƒå›´ï¼›åŒ¹é…ä»»ä½•ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ å…¶ä»–ç±»å‹ å…¶ä»–è¡¨è¾¾å¼ æè¿° \\p{P} å°å†™pæ˜¯propertyçš„æ„æ€ï¼Œè¡¨ç¤ºUnicodeå±æ€§ï¼Œç”¨äºUnicodeæ­£è¡¨è¾¾å¼çš„å‰ç¼€ã€‚ä¸­æ‹¬å·å†…çš„â€œPâ€è¡¨ç¤ºUnicodeå­—ç¬¦é›†ä¸ƒä¸ªå­—ç¬¦å±æ€§ä¹‹ä¸€ï¼šæ ‡ç‚¹å­—ç¬¦^4 \\&lt; &gt; åŒ¹é…ä¸€ä¸ªwordçš„å¼€å§‹ï¼ˆ\\&lt;ï¼‰å’Œç»“æŸï¼ˆ&gt;ï¼‰ ( ) å°†()å†…çš„è¡¨è¾¾å¼å®šä¹‰ä¸ºâ€œç»„â€ï¼ˆgroupï¼‰ï¼Œå¹¶ä¸”å°†åŒ¹é…è¿™ä¸ªè¡¨è¾¾å¼çš„å­—ç¬¦ä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼ˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€å¤šå¯ä»¥ä¿å­˜9ä¸ªï¼‰ï¼Œå®ƒä»¬å¯ä»¥ç”¨\\1åˆ°\\9çš„ç¬¦å·æ¥å¼•ç”¨ è¯­æ³• ç›´æ¥é‡è¯­æ³•ï¼š 1/pattern/flags; å…¶ä¸­//åŒ…å«çš„å†…éƒ¨ï¼ˆpatternï¼‰æ˜¯æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²çš„ä¸»ä½“ï¼›æœ€åçš„flagsæ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°æ ‡å¿—ï¼ŒåŒ…å«å±æ€§æœ‰gï¼Œiï¼Œmä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ä¸å…¨å±€åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™åŒ¹é…å’Œå¤šè¡ŒåŒ¹é…ä¸‰ç§ä¿®é¥°æ ‡å¿—ã€‚ å®ä¾‹ï¼š 1var patt = /[bc]at/i; //åŒ¹é…ç¬¬ä¸€ä¸ªâ€œbatâ€æˆ–â€catâ€œï¼Œä¸åŒºåˆ†å¤§å°å†™ ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºRegExpå¯¹è±¡è¯­æ³•ï¼š 1new RegExp(pattern, attributes); å…¶ä¸­ï¼Œpatternéƒ¨åˆ†ä¸ä¸Šé¢ç›´æ¥é‡è¯­æ³•ä¸­çš„patternç›¸åŒï¼Œattributesæ˜¯ä¸Šé¢flagsç›¸åŒçš„æ ‡å¿—ï¼› RegExpå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•RegExpå®ä¾‹çš„å±æ€§RegExpçš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½å…·æœ‰ä¸‹åˆ—å±æ€§ï¼Œè¿™äº›å±æ€§å¯ä»¥è·å–åˆ°è¯¥å®ä¾‹patternçš„ç›¸å…³ä¿¡æ¯ï¼š .globalï¼šboolå€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†gæ ‡å¿— .ignoreCaseï¼šboolå€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†iæ ‡å¿— .multilineï¼šboolå€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†mæ ‡å¿— .lastIndexï¼šæ•´æ•°å€¼ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹çš„è‡ªè´Ÿä½ç½®ï¼Œä»0ç®—èµ· .sourceï¼šæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ŒæŒ‰ç…§å­—é¢é‡å½¢å¼è€Œéä¼ å…¥æ„é€ å‚æ•°ä¸­çš„å­—ç¬¦ä¸²æ¨¡å¼è¿”å›ï¼› RegExpå®ä¾‹çš„æ–¹æ³• exec()ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸“é—¨ä¸ºæ•è·ç»„è€Œè®¾è®¡çš„ï¼š è¯­æ³•ï¼šRegExpObject.exec(testString) å‚æ•°ï¼šæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³è¦åº”ç”¨è¯¥æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼› è¿”å›ï¼šåŒ…å«ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ä¿¡æ¯çš„æ•°ç»„ï¼ˆæ— åŒ¹é…é¡¹æ—¶è¿”å›nullï¼‰ï¼›ä¸”è¿”å›å€¼å«æœ‰ä¸¤ä¸ªé¢å¤–å±æ€§ï¼Œindexè¡¨ç¤ºåŒ¹é…é¡¹åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®/inputè¡¨ç¤ºåº”ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼› 12345678var testString = \"mom and dad and baby\";var pattern = /mom( and dad( and baby)?)?/gi;var matches = pattern.exec(testString);alert(matches.index); //0alert(matches.input); //\"mom and dad and baby\"alert(matches.[0]); //\"mom adn dad and baby\"alert(matches.[1]); //\" and dad and baby\"alert(matches.[2]); //\" and baby\" ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿”å›çš„æ•°ç»„ç¬¬ä¸€é¡¹æ˜¯ä¸æ•´ä¸ªæ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå…¶ä»–é¡¹æ˜¯ä¸æ¨¡å¼ä¸­çš„æ•è·ç»„åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚å…³äºâ€œç»„â€çš„ç›¸å…³å†…å®¹è¯·å‚è€ƒä¸Šä¸€ç« èŠ‚çš„è¡¨æ ¼ä¸­çš„/()/é¡¹ã€‚ æœ‰å…³å…¨å±€å’Œéå…¨å±€æ¨¡å¼å½“patternä¸ºå…¨å±€æ¨¡å¼æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨exec()è¿›è¡ŒåŒ¹é…æ—¶ä¼šè¿”å›ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå³exec()è°ƒç”¨è¿‡åï¼Œmatches.indexå¯èƒ½ä¼šå¢åŠ ï¼Œpattern.lastIndexä¹Ÿæ˜¯åŒæ ·ä¼šå¢åŠ ï¼›å¦‚æœpatternä¸ºéå…¨å‰§æ¨¡å¼æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨exec()è¿›è¡ŒåŒ¹é…æ—¶éƒ½ä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚ test()ï¼Œç®€å•åŒ¹é…ã€‚åœ¨ä¸çŸ¥é“è¦è¿›è¡ŒåŒ¹é…çš„æ–‡æœ¬å†…å®¹æƒ…å†µä¸‹ä½¿ç”¨æ”¹æ–¹æ³•æ¯”è¾ƒå¥½ï¼š è¯­æ³•ï¼šRegExpObject.test(testString)ï¼› å‚æ•°ï¼šæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³è¦è¿›è¡ŒåŒ¹é…çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼› è¿”å›ï¼šå¦‚æœå­—ç¬¦ä¸²testStringä¸­å«æœ‰ä¸RegExpObjectåŒ¹é…çš„æ–‡æœ¬çš„è¯ï¼Œå°±è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼› RegExpæ„é€ å‡½æ•°å±æ€§RegExpæ„é€ å‡½æ•°åŒ…å«ä¸€äº›å±æ€§ï¼Œè¿™äº›å±æ€§é€‚ç”¨äºä½œç”¨ä¸ä¼—çš„æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŸºäºæ‰€æ‰§è¡Œçš„æœ€è¿‘ä¸€æ¬¡æ­£åˆ™è¡¨è¾¾å¼æ“ä½œè€Œå˜åŒ–ã€‚è¿™äº›å±æ€§åˆ†åˆ«æœ‰ä¸€ä¸ªé•¿å±æ€§åå’Œä¸€ä¸ªçŸ­å±æ€§åï¼ˆOperaä¸æ”¯æŒçŸ­å±æ€§åï¼‰ï¼š é•¿å±æ€§å çŸ­å±æ€§å è¯´æ˜ input $_ æœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„å­—ç¬¦ä¸² lastMatch $&amp; æœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹ lastParen $+ æœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„æ•è·ç»„ leftContext $` inputå­—ç¬¦ä¸²ä¸­lastMatchä¹‹å‰çš„æ–‡æœ¬ multiline $* å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰€æœ‰è¡¨è¾¾å¼éƒ½æ˜¯ç”¨å¤šè¡Œæ¨¡å¼ rightContext $â€™ inputå­—ç¬¦ä¸²ä¸­lastMatchä¹‹åçš„æ–‡æœ¬ å…¶ä¸­ï¼Œå‰ä¸‰é¡¹æ˜¯Operaæ²¡æœ‰å®ç°çš„å±æ€§ã€‚ä½¿ç”¨è¿™äº›å±æ€§èƒ½å¤Ÿä»exec()å’Œtest()æ‰§è¡Œçš„æ“ä½œä¸­æå–æ›´å…·ä½“çš„ä¿¡æ¯ã€‚ [^1]:From http://www.runoob.com/js/js-regexp.htm[^2]:From http://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F?sefr=enterbtn","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"http://keefe.wang/tags/æ­£åˆ™è¡¨è¾¾å¼/"}]},{"title":"JavaScriptä¸­çš„åŸå‹ä¸ç»§æ‰¿-åŸå‹ç¯‡","slug":"2017-04-12-JavaScript-Prototype-and-Inheritance-1","date":"2017-04-12T04:00:00.000Z","updated":"2020-10-20T08:54:55.736Z","comments":true,"path":"2017/04/12/2017-04-12-JavaScript-Prototype-and-Inheritance-1.html","link":"","permalink":"http://keefe.wang/2017/04/12/2017-04-12-JavaScript-Prototype-and-Inheritance-1.html","excerpt":"åŸå‹æ„é€ å‡½æ•°æ¨¡å¼ä¸‹ï¼Œå¯¹è±¡ä¸­çš„æ–¹æ³•ä½œç”¨åŸŸåªåœ¨å¯¹è±¡ä¸­ï¼Œå¯¹è±¡çš„ä¸åŒå®ä¾‹çš„åŒåå‡½æ•°éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œjsä¸­åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€ç”±å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚","text":"åŸå‹æ„é€ å‡½æ•°æ¨¡å¼ä¸‹ï¼Œå¯¹è±¡ä¸­çš„æ–¹æ³•ä½œç”¨åŸŸåªåœ¨å¯¹è±¡ä¸­ï¼Œå¯¹è±¡çš„ä¸åŒå®ä¾‹çš„åŒåå‡½æ•°éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œjsä¸­åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€ç”±å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚ åŸå‹å¯¹è±¡JavaScriptä¸­å¹¶æ²¡æœ‰æä¾›ç±»çš„å®ç°ï¼Œè™½ç„¶åœ¨ES2015/ES6ä¹‹ä¸­å¼•å…¥äº†classå…³é”®å­—ï¼Œä½†æ˜¯JavaScriptä»ç„¶æ˜¯åŸºäºåŸå‹çš„ã€‚è€ŒJavaScriptä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æœ‰ï¼šnew Object()æ–¹æ³•ã€å­—é¢é‡æ–¹æ³•ã€å·¥å‚æ¨¡å¼ã€æ„é€ å‡½æ•°æ–¹æ³•å’ŒåŸå‹æ¨¡å¼ã€‚å…¶ä¸­ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼åˆ›å»ºå¯¹è±¡å¯ä»¥ä»¤æ‰€æœ‰å®ä¾‹å…±äº«æ–¹æ³•ï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæœ‰åˆ©äºå¯¹è±¡ç»§æ‰¿ã€‚ JavaScriptä¸­çš„ç»§æ‰¿åˆ™æ˜¯ä½“ç°åœ¨ä¸€ç§ç»“æ„ä¸Šâ€”â€”å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ç”±Objectè¡ç”Ÿçš„å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº†Object.prototypeçš„æ–¹æ³•å’Œå±æ€§ï¼ˆä¹Ÿæœ‰å¯èƒ½è¢«è¦†ç›–ï¼‰ã€‚æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨é“¾æ¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æˆä¸ºå®ƒçš„åŸå‹ï¼ˆprototypeï¼‰ã€‚è€Œä¸”ï¼Œè¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ï¼Œç›´åˆ°è¿½æº¯åˆ°ä¸€ä¸ªä»¥nullä¸ºåŸå‹çš„å¯¹è±¡ï¼Œå› ä¸ºnullæ˜¯æ²¡æœ‰åŸå‹çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºè¿™ä¸ªåŸå‹é“¾ï¼ˆprototype chainä¸­çš„æœ€ç»ˆé“¾æ¥ã€‚ åªè¦åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°±ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚æ‰€æœ‰åŸå‹å¯¹è±¡éƒ½è‡ªåŠ¨è·å¾—ä¸€ä¸ªconstructorå±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡å‘prototypeå±æ€§æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆã€‚ åŸå‹å¯¹è±¡çš„åˆ›å»º1234567891011121314function Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job; &#125; Person.prototype.sayName = function() &#123; alert(this.name); &#125; var person1 = new Person(\"Nicholas\", 29, \"Lawyer\"); var person2 = new Person(\"Katie\", 30 \"Account\"); var person3 = new Person(\"Nicholas\", 29, \"Lawyer\"); person1.sayName(); //\"Nicholas\" person2.sayName(); //\"Katie\" alert(person1.sayName == person3.sayName); //true æ›´åŠ ç®€å•çš„åŸå‹å¯¹è±¡åˆ›å»ºè¯­æ³•ï¼š 123456789function Person()&#123;&#125;Person.prototype = &#123; name : \"Nicholas\", age : 29, job : \"Software Engineer\", sayName : function() &#123; alert(this.name) &#125; &#125;; ä»£ç æœç´¢æŸå±æ€§çš„è·¯å¾„ï¼š ä¸Šé¢ä»£ç ä¸­å‡ºç°äº†Person.prototype,é€šè¿‡è¯¥å½¢å¼å¯ä»¥è·å¾—åŸå‹å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå…¶æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ®µä»£ç ä¹Ÿå±•ç¤ºäº†å¯¹è±¡å±æ€§å’Œæ–¹æ³•æœç´¢çš„è·¯å¾„ï¼šæ¯å½“ä»£ç è¯»å–æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶ï¼Œè¿›è¡Œç›®æ ‡ä¸ºè¯¥å±æ€§çš„åå­—ï¼Œæœç´¢é¦–å…ˆä»å®ä¾‹ï¼ˆperson1ï¼‰æœ¬èº«å¼€å§‹ï¼Œè‹¥æœ‰è¯¥åå­—çš„å±æ€§åˆ™è¿”å›è¯¥å±æ€§ï¼Œè‹¥æ²¡æœ‰åˆ™ç»§ç»­æœç´¢è¯¥å®ä¾‹ä¸­åŸå‹æŒ‡é’ˆæŒ‡å‘çš„åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾è¯¥åå­—çš„å±æ€§ã€‚æ‰€ä»¥è¯´å®ä¾‹æ˜¯å…±äº«åŸå‹ä¸­ä¿å­˜çš„å±æ€§å’Œæ–¹æ³•ã€‚ å®ä¾‹çš„å±æ€§ï¼ŒåŸå‹çš„å±æ€§ï¼Ÿ ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å®ä¾‹å°½ç®¡å¯ä»¥å…±äº«è¯¥åŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å´æ— æ³•é‡å†™åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½é€šè¿‡åˆ©ç”¨åŒåå±æ€§å’Œæ–¹æ³•æ¥è¦†ç›–å’Œå±è”½åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼›è‹¥æƒ³æŠŠå®ä¾‹ä¸­è¦†ç›–çš„å±æ€§è¿˜åŸï¼Œå¯ä»¥é€šè¿‡deleteæ“ä½œã€‚ä½¿ç”¨hasOwnProperty()æ–¹æ³•å¯ä»¥æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹ä¸­è¿˜æ˜¯å­˜åœ¨äºåŸå‹ä¸­ã€‚ æ€æ ·è·å¾—åŸå‹å¯¹è±¡: ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†Object.getPrototypeOf(obj)æ–¹æ³•å’Œprotoå±æ€§çš„ä½¿ç”¨ï¼š 12Object.getPrototypeOf(person1) === Person.prototype; //true person1.__proto__ === Person.prototype; //true å¯ä»¥çœ‹åˆ°ï¼ŒObject.getPrototypeOf(obj)æ˜¯è·å–objå¯¹è±¡çš„åŸå‹å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°†åœ¨åˆ©ç”¨åŸå‹å®ç°ç»§æ‰¿çš„æƒ…å†µä¸­å‘æŒ¥éå¸¸é‡è¦çš„ä½œç”¨ã€‚obj.proto ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ˜¯æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰çš„å±æ€§ï¼Œä½†æ˜¯protoå¹¶ä¸æ˜¯ä¸€ä¸ªè§„èŒƒçš„å±æ€§ï¼ˆå½“ä½¿ç”¨Object.create()æ–¹æ³•åˆ›å»ºå¯¹è±¡æ—¶ï¼Œproto å¹¶ä¸èƒ½æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼‰ï¼Œå…¶å¯¹åº”çš„æ ‡å‡†å±æ€§åº”å½“æ˜¯[[Prototype]]ã€‚ åŸå‹å¯¹è±¡å’Œæ„é€ å‡½æ•°å¯¹äºå¯¹è±¡Personæ¥è¯´ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ˜¯Person()ï¼Œå®ƒçš„åŸå‹å¯¹è±¡ä¸ºPerson.prototypeï¼›è€ŒPerson.prototype.constructoråˆä¼šæŒ‡å›Personã€‚è€Œå¯¹è±¡Personçš„å®ä¾‹person1å’Œperson2éƒ½åŒ…å«æœ‰ä¸€ä¸ªå±æ€§[[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„protoï¼‰å®ƒä»¬éƒ½æŒ‡å‘Person.prototypeï¼›åŒæ—¶ï¼Œperson1å’Œperson2ä¹Ÿå¯ä»¥é€šè¿‡isprototypeOf(ï¼‰æ–¹æ³•æ¥ç¡®å®šæ˜¯å¦ä¸ç¡®å®šå¯¹è±¡ä¹‹é—´æœ‰è¿™ç§å…³ç³»ï¼š alert(Person.prototype.isPrototypeOf(person1)); //true åŸå‹ä¸inæ“ä½œç¬¦ inæ“ä½œç¬¦å•ç‹¬ä½¿ç”¨çš„æƒ…å†µ inæ“ä½œç¬¦å•ç‹¬ä½¿ç”¨ä¼šåœ¨é€šè¿‡å¯¹è±¡èƒ½å¤Ÿè®¿é—®ç»™å®šå±æ€§æ—¶è¿”å›trueï¼Œæ— è®ºè¯¥å±æ€§å­˜åœ¨äºå®ä¾‹ä¸­è¿˜æ˜¯åœ¨åŸå‹ä¸­ï¼š 1234//æ¥ä¸Šé¢Personå¯¹è±¡ä»£ç  var person4 = new Person(); alert(person4.hasOwnproperty(\"name\")); //ç”±äºperson4å®ä¾‹æ²¡æœ‰è¦†ç›–åŸå‹ä¸­çš„nameæ‰€ä»¥è¿”å›false alert(\"name\" in person4); //true for-inå¾ªç¯ è¯¥ç§æ–¹å¼æ˜¯è¿”å›æ‰€æœ‰èƒ½å¤Ÿé€šè¿‡å¯¹è±¡è®¿é—®çš„ã€å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬å®ä¾‹å’ŒåŸå‹ä¸­çš„å±æ€§ï¼Œå¹¶ä¸”å±è”½äº†åŸå‹ä¸­ä¸å¯æšä¸¾ï¼ˆ[[Enumerable]]ï¼‰çš„å±æ€§ï¼ˆä»…åœ¨IE8åŠæ›´æ—©ç‰ˆæœ¬ä¸­æœ‰ä¸å¯æšä¸¾çš„å±æ€§ï¼‰ï¼š 12345678910var o = &#123; toString : function() &#123; return \"my Object\" &#125; &#125; for (var prop in o) &#123; if (prop == \"toString\") &#123; alert(\"Found toString\"); //IEä¸­æ— æ³•æ˜¾ç¤º &#125; &#125; è‹¥æƒ³è·å–å¯¹è±¡ä¸­æ‰€æœ‰å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨Object.keys(),è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå¯¹è±¡æˆ–å®ä¾‹ä½œä¸ºå‚æ•°ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯åŸå‹å¯¹è±¡ï¼‰ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789//æ¥Personå¯¹è±¡ä»£ç  var keys = Object.keys(person.prototype); var person5 = new Person(); person5.name = \"Rob\"; person5.age = 31; alert(keys); alert(Object.keys(person5)); var keys2 = Object .getOwnPropertyNames(Person.prototype); alert(keys2); ä¸Šè¿°ä»£ç ä¸­å‡ºç°çš„Object.getOwnPropertyNames(Person.prototype)æ–¹æ³•å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„å¯æšä¸¾/ä¸å¯æšä¸¾çš„å®ä¾‹å±æ€§ï¼ˆåˆ—å…¥constructorï¼‰ã€‚ åŸå‹çš„åŠ¨æ€æ€§ç”±äºä»åŸå‹ä¸­æŸ¥æ‰¾å€¼çš„è¿‡ç¨‹è¯•ä¸€æ¬¡æœç´¢ï¼Œå› æ­¤å¯¹åŸå‹å¯¹è±¡æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½èƒ½ä»å®ä¾‹ä¸Šåæ˜ å‡ºæ¥ã€‚å³ï¼Œå¯ä»¥å…ˆåˆ›å»ºå®ä¾‹ï¼Œå†ä¿®æ”¹åŸå‹å¯¹è±¡ä¸­çš„å±æ€§æˆ–å‡½æ•°ï¼Œå®ä¾‹ä¾æ—§å¯ä»¥è®¿é—®è¯¥å±æ€§å’Œå‡½æ•°ï¼š 123456//æ¥personå¯¹è±¡ä»£ç  var friend = new Person(); Person.prototype.sayHi = function() &#123; alert(\"hi!\"); &#125;; friend.sayHi(); //è¿”å›â€hiâ€ å°½ç®¡åƒä»¥ä¸Šä»£ç ä¸­æ‰€çœ‹åˆ°çš„å¯ä»¥ä¸ºåŸå‹æ·»åŠ å±æ€§æˆ–æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœé‡å†™æ•´ä¸ªåŸå‹å¯¹è±¡ï¼Œå°±ä¼šåˆ‡æ–­å®ä¾‹çš„æ„é€ å‡½æ•°ä¸æœ€åˆåŸå‹å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚è¿™æ˜¯å› ä¸ºå®ä¾‹ä¸­çš„æŒ‡é’ˆä»…æŒ‡å‘åŸå‹ï¼Œè€Œéæ„é€ å‡½æ•°ã€‚ åŸç”Ÿå¯¹è±¡çš„åŸå‹ä¸ä»…æ˜¯è‡ªå®šä¹‰çš„å¯¹è±¡ï¼ŒJavaScriptä¸­æ‰€æœ‰åŸç”Ÿçš„å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯é‡‡ç”¨è¿™ç§æ¨¡å¼åˆ›å»ºçš„åŸç”Ÿå¯¹è±¡ã€‚é€šè¿‡åŸç”Ÿå¯¹è±¡çš„åŸå‹å¯ä»¥å–å¾—æ‰€æœ‰é»˜è®¤æ–¹æ³•çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ æ–°çš„æ–¹æ³•ã€‚ åŸå‹å¯¹è±¡çš„ç¼ºç‚¹ ç”±äºåŸå‹ä¸­æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯ä»¥è¢«å®ä¾‹å…±äº«ï¼Œè€Œå¯¹äºåŸå‹ä¸­å«æœ‰å¼•ç”¨ç±»å‹å€¼çš„å±æ€§æ¥è¯´å°±ä¼šå‘ç”Ÿé—®é¢˜ï¼š 123456//æ¥personå¯¹è±¡ä»£ç  Person.prototype.friends = [\"Shelby\", \"Court\"]; var person6 = new Person(); person6.friends.push(\"Van\"); alert(person6.friends); alert(person1.friends); //æ­¤æ—¶ä¸¤ä¸ªPersonçš„å®ä¾‹æ‹¥æœ‰ç›¸åŒçš„æœ‹å‹ï¼Œå¾ˆå¯èƒ½å‘ç”Ÿé”™è¯¯ å¯ä»¥çœ‹åˆ°ï¼Œç”±äºåŸå‹çš„å±æ€§å¯ä»¥è¢«å…±äº«çš„è¿™ä¸€ç‰¹æ€§ï¼ŒåŸå‹å¯¹è±¡ä¸­åŒ…å«çš„å¼•ç”¨ç±»å‹å€¼å¾ˆå¯èƒ½è¢«ä¿®æ”¹ä¹‹åå¯¼è‡´å®ä¾‹çš„å±æ€§ä¹Ÿå‘ç”Ÿé”™è¯¯ï¼Œå¿…é¡»è¦åœ¨å®ä¾‹å±æ€§ä¸­è¦†ç›–æ‰å¯ä»¥ã€‚æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†ä»¥ä¸‹ç»„åˆæ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼çš„æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼š 123456789101112131415//æ”¹å†™ä¸Šé¢çš„Personå¯¹è±¡ //é¦–å…ˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºå¯¹è±¡Personå¹¶åŠ å…¥å®¹æ˜“è¢«ä¿®æ”¹çš„å±æ€§nameï¼Œageï¼Œjob function Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job; this.friends = [\"Shelby\", \"Court\"]; &#125; //å†ä½¿ç”¨åŸå‹æ¨¡å¼åˆ›å»ºæ„é€ å‡½æ•°å’Œä¸å®¹æ˜“è¢«ä¿®æ”¹çš„å±æ€§å’Œå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥å‘æŒ¥åŸå‹çš„å…±äº«æœºåˆ¶å¹¶å‡å°‘å†…å­˜æ¶ˆè€— Person.prototype = &#123; constructor : Person, //å°†æ„é€ å‡½æ•°æ”¾å…¥åŸå‹ä¸­ sayName : function() &#123; alert(this.name); &#125; &#125;","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://keefe.wang/tags/åŸå‹/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"http://keefe.wang/tags/ç»§æ‰¿/"}]},{"title":"CSSä¸­çš„ä¼ªç±»ä¸ä¼ªå…ƒç´ ","slug":"2017-03-10-pseudoCSS-part1-pseudoElement-pseudoClass-note","date":"2017-03-10T04:00:00.000Z","updated":"2020-10-20T08:54:52.622Z","comments":true,"path":"2017/03/10/2017-03-10-pseudoCSS-part1-pseudoElement-pseudoClass-note.html","link":"","permalink":"http://keefe.wang/2017/03/10/2017-03-10-pseudoCSS-part1-pseudoElement-pseudoClass-note.html","excerpt":"ç®€ä»‹[^1]æ ·å¼è¡¨ä¸­çš„é€‰æ‹©å™¨æ˜¯æ§åˆ¶ç½‘é¡µæ ·å¼è¾“å‡ºçš„éå¸¸é‡è¦çš„å·¥å…·ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯cssé€šè¿‡DOMæ ‘æ¥æ§åˆ¶å…¶æ ·å¼çš„æœ€å¥½çš„æ–¹å¼ä¹‹ä¸€ã€‚è€Œé™¤äº†æ ‡ç­¾é€‰æ‹©å™¨ã€ç±»é€‰æ‹©å™¨ã€IDé€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨ä»¥åŠå…ƒç´ å…³ç³»é€‰æ‹©å™¨ï¼ˆçˆ¶å­ã€å…„å¼Ÿç­‰é€‰æ‹©å™¨ï¼‰ï¼ŒCSS3ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºå¤æ‚åŒæ—¶ä¹Ÿæ˜¯æ›´ä¸ºæ–¹ä¾¿è®¾è®¡è€…çš„é€‰æ‹©æ–¹å¼-ä¼ªç±»ï¼ˆPseudo-Classesï¼‰å’Œä¼ªå…ƒç´ ï¼ˆPseudo-Elementsï¼‰ã€‚ ä¼ªç±»å’Œä¼ªå…ƒç´ é€šå¸¸ç”±å†’å·ï¼ˆcolonï¼‰å¼•å¯¼ï¼Œè€ŒCSS3é‡æ–°è§„å®šä¼ªå…ƒç´ ä¹‹å‰éœ€è¦ç”±ä¸¤ä¸ªå†’å·å¼•å¯¼ï¼Œä½†æ˜¯ä¸ºäº†ä½¿æ—§ç‰ˆæœ¬ç½‘ç«™ä¹Ÿèƒ½å¤Ÿç»Ÿä¸€ä½¿ç”¨å’Œæ˜¾ç¤ºï¼ˆIE8åŠä»¥ä¸‹æµè§ˆå™¨æ— æ³•ç†è§£åŒå†’å·çš„è¯­æ³•ï¼‰ï¼Œæµè§ˆå™¨åˆ™ä»æ”¯æŒå•å†’å·å¼•å¯¼çš„ä¼ªå…ƒç´ æ–¹å¼ï¼ˆé™¤äº†å°‘æ•°ç‰¹å®šçš„ä¼ªå…ƒç´ ä¹‹å¤–ï¼‰ã€‚","text":"ç®€ä»‹[^1]æ ·å¼è¡¨ä¸­çš„é€‰æ‹©å™¨æ˜¯æ§åˆ¶ç½‘é¡µæ ·å¼è¾“å‡ºçš„éå¸¸é‡è¦çš„å·¥å…·ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯cssé€šè¿‡DOMæ ‘æ¥æ§åˆ¶å…¶æ ·å¼çš„æœ€å¥½çš„æ–¹å¼ä¹‹ä¸€ã€‚è€Œé™¤äº†æ ‡ç­¾é€‰æ‹©å™¨ã€ç±»é€‰æ‹©å™¨ã€IDé€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨ä»¥åŠå…ƒç´ å…³ç³»é€‰æ‹©å™¨ï¼ˆçˆ¶å­ã€å…„å¼Ÿç­‰é€‰æ‹©å™¨ï¼‰ï¼ŒCSS3ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºå¤æ‚åŒæ—¶ä¹Ÿæ˜¯æ›´ä¸ºæ–¹ä¾¿è®¾è®¡è€…çš„é€‰æ‹©æ–¹å¼-ä¼ªç±»ï¼ˆPseudo-Classesï¼‰å’Œä¼ªå…ƒç´ ï¼ˆPseudo-Elementsï¼‰ã€‚ ä¼ªç±»å’Œä¼ªå…ƒç´ é€šå¸¸ç”±å†’å·ï¼ˆcolonï¼‰å¼•å¯¼ï¼Œè€ŒCSS3é‡æ–°è§„å®šä¼ªå…ƒç´ ä¹‹å‰éœ€è¦ç”±ä¸¤ä¸ªå†’å·å¼•å¯¼ï¼Œä½†æ˜¯ä¸ºäº†ä½¿æ—§ç‰ˆæœ¬ç½‘ç«™ä¹Ÿèƒ½å¤Ÿç»Ÿä¸€ä½¿ç”¨å’Œæ˜¾ç¤ºï¼ˆIE8åŠä»¥ä¸‹æµè§ˆå™¨æ— æ³•ç†è§£åŒå†’å·çš„è¯­æ³•ï¼‰ï¼Œæµè§ˆå™¨åˆ™ä»æ”¯æŒå•å†’å·å¼•å¯¼çš„ä¼ªå…ƒç´ æ–¹å¼ï¼ˆé™¤äº†å°‘æ•°ç‰¹å®šçš„ä¼ªå…ƒç´ ä¹‹å¤–ï¼‰ã€‚ ä¼ªç±»å’Œä¼ªå…ƒç´ çš„åŒºåˆ«[^2]CSSä¸­çš„ä¼ªç±»æ ¹æ®å…ƒç´ çš„ç¼–ç æˆ–åŠ¨æ€çŠ¶æ€ç­‰æ¥é€‰æ‹©HTMLæ–‡æ¡£ä¸­ç‰¹å®šéƒ¨åˆ†ï¼Œå³é€‰æ‹©HTMLæ–‡æ¡£ä¸­çš„æŸå…ƒç´ ï¼ˆé€šè¿‡ç”¨æˆ·çš„å¹²é¢„æˆ–è€…éšç€æ—¶é—´çš„å˜åŒ–è€Œäº§ç”ŸåŠ¨æ€æ”¹å˜çŠ¶æ€ï¼‰ï¼ŒCSS2åˆå°†è¯¥ç‰¹æ€§æ‰©å±•åˆ°äº†DOMæ ‘çš„æŸäº›â€œè™šæ‹Ÿç»„ä»¶â€å’Œå¯æ¨æ–­éƒ¨åˆ†ï¼ˆä¾‹å¦‚first-childï¼‰ï¼Œå¯ä»¥å‡ºç°åœ¨é€‰æ‹©å™¨é“¾æ¡ä¸­çš„ä»»ä½•ä½ç½®ï¼› CSSä¸­çš„ä¼ªå…ƒç´ æ˜¯ç”¨æ¥å¼ºè°ƒæŸäº›å…ƒç´ çš„å­éƒ¨åˆ†ï¼Œå…è®¸é€‰æ‹©å¹¶æ”¹å˜é‚£äº›é™¤DOMä¸­æŒ‡å®šçš„å…ƒç´ ä¹‹å¤–çš„éƒ¨åˆ†çš„æ ·å¼ï¼ˆå¯¹DOMæ ‘ä¸­æœªåŒ…å«çš„é€»è¾‘å…ƒç´ è¿›è¡Œé€‰æ‹©å’Œæ”¹å˜æ ·å¼ï¼‰(å¯ä»¥ç”¨æ¥å±•ç¤ºæ¯”å¦‚å¤´å­—æ¯å¤§å†™ç­‰å¸¸è§çš„æ’ç‰ˆæ•ˆæœ)ï¼›ä¼ªå…ƒç´ æœ‰ä¸€äº›ä½¿ç”¨çš„é™åˆ¶æ¡ä»¶ï¼š ä¸å…è®¸å‡ºç°åœ¨ä¸­çš„in-lineæ ·å¼ï¼ˆåªèƒ½å‡ºç°åœ¨å¤–éƒ¨æ ·å¼è¡¨æˆ–ä½äºçš„æ ·å¼ä¸­ï¼‰ï¼› åœ¨é€‰æ‹©å™¨çš„é“¾æ¡ä¸­åªèƒ½å‡ºç°åœ¨æœ€åä¸€ä½ï¼ˆå³è¦ä½äºä»»ä½•ç±»å’ŒIDé€‰æ‹©ä¹‹åï¼‰ï¼› æ¯ä¸ªé€‰æ‹©å™¨ä¸­åªèƒ½å‡ºç°ä¸€ä¸ªä¼ªå…ƒç´ ï¼ˆè‹¥è¦åœ¨å•ä¸ªå…ƒç´ ç»“æ„ä¸­åŸå¿å¤šä¸ªä¼ªå…ƒç´ çš„é€‰æ‹©ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ªé€‰æ‹©å™¨/æ ·å¼å£°æ˜ï¼‰ï¼› ä¼ªç±»ä¼ªç±»å°±åƒæ˜¯classä¸€æ ·ï¼Œä»¥å†’å·å¼•å¯¼ï¼ˆe.g. :hoverç­‰ï¼‰ï¼Œå¯ä»¥ä»¥æ ‡ç­¾:ä¼ªç±»å’Œç±»:ä¼ªç±»çš„å½¢å¼å­˜åœ¨äºCSSæ ·å¼è¡¨ä¸­ã€‚ åŠ¨æ€ä¼ªç±»é“¾æ¥æ ·å¼çš„åŠ¨æ€ä¼ªç±»é’ˆå¯¹é“¾æ¥ï¼Œç”¨æˆ·å¯ä»¥æ— ä»»ä½•æ“ä½œã€å°†å…‰æ ‡ç§»è‡³é“¾æ¥ä¸Šã€ç‚¹å‡»ã€ç‚¹å‡»åæ”¾å¼€å…‰æ ‡ï¼Œå°†å…‰æ ‡ä»é“¾æ¥ä¸Šç§»èµ°ç­‰æ“ä½œã€‚ a:linké€‰æ‹©ç”¨æˆ·è¿˜æœªè¿›è¡Œè¿‡ä»»ä½•æ“ä½œçš„é“¾æ¥ï¼› a:visitedé€‰æ‹©ç”¨æˆ·å·²ç»ç‚¹å‡»è¿‡çš„é“¾æ¥ï¼› a:hoveré€‰æ‹©ç”¨æˆ·å°†é¼ æ ‡ç§»è‡³ä¸Šæ–¹çš„é“¾æ¥ï¼›åŒæ—¶ï¼Œ:hoverä¼ªç±»ä¹Ÿå¯ä»¥ç”¨åœ¨é™¤é“¾æ¥ä»¥å¤–çš„å…ƒç´ ä¸Šï¼ˆe.g. æˆ–æ˜¯ï¼‰ï¼› a:activeé€‰æ‹©ç”¨æˆ·ä½¿ç”¨é¼ æ ‡æ­£åœ¨ç‚¹å‡»ï¼ˆæŒ‰ä¸‹ï¼‰çš„é“¾æ¥ï¼› æ ·ä¾‹ä»£ç ï¼š1234.example a:link &#123;color:gray;&#125; /*é“¾æ¥æ²¡è¢«è®¿é—®æ—¶ä¸ºç°è‰²*/.example a:visited &#123;color:maroon;&#125; /*é“¾æ¥è¢«è®¿é—®è¿‡åå‰æ™¯è‰²ä¸ºçº¢è‰²*/.example a:hover &#123;color:blue;&#125; /*é¼ æ ‡æ‚¬æµ®åœ¨é“¾æ¥ä¸Šæ—¶å‰æ™¯è‰²ä¸ºè“è‰²*/.example a:active &#123;color:darkblue;&#125; /*é¼ æ ‡æŒ‰ä¸‹é“¾æ¥å‰æ™¯è‰²ä¸ºæ·±è“è‰²*/ è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè¿™å››ä¸ªåŠ¨æ€ä¼ªç±»åœ¨æ ·å¼è¡¨ä¸­å®šä¹‰çš„é¡ºåºæ˜¯ä¸å¯ä»¥ä»»æ„æ’åºçš„ï¼Œè€Œæ˜¯è¦éµå¾ªå”¯ä¸€çš„ä¸€ä¸ªé¡ºåºï¼Œå³LOVE/HATEåŸåˆ™ï¼Œå³ä»¥a:link/a:visited/a:hover/a:activeçš„é¡ºåºæ¥å®šä¹‰ã€‚è¿™æ˜¯å› ä¸ºåœ¨CSSæ ·å¼è¡¨ä¸­é’ˆå¯¹åŒä¸€ä¸ªå…ƒç´ çš„æ ·å¼å®šä¹‰è¦ä»ä¸€èˆ¬åˆ°ç‰¹æ®Šã€‚ä¸€ä¸ªé“¾æ¥åœ¨ç”¨æˆ·æœªè¿›è¡Œæ“ä½œçš„æ—¶å€™å¯èƒ½åŒæ—¶æ‹¥æœ‰:linkã€:visitedå’Œ:hoverä¸‰ç§æ ·å¼å±æ€§ï¼Œè€Œæ— è®ºå¦‚ä½•:hoveréƒ½ä¼šè¦†ç›–å‰é¢ä¸¤ç§æ ·å¼ï¼Œæ‰€ä»¥:hoverè¦åœ¨å‰é¢ä¸¤ç§æ ·å¼ä¹‹åå®šä¹‰ï¼Œè€Œ:linkåˆæ˜¯æœ€ä¸€èˆ¬çš„æ ·å¼ï¼Œæ‰€ä»¥è¦æ”¾åœ¨ç¬¬ä¸€ä½æ¥è¿›è¡Œå®šä¹‰ï¼›æœ€å:activeåˆ™èƒ½è¦†ç›–æ‰€æœ‰ä¹‹å‰ä¸‰ç§å±æ ·å¼ï¼Œæ‰€ä»¥æ”¾åœ¨æœ€åä¸€ä½è¿›è¡Œå®šä¹‰ã€‚ä¸€å¥è¯æ¥æ€»ç»“è¿™ä¸€ç‰¹æ€§ï¼Œè¶Šå®¹æ˜“è¢«è¦†ç›–çš„æ ·å¼è¶Šå…ˆå®šä¹‰ï¼Œè¦†ç›–è¶Šå¤šçš„æ ·å¼è¦è¶Šæ™šå®šä¹‰ã€‚ è¡¨å•æ ·å¼çš„åŠ¨æ€ä¼ªç±»å¸¸å¯¹äºè¾“å…¥ç±»çš„è¡¨å•è¿›è¡Œé€‰æ‹©å¹¶å±•ç¤ºæˆ–ä¿®æ”¹å…¶æ ·å¼çš„åŠ¨æ€ä¼ªç±»ï¼› :focusä¸é“¾æ¥ä¸­çš„:hoverçš„ä½œç”¨ç±»ä¼¼ï¼Œæ˜¯å½“ç”¨æˆ·å°†å…‰æ ‡çš„æ³¨æ„åŠ›é›†ä¸­åˆ°æŸå…ƒç´ è€Œæ”¹å˜å…¶æ ·å¼ï¼Œå¤šç”¨äºç”¨æˆ·åœ¨ç½‘é¡µä¸Šçš„è¡¨å•è¿›è¡Œè¾“å…¥çš„å…ƒç´ è¿›è¡Œé€‰æ‹©ï¼ˆe.g. \\æˆ–\\ï¼‰ã€‚ UIå…ƒç´ çŠ¶æ€ä¼ªç±»(IE8åŠä»¥ä¸‹ä¸æ”¯æŒè¯¥ä¼ªç±»)ï¼š :enabledé€‰æ‹©å¯ä»¥è¿›è¡Œè¾“å…¥å’Œé€‰æ‹©ç­‰æ“ä½œçš„è¡¨å•å…ƒç´ è¿›è¡Œæ ·å¼çš„å£°æ˜ï¼› :disabledé€‰æ‹©ä¸èƒ½è¿›è¡Œè¾“å…¥å’Œé€‰æ‹©ç­‰æ“ä½œçš„è¡¨å•å…ƒç´ è¿›è¡Œæ ·å¼çš„å£°æ˜ï¼› :checkedé€‰æ‹©å·²ç»é€‰æ‹©çš„è¡¨å•å…ƒç´ ï¼ˆtypeä¸ºradioæˆ–checkboxå…ƒç´ ï¼‰è¿›è¡Œæ ·å¼å£°æ˜ï¼› :uncheckedé€‰æ‹©è¿˜æœªè¿›è¡Œé€‰æ‹©çš„è¡¨å•å…ƒç´ è¿›è¡Œæ ·å¼å£°æ˜ï¼› å­é€‰æ‹©å™¨ï¼ˆ:nthé€‰æ‹©å™¨ï¼‰CSSåŸæœ¬æä¾›äº†åä»£é€‰æ‹©å™¨ï¼ˆdescendant selectorï¼‰ï¼Œä½†æ˜¯é’ˆå¯¹äºæŸäº›ç‰¹å®šçš„åœºæ™¯ï¼Œä¾‹å¦‚åˆ—è¡¨å’Œè¡¨æ ¼åˆ¶å®šè¡Œåˆ—çš„æ ·å¼æ”¹å˜ï¼ŒCSSåˆæä¾›äº†ä¼ªç±»é€‰æ‹©å™¨æ¥ä¸ºè¿™äº›å­ç±»é€‰æ‹©å™¨æä¾›æœåŠ¡ã€‚ :first-childé€‰æ‹©æŒ‡å®šå…ƒç´ ä¸­ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼› :last-childé€‰æ‹©æŒ‡å®šå…ƒç´ ä¸­æœ€åä¸€ä¸ªå­å…ƒç´ ï¼› :nth-child(parameter)é€‰æ‹©æŸä¸ªå…ƒç´ çš„ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šçš„å­å…ƒç´ ï¼Œå‚æ•°å¯ä»¥æ˜¯è‡ªç„¶æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åƒ2nï¼Œ3n+1ï¼Œ-n+3è¿™æ ·çš„å…¬å¼è¿›è¡Œæœ‰è§„å¾‹çš„å­å…ƒç´ é€‰æ‹©ï¼› :nth-last-child()ä¸:nth-child()ä½œç”¨ç›¸åŒï¼Œä½†æ˜¯æ˜¯ä»é€‰å®šå…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ å¼€å§‹ç®—èµ·ï¼› :nth-of-type()ä¸:nth-child()ä½œç”¨ç›¸åŒï¼Œä½†æ˜¯å¯ä»¥é€‰æ‹©æŒ‡å®šç±»åˆ«çš„å­å…ƒç´ ï¼› :nth-last-of-type()ä¸:nth-nth-of-type()ä½œç”¨ç›¸åŒï¼Œä½†æ˜¯æ˜¯ä»é€‰å®šå…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ å¼€å§‹ç®—èµ·ï¼› :first-of-typeä¸:first-childä½œç”¨ç›¸åŒï¼Œåªæ˜¯å¯ä»¥é€‰æ‹©å­å…ƒç´ çš„ç±»å‹ï¼› :last-of-typeä¸:last-childä½œç”¨ç›¸åŒï¼Œåªæ˜¯å¯ä»¥é€‰æ‹©å­å…ƒç´ çš„ç±»å‹ï¼› :only-childå½“æŒ‡å®šå…ƒç´ åªæœ‰ä¸€ä¸ªå­å…ƒç´ æ—¶ï¼Œé€‰æ‹©è¯¥å­å…ƒç´ ï¼› :only-of-typeå½“æŒ‡å®šå…ƒç´ åªæœ‰ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å­å…ƒç´ æ—¶ï¼Œé€‰æ‹©è¯¥å­å…ƒç´ ï¼› :emptyå½“åˆ¶å®šå…ƒç´ ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹æ—¶ï¼› ç‰¹æ®Šä¼ªç±»é€‰æ‹©å™¨ :targetè¯¥ä¼ªç±»ç±»ä¼¼äºHTMLä¸­çš„é”šï¼ŒæŒ‡å‘æ–‡æ¡£ä¸­æŸä¸ªå…·ä½“çš„å…ƒç´ ï¼Œå¸¸ç”¨äºç‚¹å‡»å‡ºç°æŸäº›æŒ‡å®šå…ƒç´ æ ·å¼çš„æ”¹å˜ï¼ˆç‚¹å‡»æŒ‰é’®ï¼ŒæŸå…ƒç´ ç”±display:noneå˜ä¸ºdisplay:block;è¿™æ ·çš„å‡ºç°æ•ˆæœï¼‰ï¼› :notä¹Ÿè¢«ç§°ä½œnegation pseudo-classï¼Œä¹Ÿå°±æ˜¯å¦å®šå–åã€‚å½“ä½¿ç”¨ç±»ä¼¼äº 1p:not(.exampleStyle)&#123;color:green&#125; æ—¶ï¼Œæ„ä¸ºé€‰æ‹©æ‰€æœ‰ä¸åŒ…å«ã€‚exampleStyleç±»çš„på…ƒç´ è¿›è¡Œé€‰æ‹©æ”¹å˜å­—ä½“é¢œè‰²ä¸ºgreenã€‚ ä¼ªå…ƒç´ ::beforeå’Œ::after ::beforeå¯ä»¥åœ¨æŸç»™å®šå…ƒç´ ä¸Šæ·»åŠ æå‰å±•ç¤ºçš„å†…å®¹ï¼š 1.tip::before &#123;content: \"HOT TIP!\" &#125; ::afterå¯ä»¥åœ¨æŸç»™å®šå…ƒç´ ä¸Šæ·»åŠ æå‰å±•ç¤ºçš„å†…å®¹ï¼š 1.tip::after &#123;content: \"HOT TIP!\" &#125; æ–‡å­—æ’ç‰ˆå¸¸è§çš„::first-lineå’Œ::first-letter ::first-lineé€‰æ‹©åˆ¶å®šå…ƒç´ çš„ç¬¬ä¸€è¡Œï¼ˆä¾‹å¦‚æ”¹å˜æ¯ä¸ªæ®µè½çš„ç¬¬ä¸€è¡Œæ–‡æœ¬æ ·å¼ï¼‰ï¼› ::first-letteré€‰æ‹©åˆ¶å®šæ–‡æœ¬å—çš„ç¬¬ä¸€ä¸ªå­—æ¯è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå¤šç”¨äºè¿›è¡Œæ®µè½æ’ç‰ˆï¼› å…‰æ ‡é€‰ä¸­æ–‡æœ¬æ ·å¼::selection::selectionç”¨æ¥æ”¹å˜æµè§ˆç½‘é¡µé€‰ä¸­æ–‡æœ¬çš„é»˜è®¤æ•ˆæœï¼› [^1]: ã€ŠCSS, The Missing Manual, 4th Editionã€‹[^2]: Difference between a pseudo-class and a pseudo-element","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"CSS3","slug":"CSS3","permalink":"http://keefe.wang/tags/CSS3/"},{"name":"Selector","slug":"Selector","permalink":"http://keefe.wang/tags/Selector/"}]},{"title":"Node-jsåŸºç¡€å­¦ä¹ ç¬”è®°","slug":"2016-12-13-nodejs-basic-learning-note","date":"2016-12-13T04:00:00.000Z","updated":"2020-10-20T08:54:42.867Z","comments":true,"path":"2016/12/13/2016-12-13-nodejs-basic-learning-note.html","link":"","permalink":"http://keefe.wang/2016/12/13/2016-12-13-nodejs-basic-learning-note.html","excerpt":"Node.jsåŸºç¡€å­¦ä¹ ç¬”è®°åœ¨å‰ç«¯çš„å­¦ä¹ è¿‡ç¨‹å½“ä¸­ï¼Œä¸å¯é¿å…åœ°è¦å­¦ä¹ åˆ°ä¸€å®šçš„åå°æœåŠ¡å™¨çš„æŠ€æœ¯ã€‚ä¹‹å‰ä¸€ç›´éƒ½æ²‰æµ¸åœ¨servletä¸­æ— æ³•è‡ªæ‹”ï¼Œæ‰€ä»¥Javaä¸€åº¦æˆä¸ºè‡ªå·±è¿˜æ¯”è¾ƒç†Ÿæ‚‰çš„åå°è¯­è¨€ï¼Œä½†æ˜¯ç›¸å¯¹äºæœ¬èº«æ¯”è¾ƒç†Ÿæ‚‰çš„JavaScriptæ¥è¯´ï¼Œå½“ç„¶æ˜¯å°½é‡ç”¨JSæ¥å¤„ç†åå°æœ€å¥½ä¸è¿‡äº†ï¼Œæ‰€ä»¥Node.jsé¡ºå…¶è‡ªç„¶æˆä¸ºäº†å­¦ä¹ è·¯ä¸Šå¿…è¦çš„ä¸€é“å…³å¡ã€‚ ç•¥è¿‡å®‰è£…ã€é…ç½®å’Œåˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ï¼Œæƒ³å¿…å¾ˆå¤šNode.jsç›¸å…³ç½‘ç«™éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ•™ç¨‹ï¼Œæœ¬æ–‡ä»…è®°å½•åœ¨å­¦ä¹ Node.jsåŸºç¡€çŸ¥è¯†ä¸­ä¸€äº›å…³é”®ç‚¹æŠ€æœ¯ã€‚","text":"Node.jsåŸºç¡€å­¦ä¹ ç¬”è®°åœ¨å‰ç«¯çš„å­¦ä¹ è¿‡ç¨‹å½“ä¸­ï¼Œä¸å¯é¿å…åœ°è¦å­¦ä¹ åˆ°ä¸€å®šçš„åå°æœåŠ¡å™¨çš„æŠ€æœ¯ã€‚ä¹‹å‰ä¸€ç›´éƒ½æ²‰æµ¸åœ¨servletä¸­æ— æ³•è‡ªæ‹”ï¼Œæ‰€ä»¥Javaä¸€åº¦æˆä¸ºè‡ªå·±è¿˜æ¯”è¾ƒç†Ÿæ‚‰çš„åå°è¯­è¨€ï¼Œä½†æ˜¯ç›¸å¯¹äºæœ¬èº«æ¯”è¾ƒç†Ÿæ‚‰çš„JavaScriptæ¥è¯´ï¼Œå½“ç„¶æ˜¯å°½é‡ç”¨JSæ¥å¤„ç†åå°æœ€å¥½ä¸è¿‡äº†ï¼Œæ‰€ä»¥Node.jsé¡ºå…¶è‡ªç„¶æˆä¸ºäº†å­¦ä¹ è·¯ä¸Šå¿…è¦çš„ä¸€é“å…³å¡ã€‚ ç•¥è¿‡å®‰è£…ã€é…ç½®å’Œåˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ï¼Œæƒ³å¿…å¾ˆå¤šNode.jsç›¸å…³ç½‘ç«™éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ•™ç¨‹ï¼Œæœ¬æ–‡ä»…è®°å½•åœ¨å­¦ä¹ Node.jsåŸºç¡€çŸ¥è¯†ä¸­ä¸€äº›å…³é”®ç‚¹æŠ€æœ¯ã€‚ Node.jsåº”ç”¨Node.js åº”ç”¨æ˜¯ç”±ä¸‹é¢å‡ éƒ¨åˆ†ç»„æˆçš„ï¼š å¼•å…¥ required æ¨¡å—ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚ åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äº Apache ã€Nginx ç­‰ HTTP æœåŠ¡å™¨ã€‚ æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ æœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚ åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼š 1234567891011var http = require('http');http.createServer(function (request, response) &#123; // å‘é€ HTTP å¤´éƒ¨ // HTTP çŠ¶æ€å€¼: 200 : OK // å†…å®¹ç±»å‹: text/plain response.writeHead(200, &#123;'Content-Type': 'text/plain'&#125;); // å‘é€å“åº”æ•°æ® \"Hello World\" response.end('Hello World\\n');&#125;).listen(8888);// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯console.log('Server running at http://127.0.0.1:8888/'); å›è°ƒå‡½æ•°Node.jsæ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯é€šè¿‡äº‹ä»¶å’Œå›è°ƒæ”¯æŒå¹¶å‘å’Œå¼‚æ­¥ã€‚ Nodeçš„æ‰€æœ‰APIéƒ½æ”¯æŒå›è°ƒå‡½æ•°ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œå®Œç¾æ”¯æŒå¼‚æ­¥å¤„ç†å¤§é‡çš„è¯·æ±‚ã€‚å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ å…¥å¼‚æ­¥å‡½æ•°ï¼Œè€Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ï¼š 123456789var fs = require(\"fs\");fs.readFile('input.txt', function (err, data) &#123; if (err)&#123; console.log(err.stack); return; &#125; console.log(data.toString());&#125;);console.log(\"ç¨‹åºæ‰§è¡Œå®Œæ¯•\"); äº‹ä»¶å¾ªç¯Node.jsä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚ä»£ç ä¸­å¼•å…¥eventsæ¨¡å—ï¼Œé€šè¿‡å®ä¾‹åŒ–EventEmitterç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼š 12345678var events = require('events'); // å¼•å…¥ events æ¨¡å—var eventEmitter = new events.EventEmitter(); // åˆ›å»º eventEmitter å¯¹è±¡event.on('some_event', function() &#123; // ç»‘å®šäº‹ä»¶ï¼Œfunctionä¸­å¯æ·»åŠ å¤šå‚æ•° console.log('some_event äº‹ä»¶è§¦å‘'); &#125;); setTimeout(function() &#123; // è§¦å‘äº‹ä»¶ event.emit('some_event'); &#125;, 1000); eventsæ¨¡å—ä¸‹åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼ševents.EventEmitterï¼Œå…¶æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬ä¸¤è€…çš„å°è£…ã€‚EventEmitterçš„æ¯ä¸ªäº‹ä»¶éƒ½ç”±ä¸€ä¸ªäº‹ä»¶åï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰å’Œè‹¥å¹²å‚æ•°æ„æˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒï¼ŒåŒ…æ‹¬fsã€netã€httpåœ¨å†…éƒ½æ˜¯EventEmitterçš„å­ç±»ï¼ˆä¸ºäº†ç¬¦åˆäº‹ä»¶è¯­ä¹‰ï¼Œå¹¶ä¸”ç¬¦åˆJSçš„åŸå‹å¯¹è±¡æœºåˆ¶ï¼‰ã€‚ EventEmitterå¯¹è±¡çš„å±æ€§ .addListener(event, listener)ï¼šä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ .on(event, listener)ï¼šä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•° .once(event, listener):ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ .removeListener(event, listener)ï¼šç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯äº‹ä»¶åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°åç§° .removeAllListeners([event])ï¼šç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œ å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ setMaxListeners(n)ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ï¼›setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ listeners(event)ï¼šè¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„ã€‚ emit(event, [arg1], [arg2], [â€¦])ï¼šæŒ‰å‚æ•°çš„é¡ºåºæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ ç¼“å†²åŒºç”±äºJSä¸­ä¸æ”¯æŒäºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼ŒNode.jsæä¾›äº†Bufferç±»ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºï¼ˆä¸€ä¸ªBufferç±»ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼‰ã€‚åˆ›å»ºBufferå®ä¾‹æœ‰å¤šç§æ–¹æ³•ï¼š 123+ ä»¥å­—èŠ‚æ•°é‡åˆ›å»ºï¼švar buf = new Buffer(10);+ ä»¥æ•°ç»„åˆ›å»ºï¼švar buf = new Buffer([10, 20, 30, 40, 50]);+ ä»¥å­—ç¬¦ä¸²åˆ›å»ºï¼švar buf = new Buffer(&quot;www.runoob.com&quot;, &quot;utf-8&quot;); å†™å…¥ç¼“å†²åŒºï¼šbuf.write(string[, offset[, length]][, encoding]);å‚æ•°åˆ†åˆ«ä¸ºå¿…é¡»çš„å†™å…¥ç¼“å†²åŒºçš„å­—ç¬¦ä¸²ï¼Œå¯é€‰çš„å¼€å§‹å†™å…¥ç´¢å¼•å€¼ï¼ˆé»˜è®¤ä¸º0ï¼‰ã€å†™å…¥å­—èŠ‚æ•°ï¼ˆé»˜è®¤buffer.lengthï¼‰ã€ä½¿ç”¨çš„ç¼–ç ï¼ˆé»˜è®¤ä¸ºutf8ï¼‰ã€‚è¯¥å†™å…¥çš„æ–¹æ³•ä¼šè¿”å›å®é™…å†™å…¥çš„å¤§å° è¯»ç¼“å†²åŒºï¼šbuf.toString([encoding[, start[, end]]]); å°†Bufferå®ä¾‹è½¬æ¢ä¸ºJSONå¯¹è±¡ï¼šbuf.toJSON() ç¼“å†²åŒºåˆå¹¶ï¼šBuffer.concat(bufArray[, totalLength]);å…¶ä¸­bufArrayæ˜¯éœ€è¦è¿›è¡Œåˆå¹¶çš„Bufferå®ä¾‹æ•°ç»„ ç¼“å†²åŒºæ¯”è¾ƒï¼šbuf.compare(otherBuffer);è¿”å›è´Ÿæ•°è¡¨ç¤ºbufåœ¨å‰ï¼Œ0è¡¨ç¤ºç›¸åŒï¼Œæ­£æ•°è¡¨ç¤ºbufåœ¨å æ‹·è´ç¼“å†²åŒºï¼šbuf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]]);å…¶ä¸­bufæ˜¯è¢«å¤åˆ¶çš„ï¼ŒtargetBufferæ˜¯å¤åˆ¶çš„ç›®æ ‡ç¼“å†²åŒº ç¼“å†²åŒºè£å‰ªï¼šbuf.slice([start[, end]]);è¿”å›ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œä¸æ—§ç¼“å†²åŒºæŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œç´¢å¼•ä¸åŒ ç¼“å†²åŒºé•¿åº¦ï¼šbuf.length;è¿”å›ç¼“å†²åŒºæ‰€å å†…å­˜é•¿åº¦ Streamæ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œæµç±»å‹æœ‰å››ç§ï¼š 1234+ Readableï¼šå¯è¯»æ“ä½œ+ Writableï¼šå¯å†™æ“ä½œ+ Duplexï¼šå¯è¯»å¯å†™æ“ä½œ+ Transformï¼šæ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœ æ‰€æœ‰çš„Streamå¯¹è±¡éƒ½æ˜¯EventEmitterçš„å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ç»‘å®šçš„å¸¸ç”¨äº‹ä»¶æœ‰dataï¼ˆæœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ï¼‰ã€endï¼ˆæ²¡æœ‰æ›´å¤šæ•°æ®å¯è¯»æ—¶è§¦å‘ï¼‰ã€errorï¼ˆæ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ï¼‰ã€finishï¼ˆæ‰€æœ‰æ•°æ®å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ï¼‰ã€‚ Nodeä¸­åˆæœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä¾‹å¦‚å¯¹httpæœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„requestå¯¹è±¡å°±æ˜¯ä¸€ä¸ªStreamï¼Œstdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ä¹Ÿæ˜¯ä¸€ä¸ªStreamã€‚ è¯»å–æµ 1234567891011121314var fs = require(\"fs\");var data = '';var readerStream = fs.createReadStream('input.txt');//åˆ›å»ºå¯è¯»æµreaderStream.setEncoding('UTF8');// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and errorreaderStream.on('data', function(chunk) &#123; //æ­¤å¤„çš„dataå¹¶ä¸æ˜¯è¯»å–ç»“æœå­—ç¬¦ä¸² data += chunk;&#125;);readerStream.on('end',function()&#123; console.log(data);&#125;);readerStream.on('error', function(err)&#123; console.log(err.stack);&#125;); å†™å…¥æµ 1234567891011var fs = require(\"fs\");var data = 'èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com';var writerStream = fs.createWriteStream('output.txt');//åˆ›å»ºå†™å…¥æµwriterStream.write(data,'UTF8');writerStream.end(); // æ ‡è®°æ–‡ä»¶æœ«å°¾writerStream.on('finish', function() &#123; console.log(\"å†™å…¥å®Œæˆã€‚\");&#125;);writerStream.on('error', function(err)&#123; console.log(err.stack);&#125;);","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://keefe.wang/tags/JavaScript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"http://keefe.wang/tags/Nodejs/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://keefe.wang/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"Jenaå­¦ä¹ ç¬”è®°","slug":"2015-11-20-jena-learning-note","date":"2015-09-21T04:00:00.000Z","updated":"2020-10-20T08:54:45.535Z","comments":true,"path":"2015/09/21/2015-11-20-jena-learning-note.html","link":"","permalink":"http://keefe.wang/2015/09/21/2015-11-20-jena-learning-note.html","excerpt":"Jenaåˆæ­¥äº†è§£JenaAPIçš„æ¡†æ¶å¦‚ä¸‹å›¾ï¼š","text":"Jenaåˆæ­¥äº†è§£JenaAPIçš„æ¡†æ¶å¦‚ä¸‹å›¾ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåˆ©ç”¨Jenaè¿›è¡Œè¯­ä¹‰ç½‘å¤„ç†åº”ç”¨çš„å¼€å‘æœ‰é€šè¿‡HTTPå’ŒServletå“åº”çš„B/Sæ¨¡å¼ï¼Œè¿˜æœ‰é€šè¿‡JenaAPIè¿›è¡ŒJavaç¼–ç¨‹æ¥å¤„ç†æœ¬ä½“æ•°æ®ã€‚ RDF APIï¼šJenaæä¾›äº†å¯¹RDFæ–‡ä»¶çš„åˆ›å»ºã€è¯»/å†™ä»¥åŠä¸€äº›åŸºæœ¬æ“ä½œçš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ï¼› SPARQL APIï¼šJenaæä¾›ä¸€å¥—å¯¹æœ¬ä½“çš„ä¸‰å…ƒç»„çš„queryæœºåˆ¶ï¼Œç±»ä¼¼äºSQLè¯­è¨€å¯¹äºæ•°æ®åº“çš„æ“ä½œï¼ŒSPARQLå¯¹äºæœ¬ä½“çš„æŸ¥è¯¢ä¹Ÿå¯ä»¥é€šè¿‡ç®€å•çš„æŸ¥è¯¢è¯­å¥è¾¾åˆ°ç›®çš„ï¼Œè¿™ä¹Ÿä¸ºB/Sæ¨¡å¼çš„æœ¬ä½“å±•ç¤ºå’Œäº¤äº’æä¾›äº†åŸºç¡€ï¼› Ontology APIï¼š Fuseki RDF APIåè¯è§£é‡Š Blank Nodeï¼šä¸€é˜¶é€»è¾‘ä¸­è¡¨ç¤ºä¸€ä¸ªæ— URIçš„resource Literalï¼šå¯ä½œä¸ºä¸€ä¸ªpropertyçš„å€¼ï¼ˆvalueï¼‰ Objectï¼šthe resource or literal pointed to by the arcï¼ˆç®­å¤´æŒ‡å‘çš„ä¸€ç«¯ï¼‰ Subjectï¼šthe resource from which the arc leavesï¼ˆç®­å¤´ç¦»å¼€çš„ä¸€ç«¯ï¼‰ Tripleï¼š Predicateï¼šä¸‰å…ƒç»„ä¸­çš„å±æ€§éƒ¨åˆ†ï¼ˆå…³ç³»ï¼‰ï¼ˆthe property that labels the arcï¼‰ Propertyï¼šä¸€ä¸ªresourceçš„å±æ€§ï¼ŒæŒ‡ä¸‰å…ƒç»„ä¸­çš„å…³ç³» Resouceï¼šå®ä½“ï¼Œé€šå¸¸ç”±URIå‘½åçš„èµ„æº Statementï¼šæŒ‡ä¸€ä¸ªfactï¼Œå³ä¸€ä¸ªä¸‰å…ƒç»„ï¼ˆEach arc in an RDF Modelï¼‰ å¯¹RDFçš„æ“ä½œï¼ˆJavaAPIï¼‰ Create graph 123456789101112// some definitionsstatic String personURI = \"http://somewhere/JohnSmith\";static String fullName = \"John Smith\";// create an empty ModelModel model = ModelFactory.createDefaultModel();// create the resourceResource johnSmith = model.createResource(personURI);// add the property johnSmith.addProperty(VCARD.FN, fullName); Create resource and add the property 12//Resouce exampleResource johnSmith = model.createResource(personURI).addProperty(VCARD.FN, fullName); 123456789101112131415161718// some definitionsString personURI = \"http://somewhere/JohnSmith\";String givenName = \"John\";String familyName = \"Smith\";String fullName = givenName + \" \" + familyName;// create an empty ModelModel model = ModelFactory.createDefaultModel();// create the resource// and add the properties cascading styleResource johnSmith = model.createResource(personURI) .addProperty(VCARD.FN, fullName) .addProperty(VCARD.N, model.createResource() .addProperty(VCARD.Given, givenName) .addProperty(VCARD.Family, familyName)); Manipulate the stmt 123456789101112131415161718192021// list the statements in the ModelStmtIterator iter = model.listStatements();// print out the predicate, subject and object of each statementwhile (iter.hasNext()) &#123; Statement stmt = iter.nextStatement(); // get next statement Resource subject = stmt.getSubject(); // get the subject Property predicate = stmt.getPredicate(); // get the predicate RDFNode object = stmt.getObject(); // get the object System.out.print(subject.toString()); System.out.print(\" \" + predicate.toString() + \" \"); if (object instanceof Resource) &#123; System.out.print(object.toString()); &#125; else &#123; // object is a literal System.out.print(\" \\\"\" + object.toString() + \"\\\"\"); &#125; System.out.println(\" .\");&#125; ç”±äºobjectå¯ä»¥æ˜¯Resourceæˆ–è€…Literalï¼Œæ‰€ä»¥objectçš„ç±»å‹ä¸ºRDFNodeã€‚ Writing RDF 1234// now write the model in XML form to a filemodel.write(System.out);model.write(System.out, \"RDF/XML-ABBREV\"); // write the model in XML form to a filemodel.write(System.out, \"N-TRIPLES\"); // write the model in N-TRIPLES form to a file Reading RDF 123456789101112131415// create an empty model Model model = ModelFactory.createDefaultModel(); // use the FileManager to find the input file InputStream in = FileManager.get().open( inputFileName );if (in == null) &#123; throw new IllegalArgumentException( \"File: \" + inputFileName + \" not found\");&#125;// read the RDF/XML filemodel.read(in, null);// write it to standard outmodel.write(System.out); SPARQL APIéœ€è¦ä¿å­˜åœ¨.rqæ–‡ä»¶ä¸­è¿›è¡Œä½¿ç”¨ã€‚ Basic queryï¼š 1SELECT ?xWHERE&#123; ?x&lt;http://www.w3.org/2001/vcard-rdf/3.0#FN&gt; &quot;JohnSmith&quot; &#125; å…¶ä¸­&lt;&gt;ä¸­ä¸ºURIï¼Œâ€œâ€ä¸­ä¸ºliteralï¼Œï¼Ÿxä¸ºæŸ¥è¯¢å˜é‡ Basic pattern 1234WHERE &#123; ?y &lt;http://www.w3.org/2001/vcard-rdf/3.0#Family&gt; &quot;Smith&quot; . ?y &lt;http://www.w3.org/2001/vcard-rdf/3.0#Given&gt; ?givenName . &#125; basic patternsï¼šæ˜¯ä¸€ç»„ä¸‰å…ƒç»„çš„æ¨¡å¼ï¼›prefix and blanknodesï¼š 1234567PREFIX vcard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;SELECT ?y ?givenNameWHERE &#123; ?y vcard:Family &quot;Smith&quot; . ?y vcard:Given ?givenName . &#125; Filters 1234567PREFIX vcard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;SELECT ?gWHERE&#123; ?y vcard:Given ?g . FILTER regex(?g, &quot;r&quot;, &quot;i&quot;) &#125; ä¸Šé¢çš„åŠ ç²—ä¸ºFILTERï¼Œå…¶ä¸­æœ€åä¸€ä¸ªâ€œâ€ä¸­çš„iè¡¨ç¤ºcase-insensitive Optionalsï¼ˆè¡¨ç¤ºå¦‚æœæœ‰è¿™ä¸ªå±æ€§é‚£ä¹ˆå°±æ˜¾ç¤ºåœ¨ç»“æœä¸­ï¼Œå¦‚æœæ²¡æœ‰å°±ä¸æ˜¾ç¤ºï¼‰ 123456789PREFIX info: &lt;http://somewhere/peopleInfo#&gt;PREFIX vcard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;SELECT ?name ?ageWHERE&#123; ?person vcard:FN ?name . OPTIONAL &#123; ?person info:age ?age &#125;&#125; optionals with filtersï¼š 123456789PREFIX info: &lt;http://somewhere/peopleInfo#&gt;PREFIX vcard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;SELECT ?name ?ageWHERE&#123; ?person vcard:FN ?name . OPTIONAL &#123; ?person info:age ?age . FILTER ( ?age &gt; 24 ) &#125;&#125; Unionsï¼š 12345678PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;PREFIX vCard: &lt;http://www.w3.org/2001/vcard-rdf/3.0#&gt;SELECT ?nameWHERE&#123; &#123; [] foaf:name ?name &#125; UNION &#123; [] vCard:FN ?name &#125;&#125; ç›¸å½“äºFILTER ( ?p = foaf:name || ?p = vCard:FN)å¦‚æœæ˜¯åˆ†å¼€èµ„æºé‚£ä¹ˆåªè¦åˆ†åˆ«ç”¨ä¸åŒå˜é‡æ ‡æ³¨å³å¯ï¼š 12345SELECT ?name1 ?name2WHERE&#123; &#123; [] foaf:name ?name1 &#125; UNION &#123; [] vCard:FN ?name2 &#125;&#125; SPARQL result formsï¼š SELECT â€“ Return a table of results. CONSTRUCT â€“ Return an RDF graph, based on a template in the query. DESCRIBE â€“ Return an RDF graph, based on what the query processor is configured to return. ASK â€“ Ask a boolean query.","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"JenaAPI","slug":"JenaAPI","permalink":"http://keefe.wang/tags/JenaAPI/"},{"name":"API","slug":"API","permalink":"http://keefe.wang/tags/API/"},{"name":"Ontology","slug":"Ontology","permalink":"http://keefe.wang/tags/Ontology/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"}]},{"title":"Ontologyæœ¬ä½“åŸºç¡€çŸ¥è¯†æ€»ç»“æ•´ç†","slug":"2015-09-21-ontology-concepts-conclusion","date":"2015-09-21T04:00:00.000Z","updated":"2020-10-20T08:54:46.248Z","comments":true,"path":"2015/09/21/2015-09-21-ontology-concepts-conclusion.html","link":"","permalink":"http://keefe.wang/2015/09/21/2015-09-21-ontology-concepts-conclusion.html","excerpt":"æœ¬ä½“çš„æ¦‚å¿µå…±äº«æ¦‚å¿µæ¨¡å‹çš„æ˜ç¡®çš„å½¢å¼åŒ–è§„èŒƒè¯´æ˜ã€‚åŒ…æ‹¬å››ä¸ªä¸»è¦çš„æ–¹é¢ï¼š æ¦‚å¿µåŒ–ï¼ˆconceptualizationï¼‰ï¼šå®¢è§‚ä¸–ç•Œçš„ç°è±¡çš„æŠ½è±¡æ¨¡å‹ï¼› æ˜ç¡®ï¼ˆexplicitï¼‰ï¼šæ¦‚å¿µåŠå®ƒä»¬ä¹‹é—´è”ç³»éƒ½è¢«ç²¾ç¡®å®šä¹‰ï¼› å½¢å¼åŒ–ï¼ˆformalï¼‰ï¼šç²¾ç¡®çš„æ•°å­¦æè¿°ï¼› å…±äº«ï¼ˆshareï¼‰ï¼šæœ¬ä½“ä¸­åæ˜ çš„çŸ¥è¯†æ˜¯å…¶ä½¿ç”¨è€…å…±åŒè®¤å¯çš„ã€‚","text":"æœ¬ä½“çš„æ¦‚å¿µå…±äº«æ¦‚å¿µæ¨¡å‹çš„æ˜ç¡®çš„å½¢å¼åŒ–è§„èŒƒè¯´æ˜ã€‚åŒ…æ‹¬å››ä¸ªä¸»è¦çš„æ–¹é¢ï¼š æ¦‚å¿µåŒ–ï¼ˆconceptualizationï¼‰ï¼šå®¢è§‚ä¸–ç•Œçš„ç°è±¡çš„æŠ½è±¡æ¨¡å‹ï¼› æ˜ç¡®ï¼ˆexplicitï¼‰ï¼šæ¦‚å¿µåŠå®ƒä»¬ä¹‹é—´è”ç³»éƒ½è¢«ç²¾ç¡®å®šä¹‰ï¼› å½¢å¼åŒ–ï¼ˆformalï¼‰ï¼šç²¾ç¡®çš„æ•°å­¦æè¿°ï¼› å…±äº«ï¼ˆshareï¼‰ï¼šæœ¬ä½“ä¸­åæ˜ çš„çŸ¥è¯†æ˜¯å…¶ä½¿ç”¨è€…å…±åŒè®¤å¯çš„ã€‚ æœ¬ä½“æ„æˆè¦ç´  ç±»ï¼šé›†åˆï¼ˆsetsï¼‰ã€æ¦‚å¿µã€å¯¹è±¡ç±»å‹æˆ–è€…è¯´äº‹ç‰©çš„ç§ç±»ï¼› å…³ç³»ï¼šå…³ç³»ä»£è¡¨äº†åœ¨é¢†åŸŸä¸­ç±»ä¹‹é—´çš„äº¤äº’ä½œç”¨ã€‚å½¢å¼ä¸Šå®šä¹‰ä¸ºn ç»´ç¬›å¡å„¿ä¹˜ç§¯çš„å­é›†ï¼š R ï¼š C1 Ã—C2Ã—â‹¯Ã—Cn ã€‚ å¦‚ï¼šå­ç±»å…³ç³»( subclass-of)ï¼› å‡½æ•°ï¼š å‡½æ•°æ˜¯ä¸€ç±»ç‰¹æ®Šçš„å…³ç³»ã€‚åœ¨è¿™ç§å…³ç³»ä¸­å‰n - 1 ä¸ªå…ƒç´ å¯ä»¥æƒŸä¸€å†³å®šç¬¬n ä¸ªå…ƒç´ ã€‚å½¢å¼åŒ–çš„å®šä¹‰å¦‚ä¸‹ï¼š F ï¼š C1 Ã—C2 Ã—â‹¯Ã—Cn-1â†’Cn ã€‚ä¾‹å¦‚Mother-of å…³ç³»å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä¸­Mother-of ( x ï¼Œ y) è¡¨ç¤ºy æ˜¯x çš„æ¯äº²ï¼Œæ˜¾ç„¶x å¯ä»¥æƒŸä¸€ç¡®å®šä»–çš„æ¯äº²yï¼› å…¬ç†ï¼šå…¬ç†ä»£è¡¨æ°¸çœŸæ–­è¨€ï¼Œæ¯”å¦‚æ¦‚å¿µä¹™å±äºæ¦‚å¿µç”²çš„èŒƒå›´ï¼› å®ä¾‹ï¼šå®ä¾‹ä»£è¡¨å…ƒç´ ï¼Œå³æŸä¸ªç±»ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼› ä¸“å®¶ç³»ç»Ÿ çŸ¥è¯†åº“ï¼š æ¨ç†æœºï¼šæœ¬ä½“æŒ‰ç…§æ˜¯å¦å…·å¤‡æ¨ç†åŠŸèƒ½å¯ä»¥åˆ†ä¸ºè½»é‡çº§æœ¬ä½“ã€ä¸­çº§æœ¬ä½“å’Œé‡é‡çº§æœ¬ä½“ï¼›æŠ€æœ¯æ„æˆåº“åº”è¯¥å±äºå¯ä»¥è¯†åˆ«ä¸€é˜¶è°“è¯é€»è¾‘è¡¨è¾¾å¼çš„ä¸­çº§æœ¬ä½“ æœ¬ä½“è¯­è¨€ æœ¬ä½“è¯­è¨€ç›®å‰æˆä¸ºæ ‡å‡†çš„æ˜¯OWLï¼› Cycå’Œloomä¸¤ç§è¯­è¨€å…·æœ‰è¾ƒå¼ºçš„æ¨ç†èƒ½åŠ›ï¼› é¢†åŸŸæœ¬ä½“çš„çŸ¥è¯†åº“æ„å»º æœ¬ä½“æ„å»ºåŸåˆ™ï¼šæ¸…æ™°ã€ä¸€è‡´ã€å¯æ‰©å±•æ€§ã€ç¼–ç åå¥½ç¨‹åº¦æœ€å°ã€æœ¬ä½“çº¦å®šæœ€å°ï¼› ä¸¤ç§æ¨¡å¼ï¼š åˆ©ç”¨ç°æœ‰æ–‡çŒ®å’Œé¢†åŸŸä¸“å®¶ä½¿ç”¨æ‰‹å·¥çš„æ–¹å¼åˆ›å»ºæ¦‚å¿µå…³è”ï¼› å°†å·²æœ‰çš„å™è¯è¡¨æ”¹é€ æˆæœ¬ä½“ï¼Œæˆ–è€…é‡‡ç”¨å­¦ä¹ æœºåˆ¶ï¼Œè¿›è¡Œè‡ªåŠ¨æˆ–è‡ªåŠ¨åŒ–çš„æœ¬ä½“æ„å»ºã€‚ æœ¬ä½“æ‰‹å·¥æ„å»ºæ–¹æ³•ï¼šéª¨æ¶æ³•ã€ä¼ä¸šå»ºæ¨¡æ³•ã€Methontologyã€KACTUSã€å¾ªç¯è·å–æ³•ã€IDEF-5ã€ä¸ƒæ­¥æ³•ï¼› ä¸ƒæ­¥æ³•ï¼š ç¡®å®šæœ¬ä½“çš„ä¸“ä¸šé¢†åŸŸä¸èŒƒç•´ï¼› è€ƒæŸ¥å¤ç”¨ç°æœ‰æœ¬ä½“çš„å¯èƒ½æ€§ï¼› åˆ—å‡ºæœ¬ä½“ä¸­çš„é‡è¦æœ¯è¯­ï¼› å®šä¹‰ç±»å’Œç±»çš„ç­‰çº§å…³ç³»ï¼› å®šä¹‰ç±»çš„å±æ€§ï¼› å®šä¹‰å±æ€§çš„åˆ†é¢(Facets)ï¼› åˆ›å»ºå®ä¾‹ã€‚ é¢†åŸŸæœ¬ä½“çŸ¥è¯†åº“æ¶æ„ä¸‰ä¸ªå±‚æ¬¡ï¼š è¡¨ç¤ºå±‚ï¼šè¡¨ç¤ºå±‚æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿäº¤äº’çš„æ¥å£ï¼Œç”¨æˆ·é€šè¿‡æµè§ˆå™¨æˆ–å…¶ä»–ç•Œé¢è®¿é—®ç³»ç»Ÿï¼Œç”¨æˆ·ç•Œé¢è´Ÿè´£æ¥æ”¶æŸ¥è¯¢è¯·æ±‚ï¼Œ å¹¶å°†æœåŠ¡ç«¯çš„æ£€ç´¢ç»“æœå›æ˜¾ç»™ç”¨æˆ·ï¼› ä¸šåŠ¡é€»è¾‘å±‚ï¼šä¸šåŠ¡é€»è¾‘å±‚ä¸ºä¸»è¦åº”ç”¨é€»è¾‘å±‚ï¼Œå®ç°ç³»ç»ŸçŸ¥è¯†çš„æ£€ç´¢ã€‚å®ƒç”±æœ¬ä½“ç®¡ç†ç»„ä»¶ã€è¯­ä¹‰åˆ†æç»„ä»¶ã€æ¨ç†å¼•æ“ã€æŸ¥ è¯¢ç»„ä»¶å’Œä¿¡æ¯è·å–ç»„ä»¶5ä¸ªéƒ¨åˆ†ç»„æˆï¼› æ•°æ®å±‚ï¼šæ•°æ®å±‚åŒ…æ‹¬3ä¸ªéƒ¨åˆ†ï¼šæœ¬ä½“åº“ã€èµ„æºæè¿°åº“ã€èµ„æºæ•°æ®åº“ã€‚å®ƒæ˜¯çŸ¥è¯†åº“çš„å­˜å‚¨ä»‹è´¨ï¼Œåˆ›å»ºå¹¶æç‚¼å‡ºç»“æ„åŒ– çš„çŸ¥è¯†æœ¬ä½“ï¼Œæ˜¯çŸ¥è¯†æ£€ç´¢çš„ç›´æ¥æ¥æºï¼›","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"Ontology","slug":"Ontology","permalink":"http://keefe.wang/tags/Ontology/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"http://keefe.wang/tags/åŸºç¡€çŸ¥è¯†/"},{"name":"Knowledge Base","slug":"Knowledge-Base","permalink":"http://keefe.wang/tags/Knowledge-Base/"}]},{"title":"Markdown","slug":"2014-12-25-markdown-programming-language","date":"2014-12-24T16:31:00.000Z","updated":"2020-10-20T08:55:23.857Z","comments":true,"path":"2014/12/25/2014-12-25-markdown-programming-language.html","link":"","permalink":"http://keefe.wang/2014/12/25/2014-12-25-markdown-programming-language.html","excerpt":"æœ¬ç¯‡æ–‡ç« æ˜¯å…³äºæœ¬ç«™åšå®¢æ–‡ç« çš„Markdownæ ¼å¼çš„æ–‡æ¡£ã€‚","text":"æœ¬ç¯‡æ–‡ç« æ˜¯å…³äºæœ¬ç«™åšå®¢æ–‡ç« çš„Markdownæ ¼å¼çš„æ–‡æ¡£ã€‚ æ®µè½å…ƒç´  på’Œbr æ ‡é¢˜ æ®µè½å¼•ç”¨ åˆ—è¡¨ ä»£ç  Horizontal Rules è¡¨æ ¼ æ®µå†…å…ƒç´  é“¾æ¥ å¼ºè°ƒ ä»£ç  å›¾ç‰‡ æ··æ‚æ¨¡å¼ è‡ªåŠ¨é“¾æ¥ Backslash Escapes å†…è”HTML Block ElementsParagraphs and Line Breaksæ®µè½HTMLæ ‡ç­¾: &lt;p&gt; åœ¨ä¸€æ®µåè¿›è¡Œå›è½¦ç©ºå‡ºä¸€è¡Œå¯ä»¥è¾¾åˆ°è¯¥æ•ˆæœã€‚ ä»£ç : This will be inline. This is second paragraph. é¢„è§ˆ: This will beinline. This is second paragraph. HeadersMarkdownæ”¯æŒä¸¤ç§æ–¹å¼çš„æ ‡é¢˜ï¼šSetext/atx. SetextHTMLæ ‡ç­¾: &lt;h1&gt;, &lt;h2&gt; ä½¿ç”¨ç­‰å·â€˜=â€™åœ¨æ ‡é¢˜ä¸‹åˆ’çº¿ä»£è¡¨&lt;h1&gt;ï¼Œ ä½¿ç”¨è¿å­—ç¬¦â€˜-â€™åœ¨æ ‡é¢˜ä¸‹åˆ’çº¿è¡¨ç¤º &lt;h2&gt;ï¼Œå…¶ä¸­ç¬¦å·çš„æ•°é‡å¯ä»¥ä¸åšé™åˆ¶. ä»£ç : This is an H1 ============= This is an H2 ------------- é¢„è§ˆ: This is an H1This is an H2 atxHTMLæ ‡ç­¾: &lt;h1&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;h4&gt;, &lt;h5&gt;, &lt;h6&gt; ä½¿ç”¨1åˆ°6ä¸ªâ€˜#â€™å·æ¥è¡¨ç¤ºæ ‡é¢˜æ ‡ç­¾ &lt;h1&gt; - &lt;h6&gt;. ä»£ç : # This is an H1 ## This is an H2 ###### This is an H6 é¢„è§ˆ: This is an H1This is an H2This is an H6 atxæ ¼å¼çš„æ ‡é¢˜å¯ä»¥è¿›è¡Œé—­åˆå¦‚### This is an H3 ######ï¼Œå¯è§ä¸¤ç«¯çš„â€˜#â€™å·æ•°é‡ä¸éœ€è¦ç›¸ç­‰ã€‚ BlockquotesHTMLæ ‡ç­¾: &lt;blockquote&gt; éœ€è¦å†æ¯ä¸€ä¸ªæ®µè½ä¹‹å‰åŠ â€˜&gt;â€™ç¬¦å·æ¥å½¢æˆæ®µè½å¼•ç”¨ã€‚ Code: &gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, &gt; &gt; This is nested blockquote. &gt; Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. &gt; &gt; id sem consectetuer libero luctus adipiscing. Preview: This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, This is nested blockquote. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse ListsMarkdownæ”¯æŒæœ‰åºå’Œæ— åºåˆ—è¡¨ã€‚ æ— åºåˆ—è¡¨HTMLæ ‡ç­¾: &lt;ul&gt; æ— åºåˆ—è¡¨å¯ä»¥ä½¿ç”¨â€˜*â€™ã€â€˜+â€™ã€â€˜-â€™ä¸‰ç§ç¬¦å·å¼€å¤´å¹¶åœ¨ç¬¦å·åæ·»åŠ ä¸€ä¸ªç©ºæ ¼ã€‚ ä»£ç : * Red + Green â€” Blue é¢„è§ˆ: Red Green Blue OrderedHTMLæ ‡ç­¾: &lt;ol&gt; æœ‰åºåˆ—è¡¨é€šè¿‡æ•°å­—å’Œç‚¹ç¬¦å·â€˜.â€™ä»¥åŠç©ºæ ¼å¼€å¤´æ¥è¡¨ç¤ºï¼Œå‰é¢çš„æ•°å­—æ˜¯å‡ æ— æ‰€è°“ï¼Œä¼šè‡ªåŠ¨è§£ææˆä»å°åˆ°å¤§çš„é¡ºåºã€‚ ä»£ç : 1. Bird 22. McHale 3. Parish 44\\. Cat é¢„è§ˆ: Bird McHale Parish44. Cat ç¼©è¿›æ®µè½çº§åˆ«çš„ç¼©è¿›ä½¿ç”¨tabæ·»åŠ åœ¨æ®µè½ä¹‹å‰å³å¯ã€‚ Code BlocksHTMLæ ‡ç­¾: &lt;pre&gt; ä»£ç çš„æ¯ä¸€è¡Œéƒ½ç¼©è¿›è‡³å°‘â€˜4ä¸ªç©ºæ ¼â€™å’Œâ€˜1ä¸ªtabâ€™ï¼Œä»£ç ç»“æŸæ˜¯ä»¥ç¬¬ä¸€ä¸ªä¸ç¼©è¿›çš„æ®µè½ä¸ºæ­¢ã€‚ ä»£ç : This is a normal paragraph: This is a code block. ä»£ç : This is a normal paragraph: This is a code block. åŒ…è£¹ä»£ç å¯ä»¥ä½¿ç”¨`*3åè·Ÿè¯­æ³•åç§°æ¥è¿›è¡Œä»£ç çš„åŒ…è£¹ï¼Œä»è€Œé¿å…æ¯ä¸€è¡Œçš„ç¼©è¿›å¹¶å¯ä»¥è¿›è¡Œè¯­æ³•é«˜äº®ã€‚ ä»£ç : Here&apos;s an example: 123function test() &#123; console.log(\"notice the blank line before this function?\");&#125; é¢„è§ˆ: 123function test() &#123; console.log(&quot;notice the blank line before this function?&quot;);&#125; Horizontal RulesHTML Tag: &lt;hr /&gt;åˆ†ç•Œçº¿å¯ä»¥ä½¿ç”¨â€™*â€˜ã€â€™-â€˜ã€â€™_â€™ ä»£ç : * * * *** ***** - - - --------------------------------------- ___ é¢„è§ˆ: - - - TableHTMLæ ‡ç­¾: &lt;table&gt; è¡¨æ ¼ä½¿ç”¨â€˜|â€™ã€â€˜:â€™ã€â€˜-â€™ä¸‰ç§ç¬¦å·è¿›è¡Œæ„é€ ï¼Œå…¶ä¸­â€˜-â€™ç¬¦å·å¿…é¡»æœ‰è‡³å°‘3ä¸ªæ‰èƒ½æ„é€ è¡¨æ ¼ã€‚ä»£ç : 12345678| Left | Center | Right ||:-----|:------:|------:||aaa |bbb |ccc ||ddd |eee |fff |A |B--|--12|45 é¢„è§ˆ: Left Center Right aaa bbb ccc ddd eee fff A B 12 45 Span ElementsLinksHTMLæ ‡ç­¾: &lt;a&gt; Markdownæ”¯æŒä¸¤ç§ç±»å‹çš„é“¾æ¥ï¼šå†…è”åœ¨æ®µè½ä¸­å’Œå¼•ç”¨æ¨¡å¼. å†…è”å†…è”åœ¨æ®µè½ä¸­[Link Text](URL &quot;Title&quot;)ï¼Œå¦‚æœæ˜¯åœ¨æœ¬ç«™çš„ç½‘å€ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹åœ°å€è¿›è¡Œè®¿é—®ã€‚ ä»£ç : This is [an example](http://example.com/ &quot;Title&quot;) inline link. See my [About](/about/) page for details. é¢„è§ˆ: This is an example inline link. See my About page for details. å‚è€ƒå¼•ç”¨å‚è€ƒé“¾æ¥çš„å½¢å¼å¦‚æ­¤ï¼š[id]: URL &quot;Title&quot; ä»£ç : [id]: http://example.com/ &quot;Optional Title Here&quot; This is [an example][id] reference-style link. é¢„è§ˆ: This is an example reference-style link. EmphasisHTMLæ ‡ç­¾: &lt;em&gt;, &lt;strong&gt; Markdownä½¿ç”¨â€˜*â€™ã€â€˜_â€™ç¬¦å·è¿›è¡Œæ–œä½“çš„æ ‡æ³¨ï¼Œâ€˜**â€™ã€â€˜__â€™ç¬¦å·è¿›è¡Œç²—ä½“çš„æ ‡æ³¨ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨â€˜*â€™ç¬¦å·å¯ä»¥åŠ â€˜\\â€™è¿›è¡Œè½¬ä¹‰ã€‚ ä»£ç : *single asterisks* _single underscores_ **double asterisks** __double underscores__ é¢„è§ˆ: single asterisks single underscores double asterisks double underscores CodeHTMLæ ‡ç­¾: &lt;code&gt; ä½¿ç”¨â€˜`â€™æ¥å¯¹å†…è”çš„ä»£ç è¿›è¡ŒåŒ…è£¹ï¼Œbacktick quotes (`). Code: Use the `printf()` function. Preview: Use the printf() function. ImagesHTMLæ ‡ç­¾: &lt;img /&gt; Markdownæ”¯æŒå†…è”å’Œå‚è€ƒå¼•ç”¨ä¸¤ç§æ–¹å¼è¿›è¡Œå›¾ç‰‡çš„æ·»åŠ ã€‚ å†…è”å†…è”å›¾ç‰‡ä»£ç å¦‚æ­¤ï¼š ![Alt text](URL &quot;Title&quot;)ï¼Œå…¶ä¸­titleæ˜¯å¯é€‰çš„ä¸€é¡¹ã€‚ ä»£ç : ![Alt text](/path/to/img.jpg) ![Alt text](/path/to/img.jpg &quot;Optional title&quot;) Referenceå‚è€ƒå¼•ç”¨æ–¹å¼çš„ä»£ç å¦‚æ­¤ï¼š ![Alt text][id] ä»£ç : [img id]: url/to/image &quot;Optional title attribute&quot; ![Alt text][img id] MiscellaneousAutomatic Linksä½¿ç”¨â€˜&lt; &gt;â€™ç¬¦å·å°†é“¾æ¥åŒ…è£¹å½¢æˆè‡ªåŠ¨é“¾æ¥ã€‚ ä»£ç : &lt;http://example.com/&gt; &lt;address@example.com&gt; é¢„è§ˆ: http://example.com/ &#x61;&#100;&#100;&#114;&#x65;&#x73;&#x73;&#x40;&#x65;&#x78;&#97;&#109;&#112;&#108;&#x65;&#x2e;&#x63;&#x6f;&#109; Backslash Escapesä½¿ç”¨åæ–œçº¿æ¥è¿›è¡ŒæŸäº›ç¬¦å·çš„è½¬ä¹‰ ä»£ç : \\*literal asterisks\\* é¢„è§ˆ: *literal asterisks* æ”¯æŒä»¥ä¸‹ç¬¦å·: Code: \\ backslash ` backtick * asterisk _ underscore {} curly braces [] square brackets () parentheses # hash mark + plus sign - minus sign (hyphen) . dot ! exclamation mark Inline HTMLå¦‚æœéœ€è¦ä¸€äº›HTMLä¸­çš„æ ‡ç­¾è€ŒMarkdownä¸­æ²¡æœ‰çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨HTMLæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ä½¿ç”¨ã€‚ ä»£ç : This is a regular paragraph. &lt;table&gt; &lt;tr&gt; &lt;td&gt;Foo&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; This is another regular paragraph. é¢„è§ˆ: This is a regular paragraph. Foo This is another regular paragraph.","categories":[{"name":"Document","slug":"Document","permalink":"http://keefe.wang/categories/Document/"}],"tags":[{"name":"Markdown","slug":"Markdown","permalink":"http://keefe.wang/tags/Markdown/"}]}]}